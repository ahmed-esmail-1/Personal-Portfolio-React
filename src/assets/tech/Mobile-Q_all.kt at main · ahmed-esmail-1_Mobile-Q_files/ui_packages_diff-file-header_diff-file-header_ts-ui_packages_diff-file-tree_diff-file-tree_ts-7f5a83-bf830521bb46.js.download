"use strict";(globalThis.webpackChunk=globalThis.webpackChunk||[]).push([["ui_packages_diff-file-header_diff-file-header_ts-ui_packages_diff-file-tree_diff-file-tree_ts-7f5a83","ui_packages_file-renderer-blob_FileRendererBlob_tsx"],{37144:(e,t,n)=>{n.d(t,{Z:()=>i});let i={commentIndicatorContainer:"CommentIndicator-module__commentIndicatorContainer--L8lU3"}},43748:(e,t,n)=>{n.d(t,{Z:()=>i});let i={visibilityHidden:"DiffFindPopover-module__visibilityHidden--HCMWu",visibilityVisible:"DiffFindPopover-module__visibilityVisible--AknNV",defaultStyles:"DiffFindPopover-module__defaultStyles--IjqxB",stickyStyles:"DiffFindPopover-module__stickyStyles--oNP5J",notStickyStyles:"DiffFindPopover-module__notStickyStyles--_E6rW"}},68434:(e,t,n)=>{n.d(t,{Z:()=>i});let i={visibilityHidden:"DiffHighlightedOverlay-module__visibilityHidden--v59uf",visibilityVisible:"DiffHighlightedOverlay-module__visibilityVisible--zJWJ5",userSelectNone:"DiffHighlightedOverlay-module__userSelectNone--i39lB",focusedResultStyles:"DiffHighlightedOverlay-module__focusedResultStyles--QZMIm",nonFocusedResultStyles:"DiffHighlightedOverlay-module__nonFocusedResultStyles--x2N7d",nonHunkStyles:"DiffHighlightedOverlay-module__nonHunkStyles--_dJlQ"}},83888:(e,t,n)=>{n.d(t,{Z:()=>i});let i={tableLayoutFixed:"DiffLines-module__tableLayoutFixed--YZcIJ"}},30543:(e,t,n)=>{n.d(t,{Z:()=>i});let i={"expand-button-line":"ExpandableHunkHeaderDiffLine-module__expand-button-line--rnQN5","expand-up-and-down":"ExpandableHunkHeaderDiffLine-module__expand-up-and-down--hCan_"}},39915:(e,t,n)=>{n.d(t,{Z:()=>i});let i={gridColumnTemplate:"HiddenDiffPatch-module__gridColumnTemplate--3bEGq"}},49981:(e,t,n)=>{n.d(t,{Z:()=>i});let i={overlay:"SelectedDiffLinesOverlay-module__overlay--mWvvK",overlayOpacity:"SelectedDiffLinesOverlay-module__overlayOpacity--B9iKM"}},61211:(e,t,n)=>{n.d(t,{q:()=>i});function i(e){if(null==e)throw Error("Failed to load page data.")}},98805:(e,t,n)=>{n.d(t,{bx:()=>o,ln:()=>s,tW:()=>d});var i=n(51350),r=n(42893);let l={cursorNavigationHopWordLeft:{hotkey:"Alt+ArrowLeft,Ctrl+ArrowLeft",useWhileBlobFocused:!0,noModifierHotkey:["ArrowLeft"],modifierRequired:!0},cursorNavigationHopWordRight:{hotkey:"Alt+ArrowRight,Ctrl+ArrowRight",useWhileBlobFocused:!0,noModifierHotkey:["ArrowRight"],modifierRequired:!0},cursorNavigationTopOfPage:{hotkey:"Meta+ArrowUp",useWhileBlobFocused:!0,noModifierHotkey:["ArrowUp"],modifierRequired:!0},cursorNavigationBottomOfPage:{hotkey:"Meta+ArrowDown",useWhileBlobFocused:!0,noModifierHotkey:["ArrowDown"],modifierRequired:!0},cursorNavigationEnd:{hotkey:"End,Meta+ArrowRight",useWhileBlobFocused:!0,noModifierHotkey:["End"]},cursorNavigationHome:{hotkey:"Home,Meta+ArrowLeft",useWhileBlobFocused:!0,noModifierHotkey:["Home"]},cursorNavigationPageUp:{hotkey:"PageUp",useWhileBlobFocused:!0,noModifierHotkey:["PageUp"]},cursorNavigationPageDown:{hotkey:"PageDown",useWhileBlobFocused:!0,noModifierHotkey:["PageDown"]},cursorNavigationArrowDown:{hotkey:"ArrowDown",useWhileBlobFocused:!0,noModifierHotkey:["ArrowDown"]},cursorNavigationArrowUp:{hotkey:"ArrowUp",useWhileBlobFocused:!0,noModifierHotkey:["ArrowUp"]},cursorNavigationArrowLeft:{hotkey:"ArrowLeft",useWhileBlobFocused:!0,noModifierHotkey:["ArrowLeft"]},cursorNavigationArrowRight:{hotkey:"ArrowRight",useWhileBlobFocused:!0,noModifierHotkey:["ArrowRight"]},cursorNavigationShiftHopWordLeft:{hotkey:"Alt+Shift+ArrowLeft,Ctrl+Shift+ArrowLeft",useWhileBlobFocused:!0,noModifierHotkey:["ArrowLeft"],modifierRequired:!0},cursorNavigationShiftHopWordRight:{hotkey:"Alt+Shift+ArrowRight,Ctrl+Shift+ArrowRight",useWhileBlobFocused:!0,noModifierHotkey:["ArrowRight"],modifierRequired:!0},cursorNavigationShiftTopOfPage:{hotkey:"Meta+Shift+ArrowUp",useWhileBlobFocused:!0,noModifierHotkey:["ArrowUp"],modifierRequired:!0},cursorNavigationShiftBottomOfPage:{hotkey:"Meta+Shift+ArrowDown",useWhileBlobFocused:!0,noModifierHotkey:["ArrowDown"],modifierRequired:!0},cursorNavigationShiftEnd:{hotkey:"Shift+End,Meta+Shift+ArrowRight",useWhileBlobFocused:!0,noModifierHotkey:["End"],modifierRequired:!0},cursorNavigationShiftHome:{hotkey:"Shift+Home,Meta+Shift+ArrowLeft",useWhileBlobFocused:!0,noModifierHotkey:["Home"],modifierRequired:!0},cursorNavigationShiftPageUp:{hotkey:"Shift+PageUp",useWhileBlobFocused:!0,noModifierHotkey:["PageUp"],modifierRequired:!0},cursorNavigationShiftPageDown:{hotkey:"Shift+PageDown",useWhileBlobFocused:!0,noModifierHotkey:["PageDown"],modifierRequired:!0},cursorNavigationShiftArrowDown:{hotkey:"Shift+ArrowDown",useWhileBlobFocused:!0,noModifierHotkey:["ArrowDown"],modifierRequired:!0},cursorNavigationShiftArrowUp:{hotkey:"Shift+ArrowUp",useWhileBlobFocused:!0,noModifierHotkey:["ArrowUp"],modifierRequired:!0},cursorNavigationShiftArrowLeft:{hotkey:"Shift+ArrowLeft",useWhileBlobFocused:!0,noModifierHotkey:["ArrowLeft"],modifierRequired:!0},cursorNavigationShiftArrowRight:{hotkey:"Shift+ArrowRight",useWhileBlobFocused:!0,noModifierHotkey:["ArrowRight"],modifierRequired:!0},cursorNavigationHighlightLine:{text:"J",hotkey:"Shift+J",useWhileBlobFocused:!0,noModifierHotkey:["J"],modifierRequired:!0},cursorNavigationGoLineUp:{hotkey:"Ctrl+p",useWhileBlobFocused:!0,noModifierHotkey:["p"],modifierRequired:!0},cursorNavigationOpenHelpDialog:{hotkey:"Alt+F1,Control+Alt+\u02D9,Control+Alt+h",useWhileBlobFocused:!0,noModifierHotkey:["F1","h","\u02D9"],modifierRequired:!0},cursorNavigationGoLineDown:{hotkey:"Ctrl+n",useWhileBlobFocused:!0,noModifierHotkey:["n"],modifierRequired:!0},cursorNavigationEnter:{text:"\u2318 Enter",hotkey:"Meta+Enter",useWhileBlobFocused:!0,noModifierHotkey:["Enter"],modifierRequired:!0},cursorNavigationSpace:{hotkey:" ",useWhileBlobFocused:!0,noModifierHotkey:[" "],modifierRequired:!1},cursorNavigationShiftSpace:{hotkey:"Shift+ ",useWhileBlobFocused:!0,noModifierHotkey:[" "],modifierRequired:!0},expandAndFocusLineContextMenu:{text:"Shift Alt C",hotkey:"Alt+Shift+C,Alt+Shift+\xc7",useWhileBlobFocused:!0,noModifierHotkey:["C"],modifierRequired:!0},copyFilePathShortcut:{text:"\u2318 shift .",hotkey:"Meta+Shift+>",useWhileBlobFocused:!0,noModifierHotkey:["."],modifierRequired:!0},copyPermalinkShortcut:{text:"\u2318 shift ,",hotkey:"Meta+Shift+<",useWhileBlobFocused:!0,noModifierHotkey:[","],modifierRequired:!0},copyRawContentShortcut:{text:"\u2318 shift c",hotkey:"Meta+Shift+C",useWhileBlobFocused:!0,noModifierHotkey:["c"],modifierRequired:!0},downloadRawContentShortcut:{text:"\u2318 shift s",hotkey:"Meta+Shift+S",useWhileBlobFocused:!0,noModifierHotkey:["s"],modifierRequired:!0},editFileShortcut:{hotkey:"e,Shift+E",useWhileBlobFocused:!0,noModifierHotkey:["e","E"]},goToLineShortcut:{text:"l",hotkey:"l,Shift+L",ariaKeyShortcuts:"l",useWhileBlobFocused:!0,noModifierHotkey:["l","L"]},alternativeGoToLineShortcut:{hotkey:"Mod+Alt+g",ariaKeyShortcuts:"Mod+Alt+g",useWhileBlobFocused:!0,noModifierHotkey:["g","G"]},findInFileShortcut:{hotkey:"Meta+f, F3",text:"\u2318 f",ariaKeyShortcuts:"Meta+F",useWhileBlobFocused:!0,noModifierHotkey:["f","F3"],modifierRequired:!0},findFilesShortcut:{hotkey:"t,Shift+T",useWhileBlobFocused:!0,noModifierHotkey:["t","T"]},findSelectionShortcut:{hotkey:"Meta+e",useWhileBlobFocused:!0,noModifierHotkey:["e"],modifierRequired:!0},findNextShortcut:{hotkey:"Mod+g"},findPrevShortcut:{hotkey:"Mod+Shift+G"},openWithGitHubDevShortcut:{hotkey:"., Meta+Shift+/",useWhileBlobFocused:!0,noModifierHotkey:["."]},openWithGitHubDevInNewWindowShortcut:{hotkey:"Shift+.,Shift+>,>",useWhileBlobFocused:!0,noModifierHotkey:[">"]},permalinkShortcut:{hotkey:"y,Shift+Y",useWhileBlobFocused:!0,noModifierHotkey:["y","Y"]},searchShortcut:{hotkey:"/",useWhileBlobFocused:!0,noModifierHotkey:["/"]},selectAllShortcut:{hotkey:"Meta+a",useWhileBlobFocused:!0,noModifierHotkey:["a"],modifierRequired:!0},selectEditTabShortcut:{hotkey:"Mod+Shift+P"},submitCommitDialogShortcut:{hotkey:"Mod+Enter"},refSelectorShortcut:{hotkey:"w",text:"w",useWhileBlobFocused:!0,noModifierHotkey:["w"]},escapeRightClickMenu:{hotkey:"Escape",useWhileBlobFocused:!0,noModifierHotkey:["Escape"]},toggleFocusedPaneShortcut:{hotkey:"Meta+F6,Meta+Shift+F6",useWhileBlobFocused:!0,noModifierHotkey:["F6"],modifierRequired:!0},toggleSymbolsShortcut:{hotkey:"Meta+i",useWhileBlobFocused:!0,noModifierHotkey:["i"],modifierRequired:!0},toggleTreeShortcut:{hotkey:"Meta+b",useWhileBlobFocused:!0,noModifierHotkey:["b"],modifierRequired:!0},viewBlameShortcut:{hotkey:"b,Shift+B,Meta+/ Meta+b",useWhileBlobFocused:!0,noModifierHotkey:["b"]},viewCodeShortcut:{hotkey:"Meta+/ Meta+c",useWhileBlobFocused:!0,modifierRequired:!0},viewPreviewShortcut:{hotkey:"Meta+/ Meta+p"},viewRawContentShortcut:{text:"\u2318 / \u2318 r",hotkey:"Meta+/ Meta+r",useWhileBlobFocused:!0,noModifierHotkey:["r"],modifierRequired:!0},findSymbolShortcut:{hotkey:"r,Shift+R",useWhileBlobFocused:!0,noModifierHotkey:["r","R"],modifierRequired:!1}},a=new Map;function o(){let e=(0,r.f)(["mac"]),[t]=(0,i.D)(()=>!1,!0,[]),n=0;if(e?n=1:t||(n=2),!a.has(n)){var o,s;let i=l;e||t||(i=Object.keys(o=i).reduce((e,t)=>{let n=o[t];return e[t]={hotkey:n.hotkey?.replace(/Meta/g,"Control"),text:n.text?.replace(/⌘/g,"Ctrl").replace(/⇧/g,"Shift"),ariaKeyShortcuts:n.ariaKeyShortcuts?.replace(/Meta/g,"Control"),useWhileBlobFocused:n.useWhileBlobFocused,modifierRequired:n.modifierRequired,noModifierHotkey:n.noModifierHotkey},e},{})),t&&(i=Object.keys(s=i).reduce((e,t)=>{let n=s[t];return e[t]={hotkey:void 0,text:n.text?.replace(/⌘/g,"Ctrl").replace(/⇧/g,"Shift"),ariaKeyShortcuts:n.ariaKeyShortcuts?.replace(/Meta/g,"Control"),useWhileBlobFocused:n.useWhileBlobFocused,modifierRequired:n.modifierRequired,noModifierHotkey:n.noModifierHotkey},e},{})),a.set(n,i)}return a.get(n)}function s(){let e=o();return Object.keys(e).reduce((t,n)=>{let i=e[n];if(i.useWhileBlobFocused&&i.noModifierHotkey&&i.modifierRequired)for(let e of i.noModifierHotkey)t.includes(e)||t.push(e);return t},[])}function d(){let e=o();return Object.keys(e).reduce((t,n)=>{let i=e[n];if(i.useWhileBlobFocused&&i.noModifierHotkey&&!i.modifierRequired)for(let e of i.noModifierHotkey)t.includes(e)||t.push(e);return t},[])}},87160:(e,t,n)=>{n.d(t,{V:()=>WebWorker});let WebWorker=class WebWorker{set onmessage(e){this.worker.onmessage=e}postMessage(e){this.worker.postMessage(e)}terminate(){this.worker.terminate()}constructor(e,t){try{this.worker=new Worker(e)}catch(e){console.warn("Web workers are not available. Please enable web workers to benefit from the improved performance."),this.worker=new MainThreadWorker(t)}}};let MainThreadWorker=class MainThreadWorker{async postMessage(e){if(this.terminated)return;let t={data:this.job({data:e})};this.onmessage?.(t)}terminate(){this.terminated=!0}constructor(e){this.job=e,this.terminated=!1}}},82263:(e,t,n)=>{n.d(t,{d:()=>DebouncedWorkerManager});let DebouncedWorkerManager=class DebouncedWorkerManager{post(e){if(this.debounceOverrideCondition&&this.debounceOverrideCondition(e))return this.delayId&&clearTimeout(this.delayId),this.postNow(e);this.idle()?(this.delayId&&clearTimeout(this.delayId),this.delayId=setTimeout(()=>{this.postNow(e)},this.delayMs)):this.nextRequest=e}postNow(e){this.currentRequest=e,this.worker.postMessage(e)}idle(){return!this.currentRequest}terminate(){this.worker.terminate()}constructor(e,t=200,n){this.worker=e,this.delayMs=t,this.debounceOverrideCondition=n,this.currentRequest=void 0,this.nextRequest=void 0,this.worker.onmessage=({data:e})=>{this.onResponse&&this.onResponse(e),this.nextRequest?(this.postNow(this.nextRequest),this.nextRequest=void 0):this.currentRequest=void 0}}}},66655:(e,t,n)=>{n.d(t,{Kg:()=>a.K,Rm:()=>i.R,VM:()=>s.V,am:()=>d.a,dc:()=>c.d,hA:()=>r.h,sR:()=>l.s,sf:()=>o.s,uN:()=>u.u}),n(42751);var i=n(57552),r=n(19464),l=n(42424),a=n(38499),o=n(82866),s=n(16458),d=n(9307),c=n(5361),u=n(9538);n(35958),n(17650)},87562:(e,t,n)=>{n.d(t,{g:()=>i});function i(e,t="r"){history.replaceState(null,"",`#${t}${e}`)}},9538:(e,t,n)=>{n.d(t,{u:()=>d});var i=n(83376),r=n(67294);let{getItem:l,removeItem:a,setItem:o}=(0,i._)("localStorage"),s=(e,t)=>{let{diffSide:n,filePath:i,line:r,subjectId:l}=e;if(t)return`PullRequest:${l}-File:${i}`;if(void 0!==r&&void 0!==n)return`PullRequest:${l}-File:${i}-Line:${r}-DiffSide:${n}`;throw Error("Cannot build diff line comment cache key for a comment without a line number or diff side")};function d({diffSide:e,filePath:t,handlePersistedCommentExists:n,line:i,subjectId:d,threadId:c,fileLevelComment:u}){let f,h;let m=(0,r.useMemo)(()=>c||(c??s({diffSide:e,filePath:t,line:i,subjectId:d},u)),[e,t,i,d,c,u]),{hasPersistedComment:g,removePersistedCommentFromStorage:p}=(f=l(m),h=!!f?.text?.trim(),(0,r.useEffect)(()=>{h&&n?.(f)},[h]),{hasPersistedComment:h,removePersistedCommentFromStorage:()=>{a(m),h=!1,f=null}});return{hasPersistedComment:g,persistCommentToStorage:e=>{let t={text:e.text};e.startLine&&e.startSide&&(t={...t,startLine:e.startLine,startSide:e.startSide}),o(m,t)},removePersistedCommentFromStorage:p}}},90507:(e,t,n)=>{function i(e,t){return t.some(t=>r(t,e))}function r(e,t){return e.commentId===t.commentId&&e.path===t.path&&e.suggestion.length===t.suggestion.length&&l(e.suggestion,t.suggestion)}n.d(t,{MM:()=>i,RN:()=>s,aF:()=>d,eE:()=>o,l3:()=>r});let l=(e,t)=>e.length===t.length&&!e.some((e,n)=>e!==t[n]),a={USER_CANNOT_APPLY_SUGGESTION:"You do not have permission to apply this suggestion.",PULL_REQUEST_IS_CLOSED:"This suggestion cannot be applied because the pull request is closed.",PULL_REQUEST_IS_IN_MERGE_QUEUE:"This suggestion cannot be applied because the pull request is queued to merge.",IS_OUTDATED:"This suggestion is outdated and cannot be applied.",IS_PENDING:"This suggestion is part of a pending comment and cannot be applied.",IS_RESOLVED:"This suggestion is part of a resolved comment and cannot be applied.",UNCHANGED_CODE:"This suggestion is invalid because no changes were made to the code.",INVALID_RANGE:"Unable to commit due to other pending changes affecting this line.",BATCH_TOO_BIG:"Unable to commit due to too many changes in the batch.",DELETED_LINES:"Unable to apply suggestions on deleted lines.",RANGE_NOT_PROVIDED:"This suggestion does not have a valid line range.",UNABLE_TO_DETERMINE_VALIDITY:"Unable to determine the validity of this suggestion."};function o({suggestedChange:e,isOutdated:t,isPending:n,isResolved:i,pullRequestIsClosed:r,pullRequestIsInMergeQueue:l,userCanApplySuggestion:o,applySuggestedChangesValidationData:s,suggestedChangesConfig:d}){let{lineRange:c}=s;if(t)return{isValid:!1,reason:a.IS_OUTDATED};if(n)return{isValid:!1,reason:a.IS_PENDING};if(i)return{isValid:!1,reason:a.IS_RESOLVED};if(r)return{isValid:!1,reason:a.PULL_REQUEST_IS_CLOSED};if(l)return{isValid:!1,reason:a.PULL_REQUEST_IS_IN_MERGE_QUEUE};if(!o)return{isValid:!1,reason:a.USER_CANNOT_APPLY_SUGGESTION};if(!c)return{isValid:!1,reason:a.RANGE_NOT_PROVIDED};if(!d)return{isValid:!1,reason:a.UNABLE_TO_DETERMINE_VALIDITY};if(!d?.isValidSuggestionRange)return{isValid:!1,reason:a.DELETED_LINES};let u=d?.sourceContentFromDiffLines,f=e.suggestion.join("\n");return 0!==e.suggestion.length&&f===u?{isValid:!1,reason:a.UNCHANGED_CODE}:{isValid:!0}}function s(e,t){let n={isValid:!1,reason:a.INVALID_RANGE},i={isValid:!1,reason:a.BATCH_TOO_BIG};return t.length>=50?i:t.find(t=>t.threadId===e.threadId)||function(e,t){for(let r of t)if(e.path===r.path){var n,i;return n=e.lineRange,i=r.lineRange,n.endLineNumber>=i.startLineNumber&&n.startLineNumber<=i.endLineNumber}return!1}(e,t)?n:{isValid:!0}}function d(e){if(!e||"LINE"!==e.subjectType||!e.subject)return;let t=e.subject.startDiffSide??e.subject.endDiffSide;if(!t)return;if(e.isOutdated&&e.subject.originalStartLine&&e.subject.originalEndLine)return{endLineNumber:e.subject.originalEndLine,endOrientation:e.subject.endDiffSide||"RIGHT",startLineNumber:e.subject.originalStartLine,startOrientation:t};if(!e.subject.endLine||!e.subject.endDiffSide)return;let n=e.subject.startLine??e?.subject.endLine;return{endLineNumber:e.subject.endLine,endOrientation:e.subject.endDiffSide,startLineNumber:n,startOrientation:t||"RIGHT"}}},35958:(e,t,n)=>{var i=n(65907);n(17650),i.Z,i.Z,i.Z,i.Z,i.Z,i.Z,i.Z,i.Z,i.Z,i.Z,i.Z,i.Z,i.Z,i.Z,i.Z},17650:(e,t,n)=>{var i;n.d(t,{A:()=>i}),function(e){e.Failure="FAILURE",e.Notice="NOTICE",e.Warning="WARNING"}(i||(i={}))},24862:(e,t,n)=>{n.d(t,{B:()=>i});function i(){document.querySelector('#__primerPortalRoot__ div[role="dialog"]')&&document.dispatchEvent(new KeyboardEvent("keydown",{key:"Escape",code:"Escape",ctrlKey:!0}))}},37874:(e,t,n)=>{function i(e,t){for(let n of function e(t,n=[]){if(""===t)return n;let i=t.match(r());if(!i)return n;let l=i.groups.fence;if(!l)return n;let a=l.includes("~")?"~":"`",o=t.match(function(e,t){let n=r([e],t);return RegExp(`${n.source}(?:\r?
)(?<suggestion>.*?)(?:\r?
)^ {0,3}${e}{${t},}[ 	]*$`,"ms")}(a,l.length));if(!o)return n;let s=0,d=i.groups.indent;""!==d&&(s=d.length);let c=o.groups.suggestion;if(s>0){let e=RegExp(`^ {0,${s}}`,"m");c=c.replace(e,"")}return n.push(c),e(t.slice(o.index+o[0].length),n)}(e))if(n===t)return{isValid:!1,errorMessage:"Suggested change cannot be the same as the original line"};return{isValid:!0,errorMessage:""}}function r(e=["`","~"],t){let n=t?`{${t}}`:"{3,}",i=e.map(e=>`${e}${n}`);return RegExp(`^(?<indent> {0,3})(?<fence>${i.join("|")})suggestion[ 	]*$`,"m")}n.d(t,{S:()=>i})},97274:(e,t,n)=>{n.d(t,{$1:()=>s,Aq:()=>o,L4:()=>i,YZ:()=>l,aF:()=>SymbolChangedEvent,cw:()=>r,d0:()=>a});let OpenCopilotChatEvent=class OpenCopilotChatEvent extends Event{constructor(e){super("open-copilot-chat",{bubbles:!1,cancelable:!0}),this.payload=e}};let AddCopilotChatReferenceEvent=class AddCopilotChatReferenceEvent extends Event{constructor(e,t=!1,n){super("add-copilot-chat-reference",{bubbles:!1,cancelable:!0}),this.reference=e,this.openPanel=t,this.id=n}};let SymbolChangedEvent=class SymbolChangedEvent extends Event{constructor(e){super("symbol-changed",{bubbles:!1,cancelable:!0}),this.context=e}};function i(e){window.dispatchEvent(new OpenCopilotChatEvent(e))}function r(e,t=!1,n){window.dispatchEvent(new AddCopilotChatReferenceEvent(e,t,n))}function l(e){return window.addEventListener("open-copilot-chat",e),()=>{window.removeEventListener("open-copilot-chat",e)}}function a(e){return window.addEventListener("add-copilot-chat-reference",e),()=>{window.removeEventListener("add-copilot-chat-reference",e)}}function o(e){return window.addEventListener("search-copilot-chat",e),()=>{window.removeEventListener("search-copilot-chat",e)}}function s(e){return window.addEventListener("symbol-changed",e),()=>{window.removeEventListener("symbol-changed",e)}}},42591:(e,t,n)=>{n.d(t,{A9:()=>r,af:()=>i,cR:()=>a,uF:()=>l});let i="tree-comparison",r={explain:"explain",conversation:"conversation",suggest:"suggest",askDocs:"ask-docs",discussFileDiff:"discuss-file-diff",explainFileDiff:"explain-file-diff",reviewPr:"review-pull-request"},l=["exception","filtered","contentTooLarge","rateLimit","agentUnauthorized","agentRequest","networkError","multipleAgentsAttempt"],a=["bing-search","codesearch","knowledge-base-search","pathsearch","show-symbol-definition","getissue","getprcommits","getcommit","getrelease","getrepo","getdiff","get-diff-by-range","getfile","getfilechanges","getdiscussion","get-actions-job-logs","getpullrequest","getalert"]},37433:(e,t,n)=>{n.r(t),n.d(t,{default:()=>r});let i=function(){var e=[{alias:null,args:null,kind:"ScalarField",name:"oid",storageKey:null},{alias:null,args:null,concreteType:"Repository",kind:"LinkedField",name:"repository",plural:!1,selections:[{alias:null,args:null,kind:"ScalarField",name:"databaseId",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"name",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"url",storageKey:null},{alias:null,args:null,concreteType:null,kind:"LinkedField",name:"owner",plural:!1,selections:[{alias:null,args:null,kind:"ScalarField",name:"login",storageKey:null}],storageKey:null}],storageKey:null}];return{argumentDefinitions:[],kind:"Fragment",metadata:null,name:"useFileDiffReference_Comparison",selections:[{alias:null,args:null,concreteType:"Commit",kind:"LinkedField",name:"oldCommit",plural:!1,selections:e,storageKey:null},{alias:null,args:null,concreteType:"Commit",kind:"LinkedField",name:"newCommit",plural:!1,selections:e,storageKey:null}],type:"PullRequestComparison",abstractKey:null}}();i.hash="fb70959c69497160ff44b9b0c7820e08";let r=i},49328:(e,t,n)=>{n.r(t),n.d(t,{default:()=>r});let i=function(){var e={alias:null,args:null,kind:"ScalarField",name:"path",storageKey:null},t=[e,{alias:null,args:null,kind:"ScalarField",name:"size",storageKey:null}];return{argumentDefinitions:[],kind:"Fragment",metadata:null,name:"useFileDiffReference_DiffEntry",selections:[{alias:null,args:null,kind:"ScalarField",name:"pathDigest",storageKey:null},e,{alias:null,args:null,kind:"ScalarField",name:"rawUrl",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"isBinary",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"isSubmodule",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"isLfsPointer",storageKey:null},{alias:null,args:null,concreteType:"TreeEntry",kind:"LinkedField",name:"oldTreeEntry",plural:!1,selections:t,storageKey:null},{alias:null,args:null,concreteType:"TreeEntry",kind:"LinkedField",name:"newTreeEntry",plural:!1,selections:t,storageKey:null}],type:"PullRequestDiffEntry",abstractKey:null}}();i.hash="f853615ae640634aad832da060f944cf";let r=i},73097:(e,t,n)=>{n.r(t),n.d(t,{default:()=>r});let i=function(){var e={defaultValue:null,kind:"LocalArgument",name:"endOid"},t={defaultValue:null,kind:"LocalArgument",name:"pullRequestId"},n={defaultValue:null,kind:"LocalArgument",name:"startOid"},i=[{kind:"Variable",name:"id",variableName:"pullRequestId"}],r=[{kind:"Variable",name:"endOid",variableName:"endOid"},{kind:"Variable",name:"startOid",variableName:"startOid"}],l={alias:null,args:null,kind:"ScalarField",name:"__typename",storageKey:null},a={alias:null,args:null,kind:"ScalarField",name:"id",storageKey:null},o=[{alias:null,args:null,kind:"ScalarField",name:"oid",storageKey:null},{alias:null,args:null,concreteType:"Repository",kind:"LinkedField",name:"repository",plural:!1,selections:[{alias:null,args:null,kind:"ScalarField",name:"databaseId",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"name",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"url",storageKey:null},{alias:null,args:null,concreteType:null,kind:"LinkedField",name:"owner",plural:!1,selections:[l,{alias:null,args:null,kind:"ScalarField",name:"login",storageKey:null},a],storageKey:null},a],storageKey:null},a];return{fragment:{argumentDefinitions:[e,t,n],kind:"Fragment",metadata:null,name:"DiffChatWrapper_ComparisonQuery",selections:[{alias:"pullRequest",args:i,concreteType:null,kind:"LinkedField",name:"node",plural:!1,selections:[{kind:"InlineFragment",selections:[{alias:null,args:r,concreteType:"PullRequestComparison",kind:"LinkedField",name:"comparison",plural:!1,selections:[{args:null,kind:"FragmentSpread",name:"useFileDiffReference_Comparison"}],storageKey:null}],type:"PullRequest",abstractKey:null}],storageKey:null}],type:"Query",abstractKey:null},kind:"Request",operation:{argumentDefinitions:[t,n,e],kind:"Operation",name:"DiffChatWrapper_ComparisonQuery",selections:[{alias:"pullRequest",args:i,concreteType:null,kind:"LinkedField",name:"node",plural:!1,selections:[l,{kind:"InlineFragment",selections:[{alias:null,args:r,concreteType:"PullRequestComparison",kind:"LinkedField",name:"comparison",plural:!1,selections:[{alias:null,args:null,concreteType:"Commit",kind:"LinkedField",name:"oldCommit",plural:!1,selections:o,storageKey:null},{alias:null,args:null,concreteType:"Commit",kind:"LinkedField",name:"newCommit",plural:!1,selections:o,storageKey:null}],storageKey:null}],type:"PullRequest",abstractKey:null},a],storageKey:null}]},params:{id:"fb6fd29b2f37f48929378e605adb454a",metadata:{},name:"DiffChatWrapper_ComparisonQuery",operationKind:"query",text:null}}}();i.hash="e34cdc5b305060e84f51c908a09989a0";let r=i},64889:(e,t,n)=>{n.r(t),n.d(t,{default:()=>r});let i=function(){var e=[{defaultValue:null,kind:"LocalArgument",name:"diffEntryId"}],t=[{kind:"Variable",name:"id",variableName:"diffEntryId"}],n={alias:null,args:null,kind:"ScalarField",name:"path",storageKey:null},i=[n,{alias:null,args:null,kind:"ScalarField",name:"size",storageKey:null}];return{fragment:{argumentDefinitions:e,kind:"Fragment",metadata:null,name:"DiffChatWrapper_DiffEntryQuery",selections:[{alias:"diffEntry",args:t,concreteType:null,kind:"LinkedField",name:"node",plural:!1,selections:[{kind:"InlineFragment",selections:[{args:null,kind:"FragmentSpread",name:"useFileDiffReference_DiffEntry"}],type:"PullRequestDiffEntry",abstractKey:null}],storageKey:null}],type:"Query",abstractKey:null},kind:"Request",operation:{argumentDefinitions:e,kind:"Operation",name:"DiffChatWrapper_DiffEntryQuery",selections:[{alias:"diffEntry",args:t,concreteType:null,kind:"LinkedField",name:"node",plural:!1,selections:[{alias:null,args:null,kind:"ScalarField",name:"__typename",storageKey:null},{kind:"InlineFragment",selections:[{alias:null,args:null,kind:"ScalarField",name:"pathDigest",storageKey:null},n,{alias:null,args:null,kind:"ScalarField",name:"rawUrl",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"isBinary",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"isSubmodule",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"isLfsPointer",storageKey:null},{alias:null,args:null,concreteType:"TreeEntry",kind:"LinkedField",name:"oldTreeEntry",plural:!1,selections:i,storageKey:null},{alias:null,args:null,concreteType:"TreeEntry",kind:"LinkedField",name:"newTreeEntry",plural:!1,selections:i,storageKey:null}],type:"PullRequestDiffEntry",abstractKey:null},{alias:null,args:null,kind:"ScalarField",name:"id",storageKey:null}],storageKey:null}]},params:{id:"7c9df64c41ef33594dd0882be84ef373",metadata:{},name:"DiffChatWrapper_DiffEntryQuery",operationKind:"query",text:null}}}();i.hash="064698bd6869b0c7d063a68d0b3666d8";let r=i},3331:(e,t,n)=>{n.r(t),n.d(t,{default:()=>r});let i=function(){var e={alias:null,args:null,kind:"ScalarField",name:"isCopilotDotcomChatEnabled",storageKey:null};return{fragment:{argumentDefinitions:[],kind:"Fragment",metadata:null,name:"DiffChatWrapper_ViewerQuery",selections:[{alias:null,args:null,concreteType:"User",kind:"LinkedField",name:"viewer",plural:!1,selections:[e],storageKey:null}],type:"Query",abstractKey:null},kind:"Request",operation:{argumentDefinitions:[],kind:"Operation",name:"DiffChatWrapper_ViewerQuery",selections:[{alias:null,args:null,concreteType:"User",kind:"LinkedField",name:"viewer",plural:!1,selections:[e,{alias:null,args:null,kind:"ScalarField",name:"id",storageKey:null}],storageKey:null}]},params:{id:"16bed8244ee96ad06b6638dbb86dd0ff",metadata:{},name:"DiffChatWrapper_ViewerQuery",operationKind:"query",text:null}}}();i.hash="4d1f99d4dad28f392f7ea1a3cecbcfff";let r=i},96320:(e,t,n)=>{n.d(t,{I6:()=>d,U9:()=>s});var i=n(67294),r=n(22578);let l=n(37433),a=n(49328),o=({oldCommit:e,newCommit:t},{oldTreeEntry:n,newTreeEntry:i,...r},l)=>{if(r.isBinary||r.isSubmodule||r.isLfsPointer||!i||(n?.size??0)>1048576||(i.size??0)>1048576)return;let a=n||!l?t.oid:l;return{type:"file-diff",id:`diff-${r.pathDigest}`,url:r.rawUrl??"",baseFile:n?{type:"file",repoID:e.repository.databaseId??0,repoName:e.repository.name,repoOwner:e.repository.owner.login,path:n.path??"",commitOID:e.oid,url:`${e.repository.url}/raw/${e.oid}/${n.path}`,ref:e.oid}:null,headFile:{type:"file",repoID:t.repository.databaseId??0,repoName:t.repository.name,repoOwner:t.repository.owner.login,path:i.path??"",commitOID:a,url:`${t.repository.url}/raw/${a}/${i.path}`,ref:a},head:null,base:null}},s=(e,t,n)=>{let s=(0,r.useFragment)(l,e),d=(0,r.useFragment)(a,t);return(0,i.useMemo)(()=>o(s,d,n),[s,d,n])},d=(e,t)=>{let n=(0,r.useFragment)(l,e);return(0,i.useMemo)(()=>o(n,t),[n,t])}},95637:(e,t,n)=>{n.d(t,{L:()=>p,X:()=>h});var i=n(85893),r=n(86010),l=n(85529),a=n(73290),o=n(98833),s=n(72278),d=n(51081),c=n(28901),u=n(22278),f=n(42483);function h({children:e,isAddition:t,sx:n}){return(0,i.jsx)(f.Z,{sx:{color:t?"success.fg":"danger.fg",ml:1,fontWeight:"bold",fontSize:0,...n},children:e})}try{h.displayName||(h.displayName="LinesChangedCounterLabel")}catch{}let m={"diff-file-header":"DiffFileHeader-module__diff-file-header--TjXyn",collapsed:"DiffFileHeader-module__collapsed--FPwYM","file-name":"DiffFileHeader-module__file-name--mY1O5"};function g({newPath:e,oldPath:t,status:n}){let r=e&&e.startsWith("."),a=t&&t.startsWith("."),o=r?(0,i.jsxs)(i.Fragment,{children:["\u200E",e]}):(0,i.jsx)(i.Fragment,{children:e}),s=a?(0,i.jsxs)(i.Fragment,{children:["\u200E",t]}):(0,i.jsx)(i.Fragment,{children:t});return"RENAMED"===n?(0,i.jsxs)("code",{children:[s," ",(0,i.jsx)(l.ArrowRightIcon,{})," ",o]}):"DELETED"===n||"REMOVED"===n?(0,i.jsx)("code",{children:s}):(0,i.jsx)("code",{children:o})}function p({additionalLeftSideContent:e,areLinesExpanded:t,canExpandOrCollapseLines:n,defaultToRichDiff:f,isCollapsed:p,canToggleRichDiff:x,linesAdded:y,linesDeleted:b,fileLinkHref:C,fileLinkRef:v,newMode:N,newPath:j,oldMode:k,oldPath:S,onCopyPath:L,onHeaderClick:w,onToggleDiffDisplay:D,onToggleExpandAllLines:E,onToggleFileCollapsed:R,patchStatus:I,path:T,rightSideContent:F}){return(0,i.jsxs)("div",{className:(0,r.Z)(m["diff-file-header"],p?m.collapsed:""),children:[(0,i.jsx)("button",{onClick:R,className:"Button Button--iconOnly Button--invisible flex-shrink-0","aria-label":p?`expand file: ${T}`:`collapse file: ${T}`,children:p?(0,i.jsx)(l.ChevronRightIcon,{}):(0,i.jsx)(l.ChevronDownIcon,{})}),e,(0,i.jsxs)("div",{className:"d-flex px-1 flex-items-center flex-1 overflow-hidden",children:[(0,i.jsx)("h3",{className:(0,r.Z)(m["file-name"]),children:(0,i.jsx)(a.Z,{className:"Link--primary",href:C,onClick:w,ref:v,children:(0,i.jsx)(g,{newPath:j,oldPath:S,status:I})})}),(0,i.jsx)(u.m,{className:"ml-1 flex-shrink-0",textToCopy:j??S??"",ariaLabel:"Copy file name to clipboard",tooltipProps:{direction:"s",anchorSide:"outside-bottom"},onCopy:L,avoidStyledComponent:!0,hasPortalTooltip:!0}),(0,c.DC)(I,k,N)&&(0,i.jsxs)("div",{className:"p-2",children:[(0,i.jsx)("code",{children:k}),(0,i.jsx)(o.Z,{icon:l.ArrowRightIcon,sx:{mx:1}}),(0,i.jsx)("code",{children:N})]}),n&&E&&(0,i.jsx)(d.u,{text:t?`collapse non diff lines: ${T}`:`expand all lines: ${T}`,direction:"s",children:(0,i.jsx)("button",{onClick:E,className:`Button Button--iconOnly Button--invisible flex-shrink-0 ${t?"":"js-expand-all-difflines-button"}`,"aria-label":t?`collapse non diff lines: ${T}`:`expand all lines: ${T}`,"data-file-path":T,children:p?(0,i.jsx)(l.FoldIcon,{}):(0,i.jsx)(l.UnfoldIcon,{})})})]}),(0,i.jsxs)("div",{className:"d-flex mr-2 flex-justify-end flex-1",children:[y>0&&(0,i.jsxs)(h,{isAddition:!0,children:["+",y]}),b>0&&(0,i.jsxs)(h,{isAddition:!1,children:["-",b]})]}),x&&(0,i.jsxs)(s.s,{"aria-label":"File view",size:"small",sx:{mx:2},onChange:D?e=>D(1===e):void 0,children:[(0,i.jsx)(s.s.IconButton,{"aria-label":"Display the source diff",defaultSelected:!f,icon:l.CodeIcon}),(0,i.jsx)(s.s.IconButton,{"aria-label":"Display the rich diff",defaultSelected:f,icon:l.FileIcon})]}),F]})}try{g.displayName||(g.displayName="FileName")}catch{}try{p.displayName||(p.displayName="DiffFileHeader")}catch{}},28901:(e,t,n)=>{function i(e){return void 0!==e.linesChanged&&0!==e.linesChanged}function r(e,t,n){return"MODIFIED"===e&&t!==n}function l(e){return"COPIED"===e.status&&!i(e)}function a(e){return"RENAMED"===e.status&&!i(e)}function o(e){return!!e.oldTreeEntry&&null===e.newTreeEntry}function s(e){return!!e.truncatedReason}n.d(t,{DC:()=>r,PW:()=>a,V_:()=>s,_R:()=>h,eb:()=>o,l3:()=>f,vY:()=>l,zR:()=>u});let d=["maximum diff size exceeded.","maximum number of lines exceeded."],c=/^maximum file count exceeded/;function u(e){let t=e;return d.includes(e)?t="Sorry, we could not display the changes to this file because there were too many other changes to display.":c.test(e)&&(t="Sorry, we could not display the changes to this file because there were too many other files to display."),t}function f(e){return!!e.newTreeEntry?.isGenerated}function h(e){return 0===e.linesChanged}},55569:(e,t,n)=>{n.d(t,{rm:()=>w,mQ:()=>v,B_:()=>b});var i=n(85893),r=n(85529),l=n(67294),a=n(47682),o=n(22336),s=n(17916);function d(e,t,n){if(!t.has(e))throw TypeError("attempted to "+n+" private field on non-instance");return t.get(e)}function c(e,t){var n=d(e,t,"get");return n.get?n.get.call(e):n.value}function u(e,t,n){!function(e,t){if(t.has(e))throw TypeError("Cannot initialize the same private elements twice on an object")}(e,t),t.set(e,n)}function f(e,t,n){var i=d(e,t,"set");return!function(e,t,n){if(t.set)t.set.call(e,n);else{if(!t.writable)throw TypeError("attempted to set read only private field");t.value=n}}(e,i,n),n}function h(e,t){return e.name.localeCompare(t.name)}function m(e,t){return e.fileName.localeCompare(t.fileName)}function g(e){return e.diff}var p=new WeakMap;let FileNode=class FileNode{constructor(e){u(this,p,{writable:!0,value:void 0}),this.diff=e,this.filePath=this.diff.path,f(this,p,this.filePath.split("/")),this.fileName=c(this,p)[c(this,p).length-1],this.directoryParts=c(this,p).slice(0,c(this,p).length-1)}};var x=new WeakMap;let DirectoryNode=class DirectoryNode{getOrCreateDirectory(e){let t=c(this,x).get(e);if(!t){let n=this.path?`${this.path}/`:"";t=new DirectoryNode(e,`${n}${e}`),this.directories.push(t),c(this,x).set(e,t)}return t}sort(){for(let e of(this.directories.sort(h),this.files.sort(m),this.directories))e.sort()}getOrderedDiffs(){let e=this.files.map(g);for(let t of this.directories)e.push(...t.getOrderedDiffs());return e}constructor(e,t){u(this,x,{writable:!0,value:void 0}),this.name=e,this.path=t,this.directories=[],this.files=[],f(this,x,new Map)}};function y(e){let t=new DirectoryNode("","");for(let n of e.map(e=>new FileNode(e))){let e=t;for(let t of n.directoryParts)e=e.getOrCreateDirectory(t);e.files.push(n)}return t.sort(),t}function b(e){return y(e.filter(e=>!!e)).getOrderedDiffs()}var C=n(98833);function v({status:e}){switch(e){case"ADDED":case"COPIED":return(0,i.jsx)(C.Z,{size:16,icon:r.FileAddedIcon,className:"fgColor-success"});case"DELETED":case"REMOVED":return(0,i.jsx)(C.Z,{size:16,icon:r.FileRemovedIcon,className:"fgColor-danger"});case"RENAMED":return(0,i.jsx)(C.Z,{size:16,icon:r.FileMovedIcon,className:"fgColor-attention"});default:return(0,i.jsx)(C.Z,{size:16,icon:r.FileIcon,className:"fgColor-muted"})}}try{v.displayName||(v.displayName="FileStatusIcon")}catch{}var N=n(10491),j=n(73942),k=n(84669);let S=(0,l.memo)(function({file:e,depth:t,hash:n,onSelect:s}){let d=l.useRef(null),c=(0,N.a)({focusRowRef:d,mouseRowRef:d}),u=(e.diff.totalCommentsCount??0)+(e.diff.totalAnnotationsCount??0),f=(0,l.useCallback)(()=>{d.current?.tabIndex===0&&d.current?.focus()},[d]);return(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)(j.xN,{commands:{"pull-requests-diff-file-tree:focus-file-tree":f}}),(0,i.jsxs)(a.L.Item,{defaultExpanded:!0,"aria-level":t,current:e.diff.pathDigest===n,id:e.diff.path,onSelect:()=>s?.(e.diff),ref:d,children:[(0,i.jsx)(a.L.LeadingVisual,{children:(0,i.jsx)(v,{status:e.diff.changeType})}),e.fileName,c&&(0,i.jsx)(o.u,{"data-testid":`${e.fileName}-item-tooltip`,id:`${e.fileName}-item-tooltip`,contentRef:d,"aria-label":e.fileName,open:!0,direction:"ne"}),!!u&&(0,i.jsxs)("span",{className:"sr-only",children:["has ",u<10?u:"9+"," ",u>1?"comments":"comment"]}),!!u&&(0,i.jsx)(a.L.TrailingVisual,{children:(0,i.jsxs)("div",{className:"d-flex flex-items-center flex-row",children:[(0,i.jsx)(r.CommentIcon,{}),(0,i.jsx)("div",{className:"ml-1 text-bold fgColor-default f6",children:u<10?u:"9+"})]})})]})]})});function L({directory:e,depth:t=0,leadingPath:n="",...r}){let d=n?`${n}/`:"",[c,u]=l.useState(""),f=l.useRef(null),h=(0,l.useCallback)(()=>{u(((0,s.LA)(k.ssrSafeLocation.hash??"")??"").replace("diff-",""))},[u]);(0,l.useEffect)(()=>(window.addEventListener("hashchange",h),()=>{window.removeEventListener("hashchange",h)}),[h]);let m=l.useRef(null),g=(0,N.a)({focusRowRef:m,mouseRowRef:f}),p=(0,l.useCallback)(()=>{m.current?.tabIndex===0&&m.current?.focus()},[m]);if(!e.files.length&&1===e.directories.length)return(0,i.jsx)(i.Fragment,{children:e.directories.map(n=>(0,i.jsx)(L,{depth:0===t?1:t,directory:n,leadingPath:`${d}${e.name}`,...r},n.path))});function x(){return(0,i.jsxs)(i.Fragment,{children:[e.files.map(e=>(0,i.jsx)(S,{depth:t+1,file:e,hash:c,...r},e.filePath)),e.directories.map(e=>(0,i.jsx)(L,{depth:t+1,directory:e,...r},e.path))]})}return 0===t?x():(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)(j.xN,{commands:{"pull-requests-diff-file-tree:focus-file-tree":p}}),(0,i.jsxs)(a.L.Item,{ref:m,defaultExpanded:!0,id:e.path,children:[(0,i.jsx)(a.L.LeadingVisual,{children:(0,i.jsx)(a.L.DirectoryIcon,{})}),(0,i.jsx)("span",{ref:f,children:`${d}${e.name}`}),g&&(0,i.jsx)(o.u,{"data-testid":`${e.name}-directory-item-tooltip`,id:`${e.name}-directory-item-tooltip`,contentRef:m,"aria-label":`${d}${e.name}`,open:!0,direction:"ne"}),(0,i.jsx)(a.L.SubTree,{children:x()})]},e.path)]})}let w=(0,l.memo)(function({diffs:e,...t}){let n=y(e);return(0,i.jsx)(a.L,{"aria-label":"File Tree",children:(0,i.jsx)(L,{directory:n,...t})})});try{S.displayName||(S.displayName="File")}catch{}try{L.displayName||(L.displayName="Directory")}catch{}try{w.displayName||(w.displayName="DiffFileTree")}catch{}},74507:(e,t,n)=>{n.d(t,{l:()=>r,w:()=>l});var i=n(26935);let r={ArrowLeft:i.Qw.ArrowHorizontal,ArrowDown:i.Qw.ArrowVertical,ArrowUp:i.Qw.ArrowVertical,ArrowRight:i.Qw.ArrowHorizontal,h:i.Qw.HL,j:i.Qw.JK,k:i.Qw.JK,l:i.Qw.HL,a:i.Qw.AD,s:i.Qw.WS,w:i.Qw.WS,d:i.Qw.AD,Tab:i.Qw.Tab,Home:i.Qw.HomeAndEnd,End:i.Qw.HomeAndEnd,PageUp:i.Qw.PageUpDown,PageDown:i.Qw.PageUpDown,Backspace:i.Qw.Backspace},l=i.Qw.ArrowAll|i.Qw.PageUpDown|i.Qw.HomeAndEnd|i.Qw.AD},41291:(e,t,n)=>{n.d(t,{HB:()=>r.H,lQ:()=>i.l,wT:()=>i.w});var i=n(74507),r=n(69358)},69358:(e,t,n)=>{n.d(t,{H:()=>i});let i={ghostUser:{displayName:"Ghost",login:"ghost",avatarUrl:"https://avatars.githubusercontent.com/ghost",path:"/ghost",url:"/ghost"}}},78143:(e,t,n)=>{n.d(t,{Es:()=>s.Es,Q6:()=>i.Q,Vb:()=>d.V,X3:()=>o.X,_$:()=>o._,jR:()=>a.j,qV:()=>s.qV,sy:()=>l.s,z8:()=>r.z});var i=n(55381),r=n(17717);n(78591);var l=n(65529),a=n(25452),o=n(74872),s=n(17916),d=n(60232);n(34479)},61402:(e,t,n)=>{n.d(t,{H:()=>i});function i(e,t){return e?.threads?.flatMap(e=>{let n=e?.id,i=e?.commentsData?.comments?.[0]?.author??t,r=e?.commentsData.totalCount??0,l=e?.commentsData?.__id;return n&&i?[{id:n,author:i,commentCount:r,commentsConnectionId:l,diffSide:e.diffSide,isOutdated:e.isOutdated,line:e.line,startLine:e.startLine,startDiffSide:e.startDiffSide}]:[]})??[]}},57144:(e,t,n)=>{n.d(t,{Z:()=>l});var i=n(9770),r=n(12316);function l({selectedDiffRowRange:e,leftLines:t,rightLines:n}){let l=!!n,{startOrientation:a,endOrientation:o}=e;if(e.startLineNumber===e.endLineNumber&&e.startOrientation===e.endOrientation)return{isRowSelected:()=>!1,selectedRightLines:[],selectedLeftLines:[]};let s=f(a).findIndex(t=>(0,r.nI)(t,e.startLineNumber,e.startOrientation)),d=f(o).findIndex(t=>(0,r.nI)(t,e.endLineNumber,e.endOrientation)),c=s>=0&&d>=0;function u(e){if(!c||(0,r.Ok)(e))return!1;let t=f((0,i.Jn)(e.type)).indexOf(e);return t>=s&&t<=d}function f(e){return l&&"left"!==("string"==typeof e?e:(0,i.Jn)(e.type))?n:t}let h=f("left").filter(e=>u(e)),m=f("right").filter(e=>u(e));return{isRowSelected:u,selectedRightLines:m,selectedLeftLines:h}}},17916:(e,t,n)=>{function i(e,t){return`${"left"===t?"L":"R"}${e}`}function r(e){let t=e.match(/^#?(diff-[a-f0-9]+)/);return t?.[1]}function l(e){let t=e.match(/^#?(r\d+)/),n=t?.[1];return n?parseInt(n.slice(1)):void 0}function a(e){let t=e.match(/^#annotation_(\d+)/),n=t?.[1];return n?parseInt(n):void 0}function o(e){let t=function(e){let t=e.match(/^#?(diff-[a-f0-9]+)(L|R)(\d+)(?:-(L|R)(\d+))?$/i);if(null!=t&&6===t.length)return t;let n=e.match(/^#?(discussion-diff-[0-9]+)(L|R)(\d+)(?:-(L|R)(\d+))?$/i);return null!=n&&6===n.length?n:null}(e);if(t){let e=t[1],n=t[2]?"L"===t[2]?"left":"right":void 0,i=t[3]?parseInt(t[3]):void 0;if(!e||!n||void 0===i)return;return{diffAnchor:e,startOrientation:n,startLineNumber:i,endOrientation:(t[4]?"L"===t[4]?"left":"right":void 0)??n,endLineNumber:(t[5]?parseInt(t[5]):void 0)??i,firstSelectedLineNumber:i,firstSelectedOrientation:n}}}function s(e){c(d(e))}function d(e){let t=i(e.startLineNumber,e.startOrientation),n=`${e.diffAnchor}${t}`;if(e.endLineNumber!==e.startLineNumber||e.endOrientation!==e.startOrientation){let t=i(e.endLineNumber,e.endOrientation);n+=`-${t}`}return n}function c(e){let t=`#${e}`;if(t===window.location.hash)return;let n=window.location.href;history.replaceState({...history.state},"",t),window.dispatchEvent(new HashChangeEvent("hashchange",{newURL:window.location.href,oldURL:n}))}n.d(t,{Es:()=>l,LA:()=>r,Lh:()=>d,Ze:()=>c,fI:()=>s,qV:()=>a,rn:()=>o})},34479:(e,t,n)=>{var i;function r({data:e}){let{query:t,diffEntryInfo:n,currentDiffEntryData:i}=e;return{matchingDiffs:i?function(e,t,n){if(0===n.size)return new Map;let i=n.size>=200,r={},l=e.reduce((n,i,l)=>{if(r[l])return n;r[l]=!0;let o=a(t,[e[l]]),s=o.next();for(;!s.done&&n.size<200;){let{resultsWithinDiff:t}=s.value;n.set(e[l]?.pathDigest??"",t),s=o.next()}return n},new Map);if(l.size<200&&i){let n=a(t,e,l.size),i=n.next();for(;!i.done&&l.size<200;){let{resultsWithinDiff:t,diff:r}=i.value;l.set(e[r]?.pathDigest??"",t),i=n.next()}}return l}(n,l(t),i):function(e,t){let n=new Map,i=a(t,e),r=i.next();for(;!r.done&&n.size<200;){let{resultsWithinDiff:t,diff:l}=r.value;n.set(e[l]?.pathDigest??"",t),r=i.next()}return n}(n,l(t)),query:t}}function l(e){return{kind:0,regexp:RegExp(e.replace(/[.*+?^${}()|[\]\\]/g,"\\$&"),"gi")}}function*a(e,t,n=0){for(let i=n;i<t.length;i++){let n=t[i],r=[],l=0;for(let a=0;a<n.diffLines.length;a++){let o,s;o=t[i]?.diffLines[a]?.type==="HUNK"?n.diffLines[a]?.text:n.diffLines[a]?.text?.substring(1);let d=n.diffLines[a];for(;o&&null!==(s=e.regexp.exec(o));){let e=s[0],t=s.index;r.push({pathDigest:n.pathDigest,indexWithinPathDigest:l,matchContent:e,column:t,diffLineNumIndex:a,isHunk:(d?.type==="HUNK")??!1,hunkLineNumber:d?.blobLineNumber??-1,leftLineNumber:d?.type!=="ADDITION"?d?.left??-1:-1,rightLineNumber:d?.type!=="DELETION"?d?.right??-1:-1,columnEnd:t+e.length,text:o}),l++}}0!==r.length&&(yield{diff:i,resultsWithinDiff:r})}}n.d(t,{Pj:()=>r}),function(e){e[e.Text=0]="Text",e[e.Symbol=1]="Symbol"}(i||(i={}))},45817:(e,t,n)=>{n.d(t,{X:()=>GridNavigator});var i=n(12316);let GridNavigator=class GridNavigator{moveToNextItem(e,t){let n;let i=this.cellIdToGridLocation.get(this.focusedGridCell?.cellId??"");if(!i)return;let[r]=i,[,l]=i;switch(("ArrowDown"===e||"ArrowUp"===e)&&this.isHunkRow(r)&&this.savedColumnIndex&&(l=this.savedColumnIndex,this.savedColumnIndex=void 0),!0){case t&&"Home"===e:this.focusFirstGridCell();break;case t&&"End"===e:{let e=this.grid.length-1,t=this.grid[e]?.length;t&&(n=this.grid[e]?.[t-1]);break}case"ArrowUp"===e:this.isHunkRow(r-1)?(this.saveColumnIndex(l),n=this.grid[r-1]?.[0]):n=this.grid[r-1]?.[l];break;case"ArrowDown"===e:this.isHunkRow(r+1)?(this.saveColumnIndex(l),n=this.grid[r+1]?.[0]):n=this.grid[r+1]?.[l];break;case"ArrowLeft"===e:n=this.grid[r]?.[l-1];break;case"ArrowRight"===e:n=this.grid[r]?.[l+1];break;case"PageUp"===e:{this.saveColumnIndex(l);let e=this.getPreviousHunkRowIndex(r);n=this.grid[e]?.[0];break}case"PageDown"===e:{this.saveColumnIndex(l);let e=this.getNextHunkRowIndex(r),t=0;e||(e=this.grid.length-1,t=l),n=this.grid[e]?.[t];break}case"Home"===e:n=this.grid[r]?.[0];break;case"End"===e:{let e=this.grid[r];if(e&&!this.isHunkRow(r)){let t=e.length-1;n=this.grid[r]?.[t]}}}return n&&(this.focusedGridCell=n),this.focusedGridCell}reinitializeGrid(e,t){this.initializeGrid(e,t)}focusFirstGridCell(e){e&&this.cellIdToGridLocation.get(e)?this.focusGridCell(e):this.focusedGridCell=this.grid[0]?.[0]}focusGridCell(e){if(this.focusedGridCell?.cellId===e)return;let t=this.cellIdToGridLocation.get(e);if(!t)return;let[n,i]=t;this.focusedGridCell=this.grid[n]?.[i]}getNextSelectableCell(e){let t;let n=this.lastSelectedGridCell||this.focusedGridCell,i=this.cellIdToGridLocation.get(n?.cellId??"");if(!i)return;let[r,l]=i;if(("ArrowUp"!==e||!(r<=1))&&("ArrowDown"!==e||r!==this.grid.length-1)){if("ArrowUp"===e){let e=r-1;for(;!t;)t=this.getNextSelectableCellFromRow({rowIndex:e,columnIndex:l}),e--}if("ArrowDown"===e){let e=r+1;for(;!t;)t=this.getNextSelectableCellFromRow({rowIndex:e,columnIndex:l}),e++}return t&&(this.lastSelectedGridCell=t),t}}getValidSelectableRowCell(){if(this.focusedGridCell?.isHunk)return;if(!this.focusedGridCell?.isEmpty)return this.focusedGridCell;let e=this.cellIdToGridLocation.get(this.focusedGridCell.cellId)?.[0];if(e)return this.focusedGridCell.columnIndex<2?this.grid[e]?.[this.focusedGridCell.columnIndex+2]:this.grid[e]?.[this.focusedGridCell.columnIndex-2]}clearLastSelectedCell(){this.lastSelectedGridCell=void 0}getFirstCodeCell(){let e=this.grid.find(e=>e[0]&&!e[0].isHunk);return e?.find(e=>!e.isEmpty)}getLastCodeCell(){let e=this.grid.slice().reverse().find(e=>e[0]&&!e[0].isHunk);return e?.slice().reverse().find(e=>!e.isEmpty)}hasLine(e,t,n){let r=(0,i.Re)(this.fileAnchor,e,t),l=(0,i.nb)(r,0),a=this.cellIdToGridLocation.get(l);if(!a)return!1;let[o]=a;return!!n===this.isHunkRow(o)}getNextSelectableCellFromRow({rowIndex:e,columnIndex:t}){let n=this.grid[e],i=n?.[t];switch(!0){case i?.isHunk:return;case i?.orientation==="left"&&i.isEmpty:return n?.[t+2];case i?.orientation==="right"&&i.isEmpty:return n?.[t-2];default:return n?.[t]}}getNextHunkRowIndex(e){return Array.from(this.hunkRowIndexes).sort((e,t)=>e-t).find(t=>t>e)}getPreviousHunkRowIndex(e){return Array.from(this.hunkRowIndexes).sort((e,t)=>e-t).reverse().find(t=>t<e)??0}initializeGrid(e,t){this.grid=[],this.cellIdToGridLocation=new Map,this.hunkRowIndexes=new Set;for(let n=0;n<e.length;n++){let r=[],l=e[n];if(void 0!==l){if(this.isSplitDiff){let e=(t||[])[n],a=(0,i.Re)(this.fileAnchor,l,e);(0,i.Ok)(l)||"HUNK"!==l.type?this.initializeSplitDiffCodeRow({leftLine:l,rightLine:e,row:r,rowIdentifier:a,rowIndex:n}):this.initializeHunkRow(r,a,n)}else{let e=(0,i.Re)(this.fileAnchor,l,l);(0,i.Ok)(l)||"HUNK"!==l.type?this.initializeUnifiedDiffCodeRow({diffLine:l,row:r,rowIdentifier:e,rowIndex:n}):this.initializeHunkRow(r,e,n)}this.grid.push(r)}}}initializeContentCell({cellIndex:e,diffLine:t,orientation:n,row:r,rowIdentifier:l,rowIndex:a}){let o;let s=(0,i.nb)(l,e);(0,i.Ok)(t)||"left"!==n||(o=t?.left),(0,i.Ok)(t)||"right"!==n||(o=t?.right),r.push({lineNumber:o,orientation:n,isHunk:!1,isEmpty:(0,i.Ok)(t),cellId:(0,i.nb)(l,e),columnIndex:e}),this.cellIdToGridLocation.set(s,[a,e])}initializeHunkRow(e,t,n){let r=(0,i.nb)(t,0);e.push({isHunk:!0,isEmpty:!1,cellId:r,columnIndex:0}),this.cellIdToGridLocation.set(r,[n,0]),this.hunkRowIndexes.add(n)}isHunkRow(e){return this.hunkRowIndexes.has(e)}initializeSplitDiffCodeRow({leftLine:e,rightLine:t,row:n,rowIdentifier:i,rowIndex:r}){this.initializeContentCell({cellIndex:0,diffLine:e,orientation:"left",row:n,rowIdentifier:i,rowIndex:r}),this.initializeContentCell({cellIndex:1,diffLine:e,orientation:"left",row:n,rowIdentifier:i,rowIndex:r}),this.initializeContentCell({cellIndex:2,diffLine:t,orientation:"right",row:n,rowIdentifier:i,rowIndex:r}),this.initializeContentCell({cellIndex:3,diffLine:t,orientation:"right",row:n,rowIdentifier:i,rowIndex:r})}initializeUnifiedDiffCodeRow({diffLine:e,row:t,rowIdentifier:n,rowIndex:r}){let l=(0,i.Ok)(e)||"DELETION"!==e.type?"right":"left";this.initializeContentCell({cellIndex:0,diffLine:e,orientation:"left",row:t,rowIdentifier:n,rowIndex:r}),this.initializeContentCell({cellIndex:1,diffLine:e,orientation:"right",row:t,rowIdentifier:n,rowIndex:r}),this.initializeContentCell({cellIndex:2,diffLine:e,orientation:l,row:t,rowIdentifier:n,rowIndex:r})}saveColumnIndex(e){this.isHunkRow(e)||(this.savedColumnIndex=e)}constructor(e,t,n,i,r){this.fileAnchor=e,this.isSplitDiff=t,this.grid=[],this.cellIdToGridLocation=new Map,this.hunkRowIndexes=new Set,this.initializeGrid(n,i),this.focusFirstGridCell(r)}}},27490:(e,t,n)=>{n.d(t,{mi:()=>o,sI:()=>a,u1:()=>r});var i=n(12316);let r={finalLineId:"final-hunk-header-line"};function l(e,t){return e.startBlobLineNumber-t.startBlobLineNumber}function a(e,t){if("HUNK"===e.type&&e.__id===r.finalLineId)return{currentHunk:t[t.length-1],previousHunk:t[t.length-2]};let n=t.sort(l).findIndex(t=>t.startBlobLineNumber<=e.blobLineNumber&&t.endBlobLineNumber>=e.blobLineNumber);return{currentHunk:t[n],nextHunk:t[n+1],previousHunk:t[n-1]}}function o(e){let t=[],n=0;for(let l=1;l<e.length;l++){let a=e[l],o=l===e.length-1;if(a&&!(0,i.Ok)(a)){if("HUNK"===a.type){let o;let s=e[n];if(!s||(0,i.Ok)(s))continue;let d=l-1;for(;(!o||(0,i.Ok)(o))&&(o=e[d],-1!=--d););o&&!(0,i.Ok)(o)&&t.push({startBlobLineNumber:s.blobLineNumber,endBlobLineNumber:o.blobLineNumber}),a.__id===r.finalLineId&&t.push({startBlobLineNumber:a.blobLineNumber,endBlobLineNumber:a.blobLineNumber+20}),n=l;continue}if(o){let r=e[n];r&&!(0,i.Ok)(r)&&t.push({startBlobLineNumber:r.blobLineNumber,endBlobLineNumber:a.blobLineNumber})}}}return t}},12316:(e,t,n)=>{n.d(t,{$D:()=>j,EH:()=>v,Ek:()=>g,FE:()=>b,FY:()=>h,K8:()=>x,Ok:()=>u,R8:()=>f,Re:()=>d,Tb:()=>m,VB:()=>s,_k:()=>y,aS:()=>k,dW:()=>p,nI:()=>o,nb:()=>c,uJ:()=>C});var i=n(9770),r=n(9749),l=n(33220),a=n(17916);function o(e,t,n){return"left"===n?!u(e)&&e.left===t:!u(e)&&(0,i.Jn)(e.type)===n&&e.right===t}function s(e,t){if(!e)return;if(!t)return e;let n=!1,i=!1,r=!1;for(let l of t)if(l&&(i||(i=o(l,e.startLineNumber,e.startOrientation)),r||(r=o(l,e.endLineNumber,e.endOrientation)),(n=r&&!i)||i&&r))break;return n?{...e,startLineNumber:e.endLineNumber,startOrientation:e.endOrientation,endLineNumber:e.startLineNumber,endOrientation:e.startOrientation,firstSelectedLineNumber:e.endLineNumber}:e}function d(e,t,n){let i=`-${u(t)||"number"!=typeof t.left?"empty":t.left}`,r=n?`-${u(n)||"number"!=typeof n.right?"empty":n.right}`:"";return`${e}${i}${r}`}function c(e,t){return`${e}-${t}`}function u(e){return!!e&&e===l.s}function f(e){return!!e&&e!==l.s}function h(e){return"CONTEXT"===e.type}function m(e,t){let n;switch(t){case"ADDITION":n="+";break;case"DELETION":n="-";break;case"CONTEXT":case"INJECTED_CONTEXT":n=" "}if(!n||!e.startsWith(n))return[e,void 0];let i=e[0];return[e.substring(1),i]}function g(e){let t=[],n=[],i=()=>{for(;t.length<n.length;)t.push(l.s);for(;n.length<t.length;)n.push(l.s)};for(let r of e)switch(r.type){case"ADDITION":n.push(r);break;case"DELETION":t.push(r);break;case"CONTEXT":case"INJECTED_CONTEXT":case"HUNK":i(),t.push(r),n.push(r)}return i(),{leftLines:t,rightLines:n}}function p(e){return new DOMParser().parseFromString(e,"text/html").documentElement.textContent||""}function x({line:e,range:t,fileAnchor:n}){let i;let{origin:r,pathname:l}=window.location;if(t?i=(0,a.Lh)(t):e&&(i=function(e,t){let n=["HUNK","CONTEXT","INJECTED_CONTEXT","DELETION"].includes(e.type),i=n?e.left:e.right,r=n?"left":"right";if(null!==i)return(0,a.Lh)({diffAnchor:t,endLineNumber:i,endOrientation:r,startLineNumber:i,startOrientation:r,firstSelectedLineNumber:i,firstSelectedOrientation:r})}(e,n)),i)return`${r}${l}#${i}`}function y({includeControlKey:e=!0,includeShiftKey:t,includeOptionKey:n,key:i}){let l=e?`${(0,r.eE)()?"\u2318":"Ctrl + "}`:"";return n&&(l+=`${(0,r.eE)()?"\u2325":"Alt + "}`),t&&(l+=`${(0,r.eE)()?"\u21E7":"Shift + "}`),l+=i}function b({hasThreads:e}){return e?"96px":"30px"}function C({shouldAlignRight:e}){return e?"11px":"40px"}function v({includeControlKey:e=!0,includeShiftKey:t,includeOptionKey:n,key:i}){let l="";return e&&(l+=(0,r.eE)()?"Command+":"Control+"),n&&(l+=(0,r.eE)()?"Option+":"Alt+"),t&&(l+="Shift+"),l+=i}let N=["ADDITION","DELETION","CONTEXT"],j=(e,t)=>{if(!e)return!1;let n=t.leftLines.concat(t.rightLines);return n.length>0&&n.includes(e)?n.every(e=>!u(e)&&N.includes(e.type)):!u(e)&&N.includes(e.type)},k=e=>e?e.filter(e=>!u(e)).map(e=>{let[t]=m(p(e.html),e.type);return t}).join("\n"):""},82012:(e,t,n)=>{n.d(t,{D:()=>i});function i(e){return null!=e}},1685:(e,t,n)=>{n.d(t,{H:()=>i});function i(e){let t=document.getElementById("__primerPortalRoot__");return!!t&&!!e&&t.contains(e)}},88486:(e,t,n)=>{n.d(t,{t:()=>d});var i=n(67294),r=n(77666),l=n(25452),a=n(21469),o=n(85918),s=n(88344);function d({cellId:e,actionBarRef:t}){let{replaceSelectedDiffRowRange:n}=(0,l.h)(),{fileAnchor:d}=(0,a.b)(),[c,u]=(0,i.useState)(t),{annotations:f,openDialog:h,closeDialog:m,selectedAnnotationId:g,selectAnnotationId:p,selectedThreadId:x,selectThreadId:y,openContextMenuCell:b,openNewConversationCell:C,openMarkerDetailsCell:v,openMarkersListCell:N,updateVisibleThreads:j,threads:k,threadConnectionId:S,anyMenuOpen:L}=(0,r.N)(),{sendAnalyticsEvent:w}=(0,s.z)(),D=(0,i.useMemo)(()=>C?.cellId===e,[e,C]),E=(0,i.useMemo)(()=>C?.withSuggestedChange,[C]),R=(0,i.useCallback)(t=>{h("new-conversation",e,t)},[e,h]),I=(0,i.useCallback)(()=>{R()},[R]),T=(0,i.useCallback)(()=>{u(t),R(),w("diff.start_new_conversation","PLUS_ICON")},[t,R,w]),F=(0,i.useCallback)(()=>{R({withSuggestedChange:!0}),w("diff.start_new_conversation_with_suggested_change","CELL_CONTEXT_MENU")},[R,w]),A=(0,i.useCallback)(()=>{u(t),R({withSuggestedChange:!0}),w("diff.start_new_conversation_with_suggested_change","ACTION_BAR_CONTEXT_MENU")},[t,R,w]),O=(0,i.useCallback)(()=>{m("new-conversation")},[m]),M=(0,i.useMemo)(()=>b===e,[e,b]),_=(0,i.useCallback)(()=>{h("context-menu",e)},[e,h]),H=(0,i.useCallback)(()=>{u(t),_()},[t,_]),Z=(0,i.useCallback)(()=>{m("context-menu")},[m]),B=(0,i.useCallback)(()=>{M?Z():_()},[Z,M,_]),P=(0,i.useCallback)(()=>{u(t),B()},[t,B]),U=(0,i.useMemo)(()=>v===e?x:void 0,[e,v,x]),$=(0,i.useMemo)(()=>v===e?g:void 0,[e,v,g]),W=(0,i.useCallback)(()=>{h("marker-details",e)},[e,h]),V=(0,i.useCallback)(()=>{m("marker-details")},[m]),q=(0,o.R)((e,t={skipLineSelection:!1})=>{if(y(e),W(),t.skipLineSelection)return;let i=k.find(t=>t.id===e);if(i&&i.diffSide&&i.line){let e=i.startLine??i.line,t=i.startDiffSide??i.diffSide;n({diffAnchor:d,endLineNumber:i.line,endOrientation:"LEFT"===i.diffSide?"left":"right",startLineNumber:e,startOrientation:"LEFT"===t?"left":"right",firstSelectedLineNumber:e,firstSelectedOrientation:"LEFT"===t?"left":"right"})}}),G=(0,o.R)((e,t={skipLineSelection:!1})=>{if(p(e),W(),t.skipLineSelection)return;let i=f.find(t=>t.id===e);i&&n({diffAnchor:d,endLineNumber:i.location.end.line,endOrientation:"right",startLineNumber:i.location.start.line,startOrientation:"right",firstSelectedLineNumber:i.location.start.line,firstSelectedOrientation:"right"})}),z=(0,i.useCallback)(()=>{h("marker-list",e)},[e,h]),K=(0,i.useCallback)(()=>{m("marker-list")},[m]),Q=(0,i.useCallback)(e=>{let t=j(e);if(!t?.length&&!f.length)return;let n=t&&t[0],i=t&&1===t.length&&n&&!f.length,r=f[0],l=1===f.length&&r&&!t?.length;i?q(n.id):l?G(r.id):z()},[f,z,G,q,j]);return{isNewConversationDialogOpen:D,startNewConversation:I,startNewConversationFromActionBar:T,closeNewConversationDialog:O,startNewConversationWithSuggestedChange:F,startNewConversationFromActionBarWithSuggestedChange:A,shouldStartNewConversationWithSuggestedChange:E,isContextMenuOpen:M,openContextMenu:_,openContextMenuFromActionBar:H,closeContextMenu:Z,toggleContextMenu:B,toggleContextMenuFromActionBar:P,optimizedSelectedThreadId:U,optimizedSelectedAnnotationId:$,selectThread:q,selectAnnotation:G,openMarkerDetailsDialog:W,closeConversationDetailsDialog:V,isMarkerListDialogOpen:N===e,openMarkerListDialog:z,closeMarkerListDialog:K,openMarkerOrListDialogFromActionBar:(0,i.useCallback)(e=>{Q(e),u(t)},[t,Q]),openMarkerOrListDialog:(0,i.useCallback)(e=>{Q(e)},[Q]),annotations:f,returnFocusRef:c,threadConnectionId:S,threads:k,anyMenuOpen:L}}},60925:(e,t,n)=>{n.d(t,{l:()=>a});var i=n(67294),r=n(77666),l=n(60229);function a({cellRef:e}){let{showActionBar:t,hideActionBar:n,anyMenuOpen:a}=(0,r.N)(),[o,s]=(0,i.useState)(!1),d=(0,i.useCallback)(()=>{t()},[t]),c=(0,i.useCallback)(t=>{!a&&(e.current&&e.current.contains(t.relatedTarget)||n())},[a,e,n]),u=(0,i.useCallback)(()=>{t()},[t]),f=(0,i.useCallback)(()=>{!a&&(e.current===document.activeElement||e.current?.contains(document.activeElement)||n())},[a,e,n]);return{isActionBarFocused:o,handleCellBlur:c,handleCellFocus:d,handleCellMouseEnter:u,handleCellMouseLeave:f,handleActionBarBlur:(0,i.useCallback)(t=>{e.current&&!a&&(e.current.contains(t.relatedTarget)?e.current===t.relatedTarget&&s(!1):(n(),s(!1)))},[a,e,n]),handleActionBarFocusCapture:(0,i.useCallback)(e=>{a||(e.stopPropagation(),s(!0))},[a]),handleActionBarKeydownCapture:(0,i.useCallback)(e=>{!a&&(0,l.t)(e.key)&&e.stopPropagation()},[a])}}},60232:(e,t,n)=>{n.d(t,{V:()=>o});var i=n(87160),r=n(67294),l=n(82263),a=n(34479);function o(e,t,n,o){let[s,d]=(0,r.useState)(new Map),[c,u]=(0,r.useState)(void 0),[f,h]=(0,r.useState)(0),m=r.useRef();!m.current&&t&&(m.current=new l.d(new i.V(n,a.Pj),200,e=>1!==e.query.length));let g=(0,r.useRef)(t);g.current=t;let p=(0,r.useRef)("");(0,r.useEffect)(()=>function(){m.current?.terminate()},[]);let x=(0,r.useRef)([]);return m.current&&e!==x.current&&(m.current.onResponse=e=>{e.query===g.current&&(d(e.matchingDiffs),p.current=g.current)},x.current=e),(0,r.useEffect)(()=>{if(!e||!m.current||!p.current||""===p.current){d(new Map),u(void 0);return}d(new Map),u(void 0),m.current.post({query:p.current,diffEntryInfo:e,currentDiffEntryData:void 0})},[e?.length,e]),(0,r.useEffect)(()=>{if(e&&m.current){if(""===t)d(new Map),u(void 0),h(0),p.current="";else{if(!(t.length>0&&t.length<=1e3))return;let n=p.current.length>0&&t.startsWith(p.current);m.current.post({query:t,diffEntryInfo:e,currentDiffEntryData:n?s:void 0}),h(0)}}},[t,o]),{focusedSearchResult:c,setFocusedSearchResult:u,searchResults:s,currentIndex:f,setCurrentIndex:h}}},62974:(e,t,n)=>{n.d(t,{Z:()=>l});var i=n(81684),r=n(21469);function l(){let{nextHunk:e,currentHunk:t,previousHunk:n}=(0,r.b)(),{addInjectedContextLines:l}=(0,i.Y)(),a=!!t&&0!==t.startBlobLineNumber,o=!!t&&!!e;return{expandStartOfHunk:()=>{a&&t&&l({start:Math.max(0,t.startBlobLineNumber-20),end:t.startBlobLineNumber})},expandEndOfHunk:()=>{o&&t&&l({start:t.endBlobLineNumber+1,end:t.endBlobLineNumber+1+20})},expandEndOfPreviousHunk:()=>{n&&l({start:n.endBlobLineNumber+1,end:n.endBlobLineNumber+1+20})},canExpandEndOfHunk:o,canExpandStartOfHunk:a}}},13873:(e,t,n)=>{n.d(t,{v:()=>a});var i=n(67294),r=n(12316);function l(e){e&&setTimeout(()=>{0!==e.tabIndex&&(e.tabIndex=0)})}function a(e,t,n,a,o,s){(0,i.useEffect)(()=>{if(o&&document.activeElement){let i=function(e,t,n){let i=[];for(let l=0;l<t.length;l++){let a=t[l],o=n?.[l]??a,s=!(0,r.Ok)(a)&&a?.type==="HUNK";a&&o&&!e.hasLine(a,o,s)&&i.push(a)}return i}(o,t,s);if(0!==i.length){if(document.activeElement===document.body){let a,o,s;let d=t.indexOf(i[i.length-1]),c=t[d+1],u=i[0];c&&!(0,r.Ok)(c)&&"HUNK"===c.type&&(a=(0,r.nb)((0,r.Re)(e,c,c),0),o=document.querySelector(`[data-grid-cell-id=${a}]`),s=o?.querySelector("button[data-direction=down], button[data-direction=all]")),s||(a=(0,r.nb)((0,r.Re)(e,u,u),0),o=document.querySelector(`[data-grid-cell-id=${a}]`),s=o?.querySelector("button[data-direction=up], button[data-direction=all]")),a&&o&&(s?s.focus():o.focus(),n.focusGridCell(a),l(o))}else if("BUTTON"===document.activeElement.tagName)l(document.activeElement.closest("td"));else if("TD"===document.activeElement.tagName){let e=document.activeElement.getAttribute("data-grid-cell-id"),t=n.focusedGridCell?.cellId;if(e!==t){let e=a.current?.querySelector(`[data-grid-cell-id=${t}]`);e?.focus()}}}}},[e,t,n,s,o,a])}},60229:(e,t,n)=>{n.d(t,{X:()=>d,t:()=>s});var i=n(17840),r=n(67294),l=n(45817),a=n(13873),o=n(41291);function s(e){return e in o.lQ&&(o.lQ[e]&o.wT)>0}function d({clearSelectedDiffRowRange:e,containerRef:t,fileAnchor:n,isSplitDiff:s,leftLines:d,replaceSelectedDiffRowRangeFromGridCells:c,rightLines:u,selectedDiffRowRange:f,updateSelectedDiffRowRange:h}){let m=(0,r.useRef)(),g=(0,r.useMemo)(()=>new l.X(n,s,d,u,m.current?.focusedGridCell?.cellId),[n,s,d,u]);(0,r.useEffect)(()=>{m.current=g},[g]),(0,a.v)(n,d,g,t,m.current,u),function(e,t){let n=(0,r.useCallback)(e=>{let n=e.target.getAttribute("data-grid-cell-id");n&&t.focusGridCell(n)},[t]);(0,r.useEffect)(()=>{let t=e.current;return t?.addEventListener("focusin",n),()=>t?.removeEventListener("focusin",n)},[e,n])}(t,g);let p=(0,r.useCallback)((t,i,r)=>{let l=g.getValidSelectableRowCell();switch(!0){case(r.metaKey||r.ctrlKey)&&"KeyA"===r.code:{let e=g.getFirstCodeCell(),t=g.getLastCodeCell();if(!e||!t)return i;return c({diffAnchor:n,focusedGridCell:e,startGridCell:e,endGridCell:t}),i}case r.shiftKey&&"ArrowDown"===r.key:{let e=g.getNextSelectableCell("ArrowDown");if(!e||!l)return i;return f?.firstSelectedLineNumber?h(n,e.lineNumber,e.orientation,!0):c({diffAnchor:n,focusedGridCell:l,startGridCell:l,endGridCell:e}),i}case r.shiftKey&&"ArrowUp"===r.key:{let e=g.getNextSelectableCell("ArrowUp");if(!e||!l)return i;return f?.firstSelectedLineNumber?h(n,e.lineNumber,e.orientation,!0):c({diffAnchor:n,focusedGridCell:l,startGridCell:e,endGridCell:l}),i}default:{let t=g.moveToNextItem(r.key,r.ctrlKey),n=t&&document.querySelector(`[data-grid-cell-id=${t.cellId}]`);return e(),g.clearLastSelectedCell(),n??void 0}}},[g,f,h,n,c,e]);return(0,i.v)({containerRef:t,bindKeys:o.wT,getNextFocusable:p,focusableElementFilter:e=>"BUTTON"!==e.tagName,focusInStrategy:"previous"},[p]),{gridNavigator:g}}},75694:(e,t,n)=>{n.d(t,{q:()=>l});var i=n(25452),r=n(12316);function l(e){let{selectedDiffRowRange:t,selectedDiffLines:n,getDiffLinesByDiffAnchor:l}=(0,i.h)();return{getUnifiedDiffLineCode:()=>{let n=l(e);if(!n||!t)return"";let{startOrientation:i,endOrientation:a,startLineNumber:o,endLineNumber:s}=t,d=0,c=0;return n.length>1&&(d=n.findIndex(e=>"left"===i?e.left===o:e.right===o),c=n.findIndex(e=>"left"===a?e.left===s:e.right===s)),(0,r.aS)(n.slice(d,c+1))},getSplitDiffSingleLineCode:(t,n)=>{if(!t||!n)return"";let i=l(e)?.find(e=>"left"===t?e.left===n:e.right===n);return i?(0,r.aS)([i]):""},getSplitDiffMultiLineCode:e=>void 0===e?"":"left"===e?(0,r.aS)(n.leftLines):(0,r.aS)(n.rightLines)}}},85918:(e,t,n)=>{n.d(t,{R:()=>l});var i=n(95921),r=n(67294);let l=e=>{let t=(0,r.useRef)(e);return(0,i.b)(()=>(t.current=e,()=>t.current=null),[e]),(0,r.useCallback)((...e)=>t.current?.(...e),[])}},9009:(e,t,n)=>{n.d(t,{C:()=>c,w:()=>d});var i=n(67294),r=n(25452),l=n(12316),a=n(88344),o=n(85918),s=n(90507);function d(e){let t=(0,s.aF)(e),n=(e.subject?.diffLines??[]).filter(e=>t?e.left&&e.left>=t.startLineNumber&&e.left<=t.endLineNumber||e.right&&e.right>=t.startLineNumber&&e.right<=t.endLineNumber:[]),i=n.every(e=>"DELETION"!==e.type),r=n?.map(e=>l.Tb(e.text,e.type)[0]).join("\n");return{isValidSuggestionRange:n.length>0&&!!i,showSuggestChangesButton:!1,sourceContentFromDiffLines:r,onInsertSuggestedChange:()=>{},shouldInsertSuggestedChange:!1}}function c(e,t,n){let{sendAnalyticsEvent:s}=(0,a.z)(),{getDiffLinesFromLineRange:d,selectedDiffRowRange:c}=(0,r.h)(),u=(0,o.R)(function(n,i){if(!e)return;let r=function(e){if(!e)return"DELETION"!==t.type;if("right"===e.startOrientation&&"right"===e.endOrientation)return!0;if(e.startLineNumber===e.endLineNumber&&e.startOrientation===e.endOrientation)return"DELETION"!==t.type;let n=d(e)?.selectedLeftLines;return!!n?.every(e=>"empty-diff-line"!==e&&"DELETION"!==e.type)}(n);return{isValidSuggestionRange:r,showSuggestChangesButton:r,sourceContentFromDiffLines:r?function(e){let n=d(e)?.selectedRightLines;if(e&&n&&n.length>1)return(0,l.aS)(n);if(!t)return"";let[i]=(0,l.Tb)(t.text,t.type);return i}(n):void 0,onInsertSuggestedChange:()=>{s("diff.add_suggested_change","ADD_SUGGESTED_CHANGE_BUTTON")},shouldInsertSuggestedChange:i}});return(0,i.useMemo)(()=>({selectedDiffRowRange:c,configureSuggestedChangesFromLineRange:u,shouldStartNewConversationWithSuggestedChange:n}),[c,u,n])}},33220:(e,t,n)=>{n.d(t,{s:()=>i});let i="empty-diff-line"},33474:(e,t,n)=>{n.d(t,{Vq:()=>l,Zd:()=>a,nT:()=>i});var i,r=n(67294);let l="500px";function a(e){let[t,n]=function(e){let[t,n]=(0,r.useState)(e),i=(0,r.useRef)(t);return[i,e=>{i.current=e,n(e)}]}("LOADING"),i=(0,r.useRef)(null),l=(0,r.useRef)(null),a=(0,r.useRef)(null),d=(0,r.useRef)({untimed:!0}),c=(0,r.useCallback)(t=>(function(e,t,n,i,r,l,a){if(e.origin!==t)return;let o=function(e){var t;let n=e.data;if(!n)return null;if("string"==typeof n)try{n=JSON.parse(n)}catch{return null}return"object"==typeof(t=n)&&t&&"render"===t.type&&"string"==typeof t.body&&"object"==typeof t.payload?n:null}(e);if(!o){l("ERROR");return}let d=o.body,c=null!=o.payload?o.payload:void 0,u=n.current?.contentWindow;switch(d){case"hello":(r.current??{untimed:!0}).hello=Date.now(),s(u,{type:"render:cmd",body:{cmd:"ack",ack:!0}}),s(u,{type:"render:cmd",body:{cmd:"branding",branding:!1}});break;case"error":case"error:fatal":case"error:invalid":c&&a(c.error??null),l("ERROR");break;case"loading":l("LOADING");break;case"loaded":l("LOADED");break;case"ready":c&&"number"==typeof c.height&&i.current&&(i.current.style.height=`${c.height}px`),l("READY");break;case"resize":c&&"number"==typeof c.height&&i.current&&(i.current.style.height=`${c.height}px`);break;case"code_rendering_service:container:get_size":s(u,{type:"render:cmd",body:{cmd:"code_rendering_service:container:size","code_rendering_service:container:size":{width:i.current?.getBoundingClientRect().width}}});break;case"code_rendering_service:markdown:get_data":if(!n.current||!i.current)return;!function(e,t){let n=e.getAttribute("data-content");if(!n)return;let i={type:"render:cmd",body:{cmd:"code_rendering_service:data:ready","code_rendering_service:data:ready":{data:JSON.parse(n).data,width:t.getBoundingClientRect().width}}};s(e.contentWindow,i)}(n.current,i.current)}})(t,e,l,a,d,n,e=>i.current=e),[e,n]);return(0,r.useEffect)(()=>{o(d.current);let e=e=>{("LOADING"===t.current||"LOADED"===t.current)&&(!e||d.current.hello)&&n("ERROR")};return d.current={load:Date.now(),hello:null,helloTimer:window.setTimeout(e,1e4,!0),loadTimer:window.setTimeout(e,45e3)},()=>{o(d.current)}},[t,n]),(0,r.useEffect)(()=>(window.addEventListener("message",c),()=>window.removeEventListener("message",c)),[c]),{renderState:t.current,errorMsg:i.current,iFrameRef:l,containerRef:a}}function o(e){e&&(e.load=e.hello=null,e.helloTimer&&(clearTimeout(e.helloTimer),e.helloTimer=null),e.loadTimer&&(clearTimeout(e.loadTimer),e.loadTimer=null))}function s(e,t){e&&e.postMessage&&e.postMessage(JSON.stringify(t),"*")}!function(e){e.ERROR="ERROR",e.LOADING="LOADING",e.LOADED="LOADED",e.READY="READY"}(i||(i={}))},2091:(e,t,n)=>{n.d(t,{Z:()=>i});let i=(e,t)=>{let n=new URL(e,window.location.origin),i=new URL(t,window.location.origin);return i.href.includes("#")&&n.host===i.host&&n.pathname===i.pathname&&n.search===i.search}},10491:(e,t,n)=>{n.d(t,{a:()=>r});var i=n(67294);function r({focusRowRef:e,mouseRowRef:t}){let[n,r]=i.useState(!1);return i.useEffect(()=>{if(e.current&&t.current){let n=()=>{let t=e.current?.querySelector(".PRIVATE_TreeView-item-content-text");t?.scrollWidth!==t?.offsetWidth&&r(!0)};e.current.onfocus=()=>{n()},e.current.onblur=()=>{r(!1)},t.current.onmouseenter=()=>{n()},t.current.onmouseleave=()=>{r(!1)}}},[e,t]),n}},82159:(e,t,n)=>{n.d(t,{V:()=>r});var i=n(67294);function r(e){(0,i.useEffect)(()=>{if(!e)return;let t=document.querySelector(".footer");if(t)return t.hidden=!0,()=>{t.hidden=!1}},[e])}},42893:(e,t,n)=>{n.d(t,{f:()=>r});var i=n(51350);function r(e){let t=e.join(","),[n]=(0,i.D)(()=>{let e=/Windows/.test(navigator.userAgent)?"windows":/Macintosh/.test(navigator.userAgent)?"mac":null;return!!e&&t.includes(e)},!1,[t]);return n}},79993:(e,t,n)=>{n.d(t,{l:()=>f,s:()=>u});var i=n(67294),r=n(89250),l=n(12599),a=n(79655),o=n(2091),s=n(88455),d=n(86378),c=n(26608);let u=()=>{let{routes:e,history:t}=i.useContext(s.I),a=(0,r.s0)();return i.useCallback((i,r)=>{let s=(0,l.i3)(i).pathname;if((0,l.fp)(e,s))(0,o.Z)(location.href,i.toString())||(0,d.LD)("react"),(0,c.X)(()=>{a(i,r);let{turbo:e,...t}=window.history.state;window.history.replaceState({...t,skipTurbo:!0},"",location.href)});else{let e=t.createHref(i);(async()=>{let{softNavigate:t}=await Promise.all([n.e("vendors-node_modules_github_turbo_dist_turbo_es2017-esm_js"),n.e("ui_packages_soft-navigate_soft-navigate_ts")]).then(n.bind(n,51279));t(e)})()}},[t,a,e])},f=()=>{let[e]=(0,a.lr)(),t=u(),{pathname:n}=(0,r.TH)(),l=i.useCallback((i,r)=>{t({pathname:n,search:(0,a.fW)("function"==typeof i?i(e):i).toString()},r)},[e,t,n]);return[e,l]}},61032:(e,t,n)=>{n.d(t,{A:()=>a,F:()=>s});var i=n(67294),r=n(78720);let l=e=>e;function a(e){let t=i.useRef({}),n=i.useRef({}),a=(e,n)=>{t.current[e](n)},o=i.useRef(a);o.current=a;let s=i.useRef(new ResizeObserver(e=>{for(let t of e){let e=t.target,n="data-key",i=e.getAttribute(n);if(null===i)throw Error(`Value not found, for '${n}' attribute`);o.current(i,e)}}));i.useEffect(()=>{let e=s.current;return()=>{e.disconnect()}},[]);let{size:d,keyExtractor:c=l}=e,u=i.useMemo(()=>{let e=e=>t=>{n.current[e]&&s.current.unobserve(n.current[e]),t&&(o.current(e,t),s.current.observe(t)),n.current[e]=t},t={};for(let n=0;n<d;n++){let i=c(n);t[i]=e(i)}return t},[d,c]),f=(0,r.o)(e),h=f.virtualItems.map(e=>(t.current[e.key]=e.measureRef,{...e,measureRef:u[e.key]}));return{...f,virtualItems:h}}var o=n(95921);function s({additionalScrollOffset:e=0,scrollToFn:t,horizontal:n,parentRef:l,useVirtualImpl:a=r.o,...s}){let d=(0,i.useRef)(window),c=(0,i.useCallback)(()=>{let e=l.current?.getBoundingClientRect(),t=e?.top??0,i=e?.left??0;return n?-1*i:-1*t},[n,l]),u=(0,i.useCallback)(t=>{let i=t+((l.current?.getBoundingClientRect().top??0)+window.scrollY)+e;d.current?.scroll({top:n?0:i,left:n?i:0})},[e,n,l]);return a({...s,horizontal:n,parentRef:l,scrollToFn:t||u,onScrollElement:d,scrollOffsetFn:c,useObserver:()=>(function(e){let[t,n]=(0,i.useState)({height:0,width:0}),r=e.current;return(0,o.b)(()=>{if(!r)return;let e=()=>{let e={height:r.innerHeight,width:r.innerWidth};n(t=>t.height!==e.height||t.width!==e.width?e:t)};return e(),r.addEventListener("resize",e),()=>{r.removeEventListener("resize",e)}},[r]),t})(d)})}},10042:(e,t,n)=>{n.d(t,{V:()=>l});var i=n(85893),r=n(42483);let l=({onClick:e,id:t,children:n})=>(0,i.jsx)(r.Z,{as:"button",type:"button",id:t,sx:{display:"flex",flexDirection:"row",alignItems:"center",justifyContent:"left",fontWeight:400,color:"fg.muted",width:"100%",backgroundColor:"canvas.default",border:"1px solid",borderColor:"border.default",cursor:"text",borderRadius:2,height:"var(--control-medium-size)",lineHeight:"var(--text-body-lineHeight-medium)",px:2},onClick:e,children:n});try{l.displayName||(l.displayName="CompactCommentButton")}catch{}},42751:(e,t,n)=>{n.d(t,{H:()=>c});var i=n(85893),r=n(35434),l=n(42483),a=n(67294),o=n(9538),s=n(37874),d=n(19464);function c({batchPending:e,batchingEnabled:t,commentBoxConfig:n,condensed:c,fileLevelComment:u,filePath:f,focusOnMount:h,isReplying:m,lineNumber:g,onAddComment:p,onCancelComment:x,onPersistedCommentExists:y,quotedText:b="",side:C,subjectId:v,threadId:N,suggestedChangesConfig:j}){let[k,S]=(0,a.useState)(b),[L,w]=(0,a.useState)(!1),[D,E]=(0,a.useState)(),R=(0,a.useRef)(null),{persistCommentToStorage:I,removePersistedCommentFromStorage:T}=(0,o.u)({diffSide:C,filePath:f,line:g,subjectId:v,threadId:N,handlePersistedCommentExists:({text:e})=>{e&&(S(e),y?.())},fileLevelComment:!!u});(0,a.useEffect)(()=>{h&&setTimeout(()=>{R.current?.scrollIntoView({behavior:"smooth",block:"end"}),R.current?.focus()},100)},[h]);let F=({submitBatch:e})=>{w(!0),E(void 0);let t=(0,s.S)(k,j?.sourceContentFromDiffLines??"");if(!t.isValid){E(t.errorMessage),w(!1);return}p?.({commentText:k,onCompleted(){w(!1),M()},onError(e){w(!1);let t="Failed to save comment";e.message&&(t=`${t}: ${e.message}`),E(t)},submitBatch:e})},A=()=>F({submitBatch:!1}),O=()=>F({submitBatch:!0}),M=()=>{T(),S(""),x?.()},_={footer:{justifyContent:m?"end":"space-between","> div:first-child":{display:c||m?"none":"flex"},...c&&{"> div:last-child":{display:"flex",flexDirection:"column",width:"100%"}}}};return(0,i.jsx)(l.Z,{sx:{display:"flex",flexDirection:"column",fieldset:{minWidth:0,width:["100%"]}},children:(0,i.jsxs)(d.h,{ref:R,label:"Add diff comment",sx:_,value:k,onChange:e=>{E(void 0),I({text:e}),S(e)},onPrimaryAction:t?A:O,userSettings:n,suggestedChangesConfig:j,markdownErrorMessage:D,children:[x&&(0,i.jsx)(r.n,{disabled:L,sx:{py:1,px:2},variant:"default",onClick:M,children:"Cancel"}),!e&&(0,i.jsx)(r.n,{disabled:L||!k.length,sx:{py:1,px:2},variant:t?"default":"primary",onClick:O,children:m?"Reply":"Add comment"}),t&&(0,i.jsx)(r.n,{disabled:L||!k.length,sx:{py:1,px:2},variant:"primary",onClick:A,children:e?"Add review comment":"Start a review"})]})})}try{c.displayName||(c.displayName="AddCommentEditor")}catch{}},81232:(e,t,n)=>{n.d(t,{q:()=>g});var i=n(85893),r=n(16898),l=n(69481),a=n(85529),o=n(98833),s=n(42483),d=n(97011),c=n(79902),u=n(88216),f=n(17650),h=n(23877);let m={[f.A.Failure]:(0,i.jsx)(o.Z,{icon:a.StopIcon,sx:{fill:"danger.fg"}}),[f.A.Warning]:(0,i.jsx)(o.Z,{icon:a.AlertIcon,sx:{fill:"attention.fg"}}),[f.A.Notice]:(0,i.jsx)(o.Z,{icon:a.InfoIcon,sx:{fill:"fg.muted"}})};function g({annotation:e,ghostUser:t=r.H.ghostUser}){let n=e.checkSuite.app;return(0,i.jsxs)(s.Z,{sx:{borderLeft:"6px solid",borderColor:h.kQ[e.annotationLevel].primaryColor,p:4},children:[(0,i.jsxs)(s.Z,{sx:{display:"flex",alignItems:"center",mb:2},children:[m[e.annotationLevel],(0,i.jsx)(d.Z,{sx:{fontWeight:600,color:"fg.muted",fontSize:0,pl:2},children:h.kQ[e.annotationLevel].ariaLabel})]}),(0,i.jsx)(d.Z,{sx:{color:h.kQ[e.annotationLevel].primaryColor,fontWeight:600,fontSize:1},children:e.title}),(0,i.jsx)(s.Z,{sx:{mb:3,mt:1},children:e.message&&(0,i.jsx)(d.Z,{sx:{fontFamily:"var(--fontStack-monospace)",fontSize:0,display:"-webkit-box",overflow:"hidden","-webkit-box-orient":"vertical","-webkit-line-clamp":"8",maxWidth:"unset"},children:e.message})}),(0,i.jsxs)(s.Z,{sx:{display:"flex",alignItems:"center",justifyContent:"space-between"},children:[(0,i.jsxs)(s.Z,{sx:{flexGrow:2},children:[(0,i.jsx)(l.O,{src:n?.logoUrl??t.avatarUrl,alt:`${n?.name??t.login} avatar image`,"data-testid":"check-suite-app-avatar"}),(0,i.jsxs)(c.Z,{sx:{ml:2,maxWidth:"300px"},inline:!0,title:`${e.checkSuite.name} / ${e.checkRun.name}`,children:[(0,i.jsx)(d.Z,{sx:{fontWeight:600,fontSize:0},children:e.checkSuite.name})," /"," ",(0,i.jsx)(d.Z,{sx:{fontSize:0},children:e.checkRun.name})]})]}),e.checkRun.detailsUrl&&(0,i.jsx)(u.r,{as:"a",href:e.checkRun.detailsUrl,size:"small",children:"View details"})]})]})}try{g.displayName||(g.displayName="Annotation")}catch{}},17531:(e,t,n)=>{n.d(t,{n:()=>d});var i=n(85893),r=n(85529),l=n(42483),a=n(50919),o=n(81232),s=n(52153);function d({annotation:e,markerNavigationImplementation:t,onClose:n,ghostUser:d}){return(0,i.jsxs)(l.Z,{sx:{width:"clamp(240px, 100vw, 540px)"},children:[(0,i.jsx)(l.Z,{sx:{borderBottom:"1px solid",borderBottomColor:"border.default",display:"flex",flexDirection:"column",justifyContent:"space-between",alignItems:"center",p:1,background:"canvas.default"},children:(0,i.jsxs)(l.Z,{sx:{display:"flex",flexDirection:"row",width:"100%",alignItems:"center"},children:[(0,i.jsx)(s.D,{markerId:e.id,markerNavigationImplementation:t,onNavigate:n}),(0,i.jsx)(l.Z,{sx:{display:"flex",flexDirection:"row",gap:1,alignItems:"center",justifyContent:"right",flexGrow:1},children:(0,i.jsx)(a.h,{unsafeDisableTooltip:!0,"aria-label":"Close annotation",icon:r.XIcon,variant:"invisible",onClick:n})})]})}),(0,i.jsx)(o.q,{annotation:e,ghostUser:d})]})}try{d.displayName||(d.displayName="AnnotationDialog")}catch{}},23877:(e,t,n)=>{n.d(t,{CU:()=>s,kQ:()=>d,rD:()=>a});var i=n(85893),r=n(71893),l=n(17650);function a({annotationLevel:e,...t}){let{icon:n,...r}=d[e];return function({fill:e,stroke:t,ariaLabel:n,svgHtml:r,className:l}){return(0,i.jsx)("svg",{"aria-label":n,className:l,fill:e,height:"24",stroke:t,strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",style:{boxShadow:"none"},viewBox:"0 0 24 24",width:"24",xmlns:"http://www.w3.org/2000/svg",children:r})}({...n,...r,...t})}let o=(0,r.F4)(["0%{opacity:0;}100%{opacity:1;}"]),s=(0,r.ZP)(a).withConfig({displayName:"AnnotationIcon__AnimatedAnnotationIcon",componentId:"sc-306ab24a-0"})(["animation:"," 0.1s ease-in;"],o),d={[l.A.Failure]:{priority:1,ariaLabel:"Check failure",primaryColor:"danger.fg",icon:{fill:"var(--bgColor-danger-emphasis, var(--color-danger-emphasis))",stroke:"var(--fgColor-onEmphasis, var(--color-fg-on-emphasis))",svgHtml:(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)("circle",{cx:"12",cy:"12",r:"10"}),(0,i.jsx)("line",{x1:"15",x2:"9",y1:"9",y2:"15"}),(0,i.jsx)("line",{x1:"9",x2:"15",y1:"9",y2:"15"})]})}},[l.A.Warning]:{priority:2,ariaLabel:"Check warning",primaryColor:"attention.fg",icon:{fill:"var(--bgColor-attention-emphasis, var(--color-attention-emphasis))",stroke:"var(--fgColor-onEmphasis, var(--color-fg-on-emphasis))",svgHtml:(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)("circle",{cx:"12",cy:"12",r:"10"}),(0,i.jsx)("line",{x1:"12",x2:"12",y1:"8",y2:"12"}),(0,i.jsx)("line",{x1:"12",x2:"12",y1:"16",y2:"16"})]})}},[l.A.Notice]:{priority:3,ariaLabel:"Check notice",primaryColor:"fg.muted",icon:{fill:"var(--bgColor-neutral-emphasis, var(--color-neutral-emphasis))",stroke:"var(--fgColor-onEmphasis, var(--color-fg-on-emphasis))",svgHtml:(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)("circle",{cx:"12",cy:"12",r:"10"}),(0,i.jsx)("line",{x1:"12",x2:"12",y1:"16",y2:"12"}),(0,i.jsx)("line",{x1:"12",x2:"12",y1:"8",y2:"8"})]})}}};try{a.displayName||(a.displayName="AnnotationIcon")}catch{}try{s.displayName||(s.displayName="AnimatedAnnotationIcon")}catch{}},41747:(e,t,n)=>{n.d(t,{Q:()=>h});var i=n(85893),r=n(42483),l=n(67294),a=n(15546),o=n(90507),s=n(11019),d=n(99851),c=n(57552),u=n(58731),f=n(31125);function h({commentingImplementation:e,suggestedChange:t}){let{setIsDialogOpen:n}=(0,a.o)(),[h,m]=(0,l.useState)(!1),g=(0,l.useRef)(),{pendingSuggestedChangesBatch:p,submitSuggestedChanges:x}=e,y=(0,o.MM)(t,p),b=0===p.length,{isValid:C,reason:v}=(0,o.RN)(t,p),N=(0,l.useMemo)(()=>y?p:[t],[y,p,t]),j=(0,l.useCallback)(e=>{m(e),n?.(e)},[n]),k=(0,l.useCallback)(()=>{if(j(!1),g.current){let e=g.current.current;setTimeout(()=>e?.focus())}},[j]),S=(0,l.useCallback)(e=>{j(!0),g.current=e},[j,g]),L=(0,l.useCallback)((e,t,n)=>{x({suggestedChanges:N,commitMessage:e,onCompleted:()=>{k(),n()},onError:t})},[k,x,N]);return(0,i.jsxs)(r.Z,{sx:{p:2,borderTop:"1px solid",borderColor:"border.default"},children:[y&&(0,i.jsx)(f.V,{commentingImplementation:e,suggestedChange:t,onOpenDialog:S}),!y&&!C&&v&&(0,i.jsx)(u.k,{reason:v,sx:{m:0}}),!y&&b&&(0,i.jsx)(d.O,{commentingImplementation:e,suggestedChange:t,onOpenDialog:S}),!y&&C&&!b&&(0,i.jsx)(s.c,{commentingImplementation:e,suggestedChange:t}),h&&(0,i.jsx)(c.R,{authorLogins:N.map(e=>e.authorLogin),batchSize:N.length,onClose:k,onCommit:L})]})}try{h.displayName||(h.displayName="CodeSuggestionActions")}catch{}},11019:(e,t,n)=>{n.d(t,{c:()=>o});var i=n(85893),r=n(88344),l=n(42483),a=n(88216);function o({commentingImplementation:e,suggestedChange:t}){let{sendAnalyticsEvent:n}=(0,r.z)();return(0,i.jsx)(l.Z,{sx:{display:"flex",flexDirection:"row-reverse"},children:(0,i.jsx)(a.r,{variant:"primary",onClick:()=>{n("comments.add_suggested_change_to_batch","ADD_SUGGESTED_CHANGE_TO_BATCH_BUTTON"),e.addSuggestedChangeToPendingBatch(t)},children:"Add suggestion to batch"})})}try{o.displayName||(o.displayName="AddToExistingBatch")}catch{}},99851:(e,t,n)=>{n.d(t,{O:()=>m});var i=n(85893),r=n(88344),l=n(85529),a=n(42483),o=n(33831),s=n(88216),d=n(50919),c=n(35732),u=n(52972),f=n(67294);let h={addSuggestionToBatch:{text:"Add suggestion to batch"},applySuggestion:{text:"Apply suggestion"}};function m({commentingImplementation:e,onOpenDialog:t,suggestedChange:n}){let{sendAnalyticsEvent:m}=(0,r.z)(),[g,p]=(0,f.useState)(h.addSuggestionToBatch),[x,y]=(0,f.useState)(!1),b=(0,f.useRef)(null),C=(0,f.useRef)(null),v=()=>y(!x),{addSuggestedChangeToPendingBatch:N}=e,j=(0,f.useCallback)(()=>{g===h.addSuggestionToBatch&&(N(n),m("comments.add_suggested_change_to_batch","ADD_SUGGESTED_CHANGE_TO_BATCH_BUTTON")),g===h.applySuggestion&&t(C)},[N,t,g,m,n]);return(0,i.jsx)(a.Z,{sx:{display:"flex",flexDirection:"row-reverse"},children:(0,i.jsxs)(o.Z,{children:[(0,i.jsx)(s.r,{variant:"primary",onClick:j,ref:C,children:g.text}),(0,i.jsx)(d.h,{unsafeDisableTooltip:!0,ref:b,"aria-haspopup":"true","aria-label":"More suggestion batching options",icon:l.TriangleDownIcon,size:"medium",variant:"primary",onClick:v}),(0,i.jsx)(c.P,{anchorRef:b,open:x,onOpenChange:v,children:(0,i.jsx)(c.P.Overlay,{width:"medium",children:(0,i.jsx)(u.S,{selectionVariant:"single",children:Object.keys(h).map(e=>{let t=h[e];return(0,i.jsx)(u.S.Item,{selected:g===t,onSelect:()=>p(t),children:t.text},e)})})})})]})})}try{m.displayName||(m.displayName="ApplyOrAddToBatch")}catch{}},57552:(e,t,n)=>{n.d(t,{R:()=>y});var i=n(85893),r=n(88344),l=n(66069),a=n(26935),o=n(17840),s=n(42483),d=n(74121),c=n(39752),u=n(14626),f=n(17791),h=n(59148),m=n(67294);function g({children:e,footerButtons:t}){let{containerRef:n}=(0,o.v)({bindKeys:a.Qw.ArrowHorizontal|a.Qw.Tab,focusInStrategy:"closest"});return t?(0,i.jsx)(h.V.Footer,{ref:n,children:(0,i.jsxs)(s.Z,{sx:{display:"flex",flexDirection:"column"},children:[(0,i.jsx)(s.Z,{sx:{display:"flex",flexDirection:"row",gap:2,justifyContent:"flex-end"},children:(0,i.jsx)(h.V.Buttons,{buttons:t})}),e]})}):null}let p={CHANGE_COMMIT_MESSAGE:"CHANGE_COMMIT_MESSAGE",CHANGE_EXTENDED_DESCRIPTION:"CHANGE_EXTENDED_DESCRIPTION"};function x(e,t){switch(t.type){case p.CHANGE_COMMIT_MESSAGE:return{...e,commitMessage:t.payload};case p.CHANGE_EXTENDED_DESCRIPTION:return{...e,extendedDescription:t.payload};default:return console.error("Unknown suggested change action."),e}}function y({authorLogins:e,batchSize:t,onClose:n,onCommit:a}){let o=(0,l.Z)(),{sendAnalyticsEvent:y}=(0,r.z)(),[b,C]=(0,m.useState)(!1),[v,N]=(0,m.useState)(),[j,k]=(0,m.useReducer)(x,{commitMessage:1===e.length?`Apply suggestion from @${e[0]}`:1===new Set(e).size?`Apply suggestions from @${e[0]}`:"Apply suggestions from code review",extendedDescription:""}),S=(0,m.useCallback)((e,t,n)=>{if(!o())return;let i="There was an error trying to commit changes";n?i+=`: ${n}`:i+=".",C(!1),N(i)},[o]),L=(0,m.useCallback)(()=>{o()&&(C(!1),v&&N(void 0))},[v,o]),w=(0,m.useCallback)(()=>{b||(C(!0),y("comments.commit_suggestion","COMMIT_SUGGESTION_DIALOG_BUTTON",{batchSize:t}),a(`${j.commitMessage}

${j.extendedDescription}`,S,L))},[t,j.commitMessage,j.extendedDescription,L,S,b,a,y]);return(0,i.jsxs)(h.V,{title:"Apply suggestion",renderFooter:()=>(0,i.jsx)(g,{footerButtons:[{content:"Cancel",onClick:n},{content:(0,i.jsxs)(s.Z,{as:"span",sx:{display:"flex",flexDirection:"row",alignItems:"center"},children:["Commit changes",b&&(0,i.jsx)(d.Z,{size:"small",sx:{ml:1}})]}),onClick:w,buttonType:"primary"}],children:v&&(0,i.jsx)(c.Z.Validation,{sx:{mt:2,pt:1,justifyContent:"flex-end"},variant:"error",children:v})}),onClose:n,children:[(0,i.jsxs)(c.Z,{sx:{mb:2},children:[(0,i.jsx)(c.Z.Label,{children:"Commit message"}),(0,i.jsx)(u.Z,{block:!0,name:"commit_message",onChange:e=>k({type:p.CHANGE_COMMIT_MESSAGE,payload:e.target.value}),value:j.commitMessage})]}),(0,i.jsxs)(c.Z,{children:[(0,i.jsx)(c.Z.Label,{children:"Extended description (optional)"}),(0,i.jsx)(f.ZP,{block:!0,rows:3,placeholder:"Add an optional description...",onChange:e=>k({type:p.CHANGE_EXTENDED_DESCRIPTION,payload:e.target.value}),value:j.extendedDescription})]})]})}try{g.displayName||(g.displayName="DialogFooter")}catch{}try{y.displayName||(y.displayName="ApplySuggestionDialog")}catch{}},58731:(e,t,n)=>{n.d(t,{k:()=>a});var i=n(85893),r=n(42483),l=n(97011);function a({reason:e,sx:t}){return(0,i.jsx)(r.Z,{sx:{m:2,...t},children:(0,i.jsx)(l.Z,{as:"small",sx:{color:"fg.muted"},children:e})})}try{a.displayName||(a.displayName="CodeSuggestionUnavailable")}catch{}},31125:(e,t,n)=>{n.d(t,{V:()=>d});var i=n(85893),r=n(88344),l=n(42483),a=n(63309),o=n(88216),s=n(67294);function d({commentingImplementation:e,onOpenDialog:t,suggestedChange:n}){let d=(0,s.useRef)(null),c=(0,s.useCallback)(()=>{t(d)},[t]),u=e.pendingSuggestedChangesBatch.length,{sendAnalyticsEvent:f}=(0,r.z)();return(0,i.jsxs)(l.Z,{sx:{display:"flex",justifyContent:"space-between",flexDirection:"row"},children:[(0,i.jsx)(a.Z,{variant:"attention",sx:{my:"auto"},children:"Pending in batch"}),(0,i.jsxs)(l.Z,{sx:{display:"flex",gap:2},children:[(0,i.jsx)(o.r,{size:"medium",variant:"danger",onClick:()=>{e.removeSuggestedChangeFromPendingBatch(n),f("comments.remove_suggested_change_from_batch","REMOVE_SUGGESTED_CHANGE_FROM_BATCH_BUTTON")},children:"Remove from batch"}),(0,i.jsx)(o.r,{ref:d,size:"medium",count:u,variant:"primary",onClick:c,children:`Apply suggestion${u>1?"s":""}`})]})]})}try{d.displayName||(d.displayName="CommitOrRemoveFromBatch")}catch{}},19464:(e,t,n)=>{n.d(t,{h:()=>o});var i=n(85893),r=n(8740),l=n(67294),a=n(5361);let o=(0,l.forwardRef)(({children:e,...t},n)=>{let l=(0,a.X)();return(0,i.jsx)(r.q,{...t,ref:n,placeholder:"Leave a comment",actions:e,subject:l??void 0,showLabel:!1})});o.displayName="ConversationCommentBox"},52153:(e,t,n)=>{n.d(t,{D:()=>d});var i=n(85893),r=n(85529),l=n(97011),a=n(42483),o=n(50919);function s({markerId:e,markers:t}){let n=t.findIndex(t=>t.id===e);return(0,i.jsxs)(l.Z,{sx:{color:"fg.muted"},children:[(0,i.jsx)(l.Z,{sx:{fontWeight:500,color:"fg.default"},children:n+1})," of"," ",(0,i.jsx)(l.Z,{sx:{fontWeight:500,color:"fg.default"},children:t.length})]})}function d({markerId:e,markerNavigationImplementation:t,onNavigate:n}){let{incrementActiveMarker:l,decrementActiveMarker:d,filteredMarkers:c}=t;return c.find(t=>t.id===e)&&c.length>1?(0,i.jsxs)(a.Z,{sx:{pr:1,display:"flex",flexDirection:"row",alignItems:"center"},children:[(0,i.jsx)(o.h,{unsafeDisableTooltip:!0,"aria-label":"Load previous marker",icon:r.ChevronLeftIcon,variant:"invisible",onClick:()=>{d(e),n()}}),(0,i.jsx)(o.h,{unsafeDisableTooltip:!0,"aria-label":"Load next marker",icon:r.ChevronRightIcon,variant:"invisible",onClick:()=>{l(e),n()}}),(0,i.jsx)(a.Z,{sx:{ml:1},children:(0,i.jsx)(s,{markerId:e,markers:c})})]}):null}try{s.displayName||(s.displayName="MarkerPosition")}catch{}try{d.displayName||(d.displayName="GlobalMarkerNavigation")}catch{}},42424:(e,t,n)=>{n.d(t,{s:()=>h});var i=n(85893),r=n(65907),l=n(2708),a=n(42483),o=n(74121),s=n(67294),d=n(15546),c=n(17531),u=n(53601),f=n(43908);function h(e){return(0,i.jsx)(d.G,{children:(0,i.jsx)(m,{...e})})}function m({annotations:e,commentingImplementation:t,conversationAnchorRef:n,conversationListAnchorRef:h,conversationListThreads:m,isMarkerListOpen:g,fileAnchor:p,filePath:x,onAnnotationSelected:y,onCloseConversationDialog:b,onCloseConversationList:C,onThreadSelected:v,returnFocusRef:N,selectedAnnotationId:j,selectedThreadId:k,threadsConnectionId:S,markerNavigationImplementation:L,suggestedChangesConfig:w,ghostUser:D,...E}){let{isDialogOpen:R}=(0,d.o)(),[I,T]=(0,s.useState)(),{fetchThread:F}=t,A=(0,s.useCallback)(()=>!R&&b(),[R,b]),O=async e=>{T(void 0);let t=m.find(t=>t.id===e)?.isOutdated;T(await F(e,t))},M=(0,s.useMemo)(()=>{if(p&&I&&I.subject?.startDiffSide&&I.subject?.endDiffSide&&I.subject?.startLine&&I.subject?.endLine&&w?.configureSuggestedChangesFromLineRange){let e=I.subject?.startLine??I?.subject?.endLine,t=I.subject?.startDiffSide??I?.subject?.endDiffSide,n={diffAnchor:p,endLineNumber:I?.subject?.endLine,endOrientation:I.subject?.endDiffSide==="LEFT"?"left":"right",startLineNumber:e,firstSelectedLineNumber:e,firstSelectedOrientation:"LEFT"===t?"left":"right",startOrientation:"LEFT"===t?"left":"right"};return w?.configureSuggestedChangesFromLineRange(n)}},[p,I,w]);(0,s.useEffect)(()=>{!k&&I?T(void 0):k&&k!==I?.id&&O(k)},[F,k]);let _=k||j,H=j?e.find(e=>e.id===j):void 0;return(0,i.jsx)(i.Fragment,{children:_?(0,i.jsx)(l.w,{align:"end",anchorRef:n,focusZoneSettings:{disabled:!0},open:!0,focusTrapSettings:{disabled:!0},renderAnchor:null,overlayProps:{anchorSide:"outside-right","aria-label":`${k?"Pull Request Review Thread":"Pull Request Check Annotation"}`,id:"conversation-dialog",returnFocusRef:N,role:"dialog",sx:{width:"clamp(240px, 100vw, 540px)",borderRadius:2},onClickOutside:r.Z,onKeyDown:e=>{"Escape"!==e.key&&e.stopPropagation()}},onClose:A,children:I?(0,i.jsx)(f.p,{commentingImplementation:t,filePath:x,thread:I,threads:m,threadsConnectionId:S,onClose:A,onThreadSelected:v,onRefreshThread:O,markerNavigationImplementation:L,suggestedChangesConfig:M,ghostUser:D,...E}):H?(0,i.jsx)(c.n,{annotation:H,markerNavigationImplementation:L,onClose:A,ghostUser:D}):(0,i.jsxs)(a.Z,{sx:{height:"90px",alignItems:"center",display:"flex",flexDirection:"column",justifyContent:"center",color:"fg.muted",fontSize:0},children:[(0,i.jsx)(o.Z,{}),(0,i.jsx)("p",{children:"Loading comments"})]})}):g&&(0,i.jsx)(u.a,{anchorRef:h,annotations:e,handleOpenChange:C,threads:m,onShowCommentThread:v,onShowAnnotation:y,ghostUser:D})})}try{h.displayName||(h.displayName="Markers")}catch{}try{m.displayName||(m.displayName="MarkersInternal")}catch{}},53601:(e,t,n)=>{n.d(t,{a:()=>h});var i=n(85893),r=n(16898),l=n(69481),a=n(85529),o=n(35732),s=n(52972),d=n(42483),c=n(97011),u=n(98833),f=n(23877);function h({anchorRef:e,annotations:t,handleOpenChange:n,threads:h,onShowAnnotation:m,onShowCommentThread:g,ghostUser:p=r.H.ghostUser}){function x(e){return{display:"-webkit-box",overflow:"hidden","-webkit-box-orient":"vertical","-webkit-line-clamp":e.toString(),maxWidth:"unset"}}return(0,i.jsx)(o.P,{anchorRef:e,open:!0,onOpenChange:n,children:(0,i.jsx)(o.P.Overlay,{width:"small",children:(0,i.jsx)("div",{children:(0,i.jsxs)(s.S,{children:[t.map(e=>(0,i.jsxs)(s.S.Item,{onSelect:()=>m(e.id),children:[(0,i.jsx)(s.S.LeadingVisual,{sx:{mr:2},children:(0,i.jsx)(f.rD,{annotationLevel:e.annotationLevel},e.id)}),(0,i.jsxs)(d.Z,{sx:{...x(2)},children:[e.checkSuite.name," /"," ",(0,i.jsx)(c.Z,{sx:{fontWeight:400,color:"fg.muted"},children:e.checkRun.name})]}),(0,i.jsx)(s.S.Description,{variant:"block",children:(0,i.jsx)(d.Z,{sx:{...x(1)},children:e.title})}),(0,i.jsx)(s.S.TrailingVisual,{children:(0,i.jsx)(u.Z,{icon:a.ArrowRightIcon})})]},e.id)),h.map(e=>(0,i.jsxs)(s.S.Item,{onSelect:()=>g(e.id),children:[(0,i.jsx)(s.S.LeadingVisual,{sx:{mr:2},children:(0,i.jsx)(l.O,{alt:e.author.login,size:20,src:e.author.avatarUrl??p.avatarUrl})}),"Thread by ",e.author.login,(0,i.jsxs)(s.S.Description,{variant:"block",children:[e.commentCount," comment",e.commentCount>1?"s":""]}),(0,i.jsx)(s.S.TrailingVisual,{children:(0,i.jsx)(u.Z,{icon:a.ArrowRightIcon})})]},e.id))]})})})})}try{h.displayName||(h.displayName="MarkersListActionMenu")}catch{}},38499:(e,t,n)=>{n.d(t,{K:()=>h});var i=n(85893),r=n(10042),l=n(88344),a=n(42483),o=n(67294),s=n(87562),d=n(90507),c=n(42751),u=n(82866),f=n(9307);function h({batchingEnabled:e,batchPending:t,commentAnchorPrefix:n,commentingImplementation:h,commentsConnectionId:m,filePath:g,hideDiffPreview:p,onRefreshThread:x,repositoryId:y,subject:b,subjectId:C,tabSize:v,thread:N,threadsConnectionId:j,shouldLimitHeight:k=!0,suggestedChangesConfig:S,viewerData:L,ghostUser:w}){let[D,E]=(0,o.useState)(!1),[R,I]=(0,o.useState)(void 0),{sendAnalyticsEvent:T}=(0,l.z)(),{addThreadReply:F}=h,A=e=>{I(e),E(!0)};if(null===N.commentsData.comments||N.commentsData.comments.length<1)return null;let O=(0,d.aF)(N),M="LINE"===N.subjectType?{lineRange:O}:void 0;return(0,i.jsx)(a.Z,{"data-testid":"review-thread",children:(0,i.jsxs)(a.Z,{sx:k?{maxHeight:"40vh",overflowY:"auto"}:{},children:[!p&&N.isOutdated&&(0,i.jsx)(f.a,{tabSize:v??4,thread:N}),N.commentsData.comments.map((e,t)=>(0,i.jsx)(u.s,{isAnchorable:!0,index:t,isLastChild:t===N.commentsData.comments.length-1,anchorPrefix:n,comment:e,commentConnectionId:N.commentsData.__id,commentingImplementation:h,filePath:g,isOutdated:N.isOutdated,repositoryId:y,subject:b,subjectId:C,threadId:N.id,onRefreshThread:x,onQuoteReply:A,threadCommentCount:N.commentsData.comments.length,threadsConnectionId:j,isThreadResolved:!!N.isResolved,suggestedChangesConfig:S,applySuggestedChangesValidationData:M,viewerData:L,ghostUser:w},e.id)),N.viewerCanReply&&(0,i.jsxs)(a.Z,{sx:{backgroundColor:"canvas.inset",borderBottomLeftRadius:2,borderBottomRightRadius:2,p:2},children:[D&&(0,i.jsx)(c.H,{batchingEnabled:e,batchPending:t,commentBoxConfig:h.commentBoxConfig,condensed:!1,fileLevelComment:!0,filePath:g,focusOnMount:!0,isReplying:!0,onCancelComment:()=>{E(!1),T("comments.cancel_thread_reply","CANCEL_REVIEW_THREAD_BUTTON")},repositoryId:y,quotedText:R,subjectId:C,threadId:N.id,onAddComment:({commentText:e,onCompleted:t,onError:n,submitBatch:i})=>{let r=[];N.commentsData.__id&&r.push(N.commentsData.__id),m&&r.push(m),F({commentsConnectionIds:r,filePath:g,thread:N,text:e,submitBatch:i,onCompleted:e=>{e&&(0,s.g)(e.toString()),t?.(),x?.(N.id)},onError:n,threadsConnectionId:j}),T("comments.add","ADD_COMMENT_BUTTON")},suggestedChangesConfig:S}),!D&&(0,i.jsx)(r.V,{onClick:()=>{T("comments.start_thread_reply","REPLY_TO_THREAD_INPUT_BUTTON"),E(!0)},children:"Write a reply"})]})]})})}try{h.displayName||(h.displayName="ReviewThread")}catch{}},82866:(e,t,n)=>{n.d(t,{s:()=>C});var i=n(85893),r=n(8740),l=n(83338),a=n(16898),o=n(65907),s=n(98806),d=n(38733),c=n(6458),u=n(84669),f=n(54296),h=n(42483),m=n(67294),g=n(87562),p=n(9538),x=n(37874),y=n(19464),b=n(20772);function C({isAnchorable:e=!1,index:t=0,isLastChild:n,isOutdated:C,isThreadResolved:v,anchorPrefix:N="r",comment:j,commentingImplementation:k,filePath:S,hideActions:L,onRefreshThread:w,onQuoteReply:D=o.Z,subjectId:E,subject:R,threadCommentCount:I,threadId:T,threadsConnectionId:F,suggestedChangesConfig:A,applySuggestedChangesValidationData:O,viewerData:M,ghostUser:_=a.H.ghostUser}){let{addToast:H}=(0,f.V6)(),[Z,B]=(0,m.useState)(!1),[P,U]=(0,m.useState)(j.isHidden),[$,W]=(0,m.useState)(j.body),[V,q]=(0,m.useState)(!1),[G,z]=(0,m.useState)(),{persistCommentToStorage:K,removePersistedCommentFromStorage:Q}=(0,p.u)({subjectId:E,filePath:S,fileLevelComment:"FILE"===j.subjectType,threadId:j.id,handlePersistedCommentExists:({text:e})=>{e&&W(e)}}),{editComment:X,deleteComment:Y,hideComment:J,unhideComment:ee,lazyFetchReactionGroups:et,lazyFetchEditHistory:en}=k,ei=(0,m.useRef)(null),er=(0,m.useRef)(null),el=()=>{ei.current?.focus()};(0,m.useEffect)(()=>{Z&&setTimeout(el)},[Z]);let ea=(0,m.useCallback)(()=>{q(!0);let e=(0,x.S)($,A?.sourceContentFromDiffLines??"");if(!e.isValid){z(e.errorMessage),q(!1);return}X({text:$,comment:j,onCompleted:()=>{B(!1),q(!1),Q(),w?.(T)},onError:()=>{q(!1),H({type:"error",message:"Failed to update comment"})}})},[H,$,j,X,w,Q,A,T]),eo=j.currentDiffResourcePath?.split("#r").pop(),es=eo?`${N}${eo}`:void 0,ed=es&&u.ssrSafeLocation?new URL(`${u.ssrSafeLocation.pathname}#${es}`,u.ssrSafeLocation.origin).toString():void 0,ec=(0,m.useRef)(null);(0,m.useEffect)(()=>{e&&eo&&es&&window.location.hash.split("#").pop()===es&&((0,g.g)(eo,N),ec.current?.focus())},[N,es,eo,e]);let eu={outline:"2px solid",outlineColor:"accent.fg",outlineOffset:"-2px",boxShadow:"none"},ef=t>0,eh=t>1,em=k.suggestedChangesEnabled,eg=Z?"editing":P?"hidden":"visible";return(0,i.jsxs)(h.Z,{ref:ec,id:e?es:void 0,tabIndex:-1,sx:{"&:not(:first-child)":{backgroundColor:"canvas.inset"},"&:first-child + div":{borderTop:"1px solid",borderColor:"border.muted"},":target":eu,":focus":eu,pb:ef?0:2},children:[eh&&(0,i.jsx)(h.Z,{sx:{display:"flex",pl:ef?1:0},children:(0,i.jsx)(h.Z,{sx:{ml:4,height:8,borderLeft:"1px solid",borderColor:"border.default"}})}),(0,i.jsx)(h.Z,{sx:{px:3,pt:eh?0:2,pb:0},children:(0,i.jsx)(l.y,{headingProps:{as:"h5"},avatarUrl:j.author?.avatarUrl??_.avatarUrl,comment:{...j,url:ed??"",referenceText:j.reference.text??`#${j.reference.number}`},commentRef:ec,deleteComment:()=>{Y({commentId:j.id,onCompleted:()=>{w?.(T)},onError:()=>{q(!1),H({type:"error",message:"Failed to delete comment"})},threadCommentCount:I,threadId:T,threadsConnectionId:F,filePath:S})},editComment:()=>{B(!0)},hideComment:e=>{J({commentId:j.id,reason:e,onCompleted:()=>{w?.(T)},onError:()=>{q(!1),H({type:"error",message:"Failed to hide comment"})}})},onMinimize:U,isMinimized:P,commentAuthorLogin:j.author?.login??_.login,navigate:o.Z,commentSubjectAuthorLogin:j.reference?.author?.login??"",commentSubjectType:k.commentSubjectType,onReplySelect:D,unhideComment:()=>{ee({commentId:j.id,onCompleted:()=>{w?.(T)},onError:()=>{q(!1),H({type:"error",message:"Failed to unhide comment"})}})},hideActions:L,lazyFetchEditHistory:en,isReply:!0})}),(0,i.jsxs)(h.Z,{sx:{display:"flex",pl:ef?1:0},children:[ef&&(0,i.jsx)(h.Z,{sx:{ml:4,mr:1,pl:3,borderLeft:"1px solid",borderColor:"border.default",...n&&{borderImage:"linear-gradient(to bottom, var(--borderColor-default, var(--color-border-default)), rgba(0, 0, 0, 0)) 1 100%"}}}),"editing"===eg&&(0,i.jsx)(h.Z,{sx:{pr:2,pl:ef?0:2,pb:2,pt:1,flexGrow:1},children:(0,i.jsxs)(y.h,{ref:ei,label:"Update comment",value:$,onChange:e=>{K({text:e}),W(e),z(void 0)},onPrimaryAction:ea,userSettings:k.commentBoxConfig,suggestedChangesConfig:A,markdownErrorMessage:G,children:[(0,i.jsx)(r.n,{variant:"default",onClick:()=>{B(!1),Q(),W(j.body)},children:"Cancel"}),(0,i.jsx)(r.n,{disabled:V||!$.length,variant:"primary",onClick:ea,children:"Update"})]})}),"visible"===eg&&(0,i.jsx)(h.Z,{sx:ef?{pb:2,pr:2,overflowX:"auto",width:"100%"}:{px:3,pb:2,width:"100%"},children:j.bodyHTML&&(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)(c.wB,{ref:er,className:"markdown-body","comment-testid":`Comment body html for comment ${j.id}`,html:j.bodyHTML,sx:{mt:1,fontSize:1}}),(0,i.jsx)(h.Z,{sx:{display:"flex",flexDirection:"column",mt:3},children:et?(0,i.jsx)(m.Suspense,{fallback:(0,i.jsx)(d.m,{}),children:(0,i.jsx)(s.ReactionViewerQueryComponent,{id:j.id})}):(0,i.jsx)(s.ReactionViewer,{reactionGroups:j,subjectId:j.id})}),em&&O&&(0,i.jsx)(b.N,{comment:j,commentBodyRef:er,commentingImplementation:k,filePath:S,isOutdated:C,isThreadResolved:v,threadId:T,suggestedChangesConfig:A,applySuggestedChangesValidationData:O,subject:R,viewerData:M})]})})]})]})}try{C.displayName||(C.displayName="ReviewThreadComment")}catch{}},43908:(e,t,n)=>{n.d(t,{p:()=>y});var i=n(85893),r=n(54296),l=n(88344),a=n(85529),o=n(97011),s=n(42483),d=n(63309),c=n(50919),u=n(74121),f=n(51081),h=n(67294),m=n(52153),g=n(38499);function p({children:e}){return(0,i.jsx)(o.Z,{sx:{fontWeight:500,color:"fg.default"},children:e})}function x({thread:e}){if(!e?.diffSide||!e.line||!e.startLine||!e.startDiffSide)return null;let t="LEFT"===e.startDiffSide?"L":"R",n="LEFT"===e.diffSide?"L":"R";return(0,i.jsxs)(o.Z,{sx:{color:"fg.muted"},children:["\xb7 Comment on lines"," ",(0,i.jsxs)(p,{children:[t,e.startLine]})," ","to"," ",(0,i.jsxs)(p,{children:[n,e.line]})]})}function y({commentingImplementation:e,filePath:t,onClose:n,onRefreshThread:o,thread:p,threads:y,threadsConnectionId:b,markerNavigationImplementation:C,ghostUser:v,...N}){let{sendAnalyticsEvent:j}=(0,l.z)(),{resolveThread:k,unresolveThread:S,resolvingEnabled:L}=e,w=y.find(e=>e.id===p.id),D=p.commentsData.comments.length>0,E=!!p.isResolved,{addToast:R}=(0,r.V6)(),I=w?.commentsConnectionId;return D?(0,i.jsxs)(s.Z,{sx:{width:"clamp(240px, 100vw, 540px)"},children:[(0,i.jsx)(s.Z,{sx:{borderBottom:"1px solid",borderBottomColor:"border.default",display:"flex",flexDirection:"column",justifyContent:"space-between",alignItems:"center",p:1,background:"canvas.default"},children:(0,i.jsxs)(s.Z,{sx:{display:"flex",flexDirection:"row",width:"100%",alignItems:"center"},children:[(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)(m.D,{markerId:p.id,markerNavigationImplementation:C,onNavigate:n}),(0,i.jsx)(x,{thread:w})]}),(0,i.jsxs)(s.Z,{sx:{display:"flex",flexDirection:"row",gap:1,alignItems:"center",justifyContent:"right",flexGrow:1},children:[E&&(0,i.jsx)(d.Z,{variant:"done",size:"large",children:"Resolved"}),L&&(0,i.jsx)(f.u,{text:E?"Unresolve conversation":"Resolve conversation",type:"label",direction:"w",id:"resolve-conversation",children:(0,i.jsx)(c.h,{"aria-labelledby":"resolve-conversation",unsafeDisableTooltip:!0,icon:E?a.CheckCircleFillIcon:a.CheckCircleIcon,sx:{color:E?"var(--fgColor-done, var(--color-done-fg)) !important":void 0},variant:"invisible",onClick:E?()=>{S({thread:p,onCompleted:()=>o(p.id),onError:()=>{R({type:"error",message:"Failed to unresolve thread"})}}),j("comments.unresolve_thread","RESOLVE_CONVERSATION_BUTTON")}:()=>{k({thread:p,onCompleted:()=>o(p.id),onError:()=>{R({type:"error",message:"Failed to resolve thread"})}}),j("comments.resolve_thread","RESOLVE_CONVERSATION_BUTTON")}})}),(0,i.jsx)(c.h,{unsafeDisableTooltip:!0,"aria-label":"Close thread",icon:a.XIcon,variant:"invisible",onClick:n})]})]})}),(0,i.jsx)(h.Suspense,{fallback:(0,i.jsxs)(s.Z,{sx:{height:"90px",alignItems:"center",display:"flex",flexDirection:"column",justifyContent:"center",color:"fg.muted",fontSize:0},children:[(0,i.jsx)(u.Z,{}),(0,i.jsx)("p",{children:"Loading comments"})]}),children:(0,i.jsx)(g.K,{commentingImplementation:e,commentsConnectionId:I,filePath:t,onRefreshThread:o,thread:p,threadsConnectionId:b,...N,ghostUser:v})})]}):null}try{p.displayName||(p.displayName="Emphasis")}catch{}try{x.displayName||(x.displayName="MultineLineThreadBanner")}catch{}try{y.displayName||(y.displayName="ReviewThreadDialog")}catch{}},16458:(e,t,n)=>{n.d(t,{V:()=>d});var i=n(85893),r=n(65907),l=n(88344),a=n(2708),o=n(67294),s=n(53069);function d({align:e="end",anchorRef:t,isOpen:n,returnFocusRef:d,onCloseCommentDialog:c,suggestedChangesConfig:u,...f}){let{sendAnalyticsEvent:h}=(0,l.z)(),m=(0,o.useMemo)(()=>{if(n&&u?.configureSuggestedChangesFromLineRange)return u.configureSuggestedChangesFromLineRange(u?.selectedDiffRowRange,u?.shouldStartNewConversationWithSuggestedChange)},[n,u]);return n?(0,i.jsx)(a.w,{align:e,anchorRef:t,focusZoneSettings:{disabled:!0},open:n,renderAnchor:null,focusTrapSettings:{disabled:!0},overlayProps:{id:"conversation-dialog",role:"dialog",width:"xlarge",returnFocusRef:d,sx:{borderRadius:2},"aria-label":"Add a comment",onClickOutside:r.Z,onKeyDown:e=>{"Escape"!==e.key&&e.stopPropagation()}},onClose:c,children:(0,i.jsx)(s.h,{onClose:()=>{c(),h("comments.cancel_thread_reply","CANCEL_REVIEW_THREAD_BUTTON")},suggestedChangesConfig:m,...f})}):null}try{d.displayName||(d.displayName="StartConversation")}catch{}},53069:(e,t,n)=>{n.d(t,{h:()=>f});var i=n(85893),r=n(69481),l=n(85529),a=n(42483),o=n(75308),s=n(97011),d=n(50919),c=n(87562),u=n(42751);function f({addCommentDialogTitle:e,isLeftSide:t,filePath:n,lineNumber:f,onAddComment:h,onClose:m,viewerData:g,threadsConnectionId:p,...x}){return(0,i.jsxs)(a.Z,{sx:{px:2,pb:2,pt:1},children:[(0,i.jsxs)(a.Z,{sx:{display:"flex",justifyContent:"space-between",alignItems:"center"},children:[(0,i.jsxs)(o.Z,{as:"h4",sx:{fontSize:1,ml:2,py:2},children:[(0,i.jsx)(r.O,{alt:g.login,size:24,src:g.avatarUrl||"",sx:{mr:2}}),(0,i.jsx)(s.Z,{children:e??"Add a comment"})]}),m&&(0,i.jsx)(d.h,{unsafeDisableTooltip:!0,variant:"invisible",icon:l.XIcon,onClick:m,"aria-label":"Cancel"})]}),(0,i.jsx)(u.H,{focusOnMount:!0,condensed:!1,fileLevelComment:!1,filePath:n,lineNumber:f,onAddComment:({commentText:e,onCompleted:t,onError:i,submitBatch:r})=>{h({text:e,onError:i,onCompleted:(e,n)=>{n&&(0,c.g)(n.toString()),t?.(e,n)},submitBatch:r,filePath:n,threadsConnectionId:p})},onCancelComment:m,side:t?"LEFT":"RIGHT",...x})]})}try{f.displayName||(f.displayName="StartThreadComment")}catch{}},9307:(e,t,n)=>{n.d(t,{a:()=>g});var i=n(85893),r=n(9770),l=n(27916),a=n(6458),o=n(42483),s=n(97011),d=n(86010),c=n(67294);function u({line:e,children:t}){return(0,i.jsx)("td",{className:"diff-line-number",style:{backgroundColor:(0,r.dF)(e.type,!0),textAlign:"center"},children:(0,i.jsx)("code",{children:t})})}function f({line:e}){return(0,i.jsx)("td",{colSpan:4,style:{backgroundColor:"var(--bgColor-accent-muted, var(--color-accent-subtle))",flexGrow:1},valign:"top",children:(0,i.jsxs)(o.Z,{sx:{display:"flex",flexDirection:"row"},children:[(0,i.jsx)(l.fx,{}),(0,i.jsx)("code",{className:"diff-text-cell hunk",children:(0,i.jsx)(a.sF,{className:"diff-text-inner color-fg-muted",html:e.html})})]})})}function h({line:e,tabSize:t}){let n="HUNK"===e.type,o="ADDITION"!==e.type,s="DELETION"!==e.type,{getTextIndent:h,getPaddingLeft:m}=(0,c.useMemo)(()=>(0,l.pE)(e.text,t),[e,t]),g="ADDITION"===e.type?"+":"DELETION"===e.type?"-":void 0;return(0,i.jsxs)("tr",{children:[n&&(0,i.jsx)(f,{line:e}),!n&&(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)(u,{line:e,children:o&&e.left}),(0,i.jsx)(u,{line:e,children:s&&e.right}),(0,i.jsx)("td",{className:"diff-text-cell",style:{backgroundColor:(0,r.dF)(e.type,!1)},children:(0,i.jsxs)("code",{className:(0,d.W)("diff-text syntax-highlighted-line",{addition:"ADDITION"===e.type,deletion:"DELETION"===e.type}),children:[!!g&&(0,i.jsx)("span",{className:"diff-text-marker",children:g}),(0,i.jsx)(a.sF,{className:"diff-text-inner",html:e.html,style:{backgroundColor:(0,r.dF)(e.type,!1),paddingLeft:m(),textIndent:h()}})]})})]})]})}function m({sx:e,lines:t,lineWidth:n,tabSize:r}){let a=t.map((e,t)=>(0,i.jsx)(h,{line:e,tabSize:r},t));return(0,i.jsx)(o.Z,{as:"table",className:"tab-size","data-tab-size":r,sx:{borderTop:0,borderBottom:0,borderLeft:1,borderRight:1,borderStyle:"solid",borderColor:"border.muted",...e},children:(0,i.jsx)(l.wj,{lineWidth:n,children:a})})}function g({sx:e,tabSize:t,thread:n,hideHeaderDetails:a,diffTableSx:d}){if(!n.subject?.diffLines||n.subject?.diffLines.length<1)return null;let c=(0,r.Gi)(n.subject.diffLines);return(0,i.jsxs)(o.Z,{sx:{m:3,border:0,borderBottomWidth:6,borderStyle:"solid",borderColor:"border.muted",borderBottomLeftRadius:2,borderBottomRightRadius:2,...e},children:[!a&&(0,i.jsx)(o.Z,{sx:{borderWidth:1,borderStyle:"solid",borderTopLeftRadius:2,borderTopRightRadius:2,borderColor:"border.muted",color:"fg.muted",px:2,py:1},children:(0,i.jsxs)(s.Z,{sx:{fontSize:0,color:"fg.muted"},children:["Line"," ",(0,l._2)({originalStartLine:n.subject.originalStartLine,originalEndLine:n.subject.originalEndLine,startDiffSide:n.subject.startDiffSide,endDiffSide:n.subject.endDiffSide}),", commit ",(0,i.jsx)("code",{children:n.subject.pullRequestCommit?.commit.abbreviatedOid})]})}),(0,i.jsx)(m,{lineWidth:c,lines:n.subject.diffLines,tabSize:t,sx:d})]})}try{u.displayName||(u.displayName="StaticLineNumberCell")}catch{}try{f.displayName||(f.displayName="StaticHunkCell")}catch{}try{h.displayName||(h.displayName="StaticUnifiedDiffRow")}catch{}try{m.displayName||(m.displayName="StaticUnifiedDiffLines")}catch{}try{g.displayName||(g.displayName="StaticUnifiedDiffPreview")}catch{}},20772:(e,t,n)=>{n.d(t,{N:()=>c});var i=n(85893),r=n(95921),l=n(67294),a=n(73935),o=n(90507),s=n(41747),d=n(58731);function c({applySuggestedChangesValidationData:e,comment:t,commentBodyRef:n,commentingImplementation:c,filePath:u,isOutdated:f,isThreadResolved:h,subject:m,suggestedChangesConfig:g,threadId:p,viewerData:x}){let y=function(e,t,n,i,a){let[o,s]=(0,l.useState)();return(0,r.b)(()=>{if(!e.current||"LINE"!==t.subjectType)return;let r=[...e.current.getElementsByClassName("js-apply-changes")];if(r.length>0){let e=[];for(let l of r){let r=l?.closest("div.js-suggested-changes-blob");if(!r)continue;let o=[...r.querySelectorAll(".js-blob-code-addition")];a.lineRange&&e.push({authorLogin:t.author?.login??"ghost",commentId:t.id,path:n,ref:l,suggestion:o.map(e=>e.textContent),lineRange:a.lineRange,threadId:i})}s(e)}},[a.lineRange,t.author?.login,t.bodyHTML,t.id,t.subjectType,e,n,i]),o}(n,t,u,p,e);return(0,i.jsx)(i.Fragment,{children:y?.length&&y.map(n=>{let{isValid:r,reason:l}=(0,o.eE)({suggestedChange:n,isOutdated:f,isPending:"PENDING"===t.state,isResolved:h,pullRequestIsClosed:m?.state!=="OPEN",pullRequestIsInMergeQueue:!!m?.isInMergeQueue,userCanApplySuggestion:!!x?.viewerCanApplySuggestion,applySuggestedChangesValidationData:e,suggestedChangesConfig:g});return!r&&l?(0,a.createPortal)((0,i.jsx)(d.k,{reason:l}),n.ref):(0,a.createPortal)((0,i.jsx)(s.Q,{commentingImplementation:c,suggestedChange:n}),n.ref)})})}try{c.displayName||(c.displayName="SuggestedChangeView")}catch{}},5361:(e,t,n)=>{n.d(t,{X:()=>l,d:()=>a});var i=n(67294);let r=(0,i.createContext)(null),l=()=>(0,i.useContext)(r),a=r.Provider;try{r.displayName||(r.displayName="ConversationMarkdownSubjectContext")}catch{}},15546:(e,t,n)=>{n.d(t,{G:()=>a,o:()=>o});var i=n(85893),r=n(67294);let l=(0,r.createContext)({});function a({children:e}){let[t,n]=(0,r.useState)(!1),a=(0,r.useMemo)(()=>({isDialogOpen:t,setIsDialogOpen:n}),[t,n]);return(0,i.jsx)(l.Provider,{value:a,children:e})}let o=()=>(0,r.useContext)(l);try{l.displayName||(l.displayName="DialogStateContext")}catch{}try{a.displayName||(a.displayName="DialogStateProvider")}catch{}},59715:(e,t,n)=>{n.d(t,{h:()=>d});var i=n(85893),r=n(85529),l=n(52972),a=n(74121),o=n(80087),s=n(43235);let d=e=>(0,i.jsx)(s.n,{errorFallback:(0,i.jsx)(c,{}),suspenseFallback:(0,i.jsx)(u,{}),Component:f,...e}),c=()=>(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)(l.S.Divider,{}),(0,i.jsxs)(l.S.Item,{disabled:!0,children:[(0,i.jsx)(l.S.LeadingVisual,{children:(0,i.jsx)(r.AlertIcon,{})}),"Copilot failed to load"]})]}),u=()=>(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)(l.S.Divider,{}),(0,i.jsxs)(l.S.Item,{disabled:!0,children:[(0,i.jsx)(l.S.LeadingVisual,{children:(0,i.jsx)(a.Z,{size:"small"})}),"Copilot is loading..."]})]}),f=e=>(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)(l.S.Divider,{}),(0,i.jsx)(o.u,{eventContext:{prx:!0},leadingVisual:(0,i.jsx)(r.CopilotIcon,{}),fileDiffReference:e.fileDiffReference})]});try{d.displayName||(d.displayName="CopilotDiffChatBlobActionsMenuItems")}catch{}try{c.displayName||(c.displayName="MenuItemError")}catch{}try{u.displayName||(u.displayName="MenuItemLoading")}catch{}try{f.displayName||(f.displayName="BaseCopilotDiffChatBlobActionsMenuItems")}catch{}},11534:(e,t,n)=>{n.d(t,{y:()=>h});var i=n(85893),r=n(85529),l=n(52972),a=n(74121),o=n(35732),s=n(67294),d=n(69282),c=n(80087),u=n(20004),f=n(43235);let h=({selectedRange:e,...t})=>(0,i.jsx)(f.n,{errorFallback:(0,i.jsx)(m,{}),suspenseFallback:(0,i.jsx)(g,{}),componentProps:{selectedRange:e},Component:p,...t}),m=()=>(0,i.jsxs)(l.S.Item,{disabled:!0,children:[(0,i.jsx)(l.S.LeadingVisual,{children:(0,i.jsx)(r.AlertIcon,{})}),"Copilot failed to load"]}),g=()=>(0,i.jsxs)(l.S.Item,{disabled:!0,children:[(0,i.jsx)(l.S.LeadingVisual,{children:(0,i.jsx)(a.Z,{size:"small"})}),"Copilot is loading..."]}),p=({fileDiffReference:e,selectedRange:t})=>{let n=(0,s.useMemo)(()=>{let n={...e};return t&&(n.selectedRange={start:`${t?.startOrientation[0]?.toUpperCase()??""}${t?.startLineNumber}`,end:`${t?.endOrientation[0]?.toUpperCase()??""}${t?.endLineNumber}`}),n},[e,t]);return(0,i.jsxs)(o.P,{children:[(0,i.jsx)(o.P.Anchor,{children:(0,i.jsxs)(l.S.Item,{children:[(0,i.jsx)(l.S.LeadingVisual,{children:(0,i.jsx)(r.CopilotIcon,{})}),"Copilot"]})}),(0,i.jsx)(o.P.Overlay,{children:(0,i.jsxs)(l.S,{children:[(0,i.jsx)(c.u,{fileDiffReference:n,eventContext:{prx:!0}}),(0,i.jsx)(u.m,{fileDiffReference:n,eventContext:{prx:!0}}),(0,i.jsx)(d.l,{fileDiffReference:n,eventContext:{prx:!0}})]})})]})};try{h.displayName||(h.displayName="CopilotDiffChatContextMenu")}catch{}try{m.displayName||(m.displayName="MenuItemError")}catch{}try{g.displayName||(g.displayName="MenuItemLoading")}catch{}try{p.displayName||(p.displayName="BaseCopilotDiffChatContextMenu")}catch{}},43235:(e,t,n)=>{n.d(t,{E:()=>f,n:()=>g});var i=n(85893),r=n(61211),l=n(2647),a=n(67294),o=n(22578),s=n(96320);let d=n(3331),c=n(73097),u=n(64889),f=({children:e})=>{let{viewer:t}=(0,o.useLazyLoadQuery)(d,{});return t.isCopilotDotcomChatEnabled?(0,i.jsx)(i.Fragment,{children:e}):null},h=({Component:e,componentProps:t,queryVariables:n})=>{let{pullRequest:l}=(0,o.useLazyLoadQuery)(c,n),{diffEntry:a}=(0,o.useLazyLoadQuery)(u,n);(0,r.q)(l?.comparison),(0,r.q)(a);let d=(0,s.U9)(l.comparison,a);return d?(0,i.jsx)(e,{fileDiffReference:d,...t}):null},m=({Component:e,componentProps:t,referenceData:n,queryVariables:l})=>{let{pullRequest:a}=(0,o.useLazyLoadQuery)(c,l);(0,r.q)(a?.comparison);let d=(0,s.I6)(a?.comparison,n);return d?(0,i.jsx)(e,{fileDiffReference:d,...t}):null},g=({Component:e,componentProps:t,errorFallback:n=null,suspenseFallback:r=null,...o})=>(0,i.jsx)(l.S,{fallback:n,children:(0,i.jsx)(a.Suspense,{fallback:r,children:(0,i.jsx)(f,{children:o.referenceData?(0,i.jsx)(m,{Component:e,componentProps:t,referenceData:o.referenceData,queryVariables:o.queryVariables}):(0,i.jsx)(h,{Component:e,componentProps:t,queryVariables:o.queryVariables})})})});try{f.displayName||(f.displayName="CopilotCodeChatAccessLoader")}catch{}try{h.displayName||(h.displayName="CopilotCodeChatReferenceLoader")}catch{}try{m.displayName||(m.displayName="CopilotCodeChatComparisonLoader")}catch{}try{g.displayName||(g.displayName="DiffChatWrapper")}catch{}},69282:(e,t,n)=>{n.d(t,{l:()=>s});var i=n(85893),r=n(97274),l=n(37055),a=n(54296),o=n(52972);let s=({fileDiffReference:e,eventContext:t,afterSelect:n})=>{let{addToast:s}=(0,a.V6)();return(0,i.jsx)(o.S.Item,{onSelect:()=>{(0,r.cw)(e),s({message:"Reference added to thread",type:"success"}),(0,l.qP)("copilot.file-diff.add",t),n?.()},children:"Attach to current thread"})};try{s.displayName||(s.displayName="DiffLinesAttachMenuItem")}catch{}},80087:(e,t,n)=>{n.d(t,{u:()=>s});var i=n(85893),r=n(97274),l=n(42591),a=n(37055),o=n(52972);let s=({fileDiffReference:e,leadingVisual:t,eventContext:n,afterSelect:s})=>(0,i.jsxs)(o.S.Item,{onSelect:()=>{(0,r.L4)({intent:l.A9.conversation,references:[e]}),(0,a.qP)("copilot.file-diff.discuss",n),s?.()},children:[t&&(0,i.jsx)(o.S.LeadingVisual,{children:t}),"Ask about this diff"]});try{s.displayName||(s.displayName="DiffLinesDiscussMenuItem")}catch{}},20004:(e,t,n)=>{n.d(t,{m:()=>s});var i=n(85893),r=n(97274),l=n(42591),a=n(37055),o=n(52972);let s=({fileDiffReference:e,eventContext:t,afterSelect:n})=>(0,i.jsx)(o.S.Item,{onSelect:()=>{(0,r.L4)({content:"Explain",intent:l.A9.explainFileDiff,references:[e]}),(0,a.qP)("copilot.file-diff.explain",t),n?.()},children:"Explain"});try{s.displayName||(s.displayName="DiffLinesExplainMenuItem")}catch{}},37010:(e,t,n)=>{n.d(t,{Fh:()=>m,LG:()=>g,ir:()=>h});var i=n(85893),r=n(85529),l=n(14626),a=n(35732),o=n(50919),s=n(74121),d=n(52972),c=n(67294),u=n(86010);let f={filterLoadingHeight:"FileFilter-module__filterLoadingHeight--cW8BP"},h="No extension";function m({filterText:e,onFilterTextChange:t}){return(0,i.jsxs)("div",{className:"d-flex flex-nowrap gap-2",children:[(0,i.jsx)(l.Z,{block:!0,"aria-label":"Filter files\u2026",leadingVisual:r.SearchIcon,placeholder:"Filter files\u2026",value:e,onChange:e=>t?.(e.target.value)}),(0,i.jsxs)(a.P,{children:[(0,i.jsx)(a.P.Anchor,{children:(0,i.jsx)(o.h,{unsafeDisableTooltip:!0,"aria-label":"Filter",icon:r.SlidersIcon,className:"flex-shrink-0"})}),(0,i.jsx)(a.P.Overlay,{className:(0,u.Z)(f.filterLoadingHeight),children:(0,i.jsx)("div",{className:(0,u.Z)("d-flex","flex-column","flex-justify-center","flex-items-center",f.filterLoadingHeight),children:(0,i.jsx)(s.Z,{size:"medium"})})})]})]})}function g({filterText:e,onFilterTextChange:t,fileExtensions:n,unselectedFileExtensions:s,onFilterChange:u,additionalFilterGroups:f}){let[m,g]=(0,c.useState)(e),p=(e,t)=>{u?.(e?"selectFileExtension":"unselectFileExtension",{extension:t})},x=Array.from(n||[]).filter(e=>e!==h).sort(),y=e=>!s?.has(e),b=n?.has(h);return(0,i.jsxs)("div",{className:"d-flex flex-nowrap gap-2",children:[(0,i.jsx)(l.Z,{block:!0,"aria-label":"Filter files\u2026",leadingVisual:r.SearchIcon,placeholder:"Filter files\u2026",value:m,onChange:e=>{g(e.target.value),t?.(e.target.value)}}),(0,i.jsxs)(a.P,{children:[(0,i.jsx)(a.P.Anchor,{children:(0,i.jsx)(o.h,{unsafeDisableTooltip:!0,"aria-label":"Filter",icon:r.SlidersIcon,className:"flex-shrink-0"})}),(0,i.jsx)(a.P.Overlay,{children:(0,i.jsxs)(d.S,{children:[(0,i.jsxs)(d.S.Group,{selectionVariant:"multiple",children:[(0,i.jsx)(d.S.GroupHeading,{children:"File extensions"}),x.map(e=>{let t=y(e);return(0,i.jsx)(d.S.Item,{selected:t,onSelect:()=>p(!t,e),children:`${e}`},e)}),b&&(0,i.jsx)(d.S.Item,{selected:y(h),onSelect:()=>p(!y(h),h),children:h},h)]}),f]})})]})]})}try{m.displayName||(m.displayName="FileFilterLoading")}catch{}try{g.displayName||(g.displayName="FileFilterShared")}catch{}},77158:(e,t,n)=>{n.d(t,{o:()=>N});var i=n(85893),r=n(85529),l=n(31171),a=n(33831),o=n(88216),s=n(50919),d=n(35732),c=n(52972),u=n(67294),f=n(81684),h=n(21469),m=n(88486),g=n(60925),p=n(56327),x=n(33899),y=n(72882);let b={position:"absolute",right:"-16px",top:"0px",zIndex:2},C="24px",v="30px",N=(0,u.forwardRef)(function({authorAvatarUrl:e,authorLogin:t,cellId:n,cellRef:N,showStartConversation:j,hasDraftComment:k,copilotChatReferenceData:S},L){let w=(0,u.useRef)(null),D=(0,u.useRef)(null),{commentingEnabled:E}=(0,f.Y)(),{diffLine:R,isRowSelected:I}=(0,h.b)(),T=(0,u.useRef)(null),F=w.current?w:D;(0,l.z)(L,F);let A=R.threadsData?.totalCommentsCount||0,O=R.annotationsData?.totalCount||0,{isActionBarFocused:M,handleActionBarBlur:_,handleActionBarFocusCapture:H,handleActionBarKeydownCapture:Z}=(0,g.l)({cellRef:N}),{annotations:B,isContextMenuOpen:P,openMarkerOrListDialogFromActionBar:U,startNewConversationFromActionBar:$,startNewConversationFromActionBarWithSuggestedChange:W,anyMenuOpen:V,threads:q,toggleContextMenu:G,toggleContextMenuFromActionBar:z}=(0,m.t)({cellId:n,actionBarRef:T}),K=(0,u.useCallback)(e=>{I&&e.preventDefault()},[I]);return(0,i.jsx)("div",{"aria-hidden":!M,style:{...b},className:"d-flex flex-row",children:(0,i.jsxs)(a.Z,{onBlur:_,onClick:K,onFocusCapture:H,onKeyDownCapture:Z,children:[E&&(0,i.jsxs)(i.Fragment,{children:[A+O>0&&(0,i.jsx)(o.r,{ref:w,"aria-expanded":V,"aria-label":"View conversations",size:"small",sx:{pt:0,pb:0,px:1,height:C},onClick:e=>{(1===q.length||1===B.length)&&e.preventDefault(),U()},children:(0,i.jsx)(p.Z,{})}),j&&(0,i.jsx)(i.Fragment,{children:k?(0,i.jsx)(o.r,{"aria-label":"Start conversation (comment in progress)",size:"small",sx:{pt:0,pb:0,px:1,width:v,height:C},onClick:$,children:(0,i.jsx)(y.W,{authorAvatarUrl:e,authorLogin:t})}):(0,i.jsx)(s.h,{unsafeDisableTooltip:!0,"aria-label":"Start conversation",ref:D,icon:r.PlusIcon,size:"small",sx:{width:v,height:C,color:"fg.muted"},onClick:$})})]}),(0,i.jsx)(s.h,{unsafeDisableTooltip:!0,ref:T,"aria-haspopup":"true","aria-label":"More actions",icon:r.TriangleDownIcon,size:"small",sx:{width:C,height:C,color:"fg.muted"},onClick:z}),(0,i.jsx)(d.P,{anchorRef:T,open:P,onOpenChange:G,children:(0,i.jsx)(d.P.Overlay,{width:"medium",children:(0,i.jsx)(c.S,{children:(0,i.jsx)(x.Ft,{copilotChatReferenceData:S,showStartConversation:j,handleViewMarkersSelection:U,startConversationCurrentLine:$,startConversationWithSuggestedChange:W})})})})]})})});N.displayName="ActionBar"},56327:(e,t,n)=>{n.d(t,{Z:()=>h});var i=n(85893),r=n(86010),l=n(69481),a=n(90836),o=n(97011),s=n(23877),d=n(67294),c=n(37144),u=n(21469),f=n(81684);function h({shouldAnimateRef:e}){let{diffLine:t}=(0,u.b)(),{ghostUser:n}=(0,f.Y)();(0,d.useEffect)(()=>{e?.current&&(e.current=!1)},[e]);let h=(t.threadsData?.totalCommentsCount||0)+(t.annotationsData?.totalCount||0);if(0===h)return null;let m={},g=[];t.annotationsData?.annotations?.map(e=>{e?.annotationLevel&&g.push({id:e.id,level:e.annotationLevel})}),t.threadsData?.threads?.map(e=>e?.commentsData?.comments?.map(e=>{e?.author?m[e?.author.login]=e.author:n?.login&&(m[n.login]=n)}));let p=[...g.sort((e,t)=>(s.kQ[e.level]?.priority||0)<(s.kQ[t.level]?.priority||0)?-1:1).map(t=>e?.current?(0,i.jsx)(s.CU,{annotationLevel:t.level},t.id):(0,i.jsx)(s.rD,{annotationLevel:t.level},t.id)),...Object.keys(m).map(e=>{let t=m[e]?.login,r=m[e]?.avatarUrl??(n?.avatarUrl||" ");return(0,i.jsx)(l.O,{alt:t,size:20,src:r},t)})].slice(0,3),x=h>9?"9+":`${h}`;return(0,i.jsxs)("div",{className:(0,r.Z)("d-flex","flex-justify-between","flex-items-center",c.Z.commentIndicatorContainer),children:[(0,i.jsx)(a.Z,{disableExpand:!0,sx:{maxWidth:"40px","--avatar-stack-three-plus-min-width":"32px"},children:p}),(0,i.jsx)(o.Z,{sx:{color:"fg.default",ml:1,fontSize:0,fontWeight:400,fontVariantNumeric:"tabular-nums",width:"2ch",textAlign:"start"},children:x})]})}try{h.displayName||(h.displayName="CommentIndicator")}catch{}},17717:(e,t,n)=>{n.d(t,{z:()=>g});var i=n(85893),r=n(98805),l=n(85529),a=n(97011),o=n(63309),s=n(50919),d=n(14626),c=n(98833),u=n(67294),f=n(86010),h=n(43748),m=n(73942);let g=(0,u.memo)(function({inputContainer:e,currentPathDigestIndex:t,stickied:n,searchTerm:g,searchResults:p,setSearchTerm:x,focusedSearchResult:y,currentIndex:b,setCurrentIndex:C,setFocusedSearchResult:v,onClose:N,scrollDiffCellIntoView:j}){let{findInFileShortcut:k}=(0,r.bx)(),[S,L]=(0,u.useState)(!0),w=(0,u.useRef)([]),D=(0,u.useRef)(0),E=()=>{x(""),v(void 0),t.current=0},R=e=>{if(void 0===y||""===y.pathDigest){t.current=0,v({pathDigest:w.current[0]??"",indexWithinDigest:0});return}1===e?(C(b===D.current-1?0:b+1),y.indexWithinDigest===p.get(y.pathDigest).length-1?(t.current=t.current+1,t.current===w.current.length&&(t.current=0),y.pathDigest=w.current[t.current]??"",y.indexWithinDigest=0):y.indexWithinDigest=y.indexWithinDigest+1):(C(0===b?D.current-1:b-1),0===y.indexWithinDigest?(t.current=t.current-1,-1===t.current&&(t.current=w.current.length-1),y.pathDigest=w.current[t.current]??"",y.indexWithinDigest=p.get(y.pathDigest).length-1):y.indexWithinDigest=y.indexWithinDigest-1),v(y)};return(0,u.useEffect)(()=>{e.current?.focus(),e.current?.select()},[e]),(0,u.useEffect)(()=>{w.current=Array.from(p.keys()),t.current=0,v({pathDigest:w.current[0]??"",indexWithinDigest:0});let e=0;for(let t of p.values())e+=t.length;D.current=e},[t,p,p.size,v]),(0,u.useEffect)(()=>{p.size>0&&void 0!==y&&j(y)},[p,y,b]),(0,i.jsxs)("div",{className:(0,f.Z)(h.Z.defaultStyles,n&&h.Z.stickyStyles,!n&&h.Z.notStickyStyles),children:[(0,i.jsx)(m.xN,{commands:{"pull-requests-diff-view:jump-to-next-result-alternate":()=>R(1),"pull-requests-diff-view:jump-to-previous-result-alternate":()=>R(-1),"pull-requests-diff-view:close-find":N}}),(0,i.jsxs)(m.FU,{commands:{"pull-requests-diff-view:jump-to-next-result":()=>R(1),"pull-requests-diff-view:jump-to-previous-result":()=>R(-1)},children:[(0,i.jsxs)("div",{className:"py-2 pl-3 pr-2 d-flex flex-justify-center flex-items-center flex-row f6 borderColor-default border-bottom",children:[(0,i.jsxs)("div",{className:"d-flex flex-row flex-items-baseline",children:[(0,i.jsx)(a.Z,{as:"h5",className:"fgColor-default pr-2 text-bold",children:"Find"}),(0,i.jsxs)(a.Z,{className:(0,f.Z)("find-text-help-tooltip","fgColor-subtle",S&&h.Z.visibilityVisible,!S&&h.Z.visibilityHidden),children:["Press ",(0,i.jsx)(o.Z,{children:k.text})," again to open the browser's find menu"]})]}),(0,i.jsx)("div",{className:"flex-1"}),(0,i.jsx)(s.h,{unsafeDisableTooltip:!0,variant:"invisible",size:"small",onClick:N,icon:l.XIcon,className:"fgColor-subtle","aria-label":"Close find in file"})]}),(0,i.jsx)("div",{className:"pl-2 pr-2 pt-2 pb-2",children:(0,i.jsx)(d.Z,{ref:e,className:"pl-1 border-0 box-shadow-none",validationStatus:D.current>1e3?"error":void 0,type:"text",leadingVisual:()=>(0,i.jsx)(c.Z,{icon:l.SearchIcon,"aria-hidden":"true"}),autoComplete:"off",name:"Find in file input",placeholder:"Search this diff",value:g,block:!0,onChange:e=>{e.target.value?(L(!1),x(e.target.value),C(0)):(L(!0),E())},trailingAction:(0,i.jsxs)("div",{className:"d-flex flex-row flex-justify-center flex-items-center",children:[(0,i.jsxs)(a.Z,{className:"text-small fgColor-subtle m-2 text-center",children:[0===p.size||void 0===y?0:b+1,"/",D.current]}),(0,i.jsx)(s.h,{unsafeDisableTooltip:!0,size:"small",variant:"invisible",onClick:()=>{R(-1)},icon:l.ChevronUpIcon,"aria-label":"Up","data-testid":"up-search",className:"fgColor-subtle"}),(0,i.jsx)(s.h,{unsafeDisableTooltip:!0,size:"small",variant:"invisible",onClick:()=>{R(1)},icon:l.ChevronDownIcon,"aria-label":"Down","data-testid":"down-search",className:"fgColor-subtle"})]}),onKeyDown:t=>{(t.metaKey||t.ctrlKey)&&("f"===t.key||"F"===t.key)&&(S?N():(L(!0),t.preventDefault(),e.current?.focus(),e.current?.select()))}})})]})]})});try{g.displayName||(g.displayName="DiffFindPopover")}catch{}},30377:(e,t,n)=>{n.d(t,{M:()=>o});var i=n(85893),r=n(97011),l=n(68434),a=n(86010);function o({searchResults:e,focusedSearchResult:t,className:n,styleObject:o}){let s=0,d=e[0]?.text??"",c=e[0]?.diffLineNumIndex??-1,u=`overlay-${c}-${d}`;return(0,i.jsxs)(r.Z,{className:(0,a.Z)(n,"position-absolute",l.Z.userSelectNone,!e[0].isHunk&&l.Z.nonHunkStyles),style:{...o},children:[e.map(e=>{var n,o;let c=e.indexWithinPathDigest===t,u=(0,i.jsxs)("span",{children:[(0,i.jsx)(r.Z,{className:(0,a.Z)(l.Z.visibilityHidden,l.Z.userSelectNone),children:d.substring(s,e.column)}),(0,i.jsx)(r.Z,{className:(0,a.Z)(l.Z.userSelectNone,c&&l.Z.focusedResultStyles,!c&&l.Z.nonFocusedResultStyles),children:(0,i.jsx)(r.Z,{className:(0,a.Z)(!c&&l.Z.visibilityHidden),id:(n=e.indexWithinPathDigest,o=e.pathDigest,`match-${o}-${n}`),children:d.substring(e.column,e.columnEnd)})})]},`find-match-${e.diffLineNumIndex}-${e.column}`);return s=e.columnEnd,u}),(0,i.jsx)(r.Z,{className:(0,a.Z)(l.Z.visibilityHidden,l.Z.userSelectNone),children:d.substring(s)})]},u)}try{o.displayName||(o.displayName="DiffHighlightedOverlay")}catch{}},10758:(e,t,n)=>{n.d(t,{K:()=>r,Z:()=>l});var i=n(85893);function r(e,t,n){let i=e.threadsData?.totalCount||0,r=t.threadsData?.totalCount||0;if(0===i&&0===r)return;let l=e.threadsData?.threads?.[0]?.commentsData.comments?.[0]?.author?.login||"",a=t.threadsData?.threads?.[0]?.commentsData.comments?.[0]?.author?.login||"",o="";1===i?o=`has conversation started by @${l}.`:i>1&&(o="has conversations.");let s="";1===r?s=`has conversation started by @${a}.`:r>1&&(s="has conversations.");let d="";if("LEFT"===n){let e=`${o.charAt(0).toUpperCase()}${o.slice(1)}`,t=`${s.length>1?"Modified line":""} ${s}`;d=`${e} ${t}`}else{let e=`${s.charAt(0).toUpperCase()}${s.slice(1)}`,t=`${o.length>1?"Original line":""} ${o}`;d=`${e} ${t}`}return d}function l({summary:e}){return""===e?null:(0,i.jsx)("div",{className:"sr-only","data-testid":"pr-diffline-summary",children:e.trimStart().trimEnd()})}try{l.displayName||(l.displayName="DiffLineScreenReaderSummary")}catch{}},33899:(e,t,n)=>{n.d(t,{Ft:()=>x,Th:()=>y,ug:()=>w});var i=n(85893),r=n(11534),l=n(71657),a=n(73942),o=n(85529),s=n(52972),d=n(67294),c=n(81684),u=n(21469),f=n(77666),h=n(25452),m=n(61402),g=n(62974),p=n(68306);function x({showStartConversation:e,copilotChatReferenceData:t,handleViewMarkersSelection:n,startConversationCurrentLine:r,startConversationWithSuggestedChange:l}){return(0,i.jsxs)(i.Fragment,{children:[e&&(0,i.jsx)(p.F,{handleStartConversation:r,handleStartConversationWithSuggestedChange:l}),(0,i.jsx)(v,{handleViewMarkersSelection:n}),(0,i.jsx)(b,{copilotChatReferenceData:t}),(0,i.jsx)(S,{}),(0,i.jsx)(C,{}),(0,i.jsx)(a.hj,{commandId:"pull-requests-diff-view:copy-anchor-link",leadingVisual:(0,i.jsx)(o.LinkIcon,{})}),(0,i.jsx)(L,{}),(0,i.jsx)(w,{})]})}function y(){return(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)(L,{}),(0,i.jsx)(C,{})]})}let b=({copilotChatReferenceData:e})=>{let{diffEntryId:t}=(0,u.b)(),{subjectId:n,oldCommitOid:l,newCommitOid:a}=(0,c.Y)(),{selectedDiffRowRange:o}=(0,h.h)(),s=(0,d.useMemo)(()=>e&&n&&l&&a?{referenceData:e,queryVariables:{pullRequestId:n,startOid:l,endOid:a}}:t&&n&&l&&a?{queryVariables:{diffEntryId:t,pullRequestId:n,startOid:l,endOid:a}}:void 0,[t,a,l,n,e]);return s?(0,i.jsx)(r.y,{selectedRange:o,...s}):null};function C(){let{fileAnchor:e}=(0,u.b)();return(0,i.jsxs)(s.S.Item,{onSelect:()=>{setTimeout(()=>{document.querySelector(`table[data-diff-anchor="${e}"]`)?.dispatchEvent(new KeyboardEvent("keydown",{key:"a",code:"KeyA",ctrlKey:!0}))})},children:[(0,i.jsx)(s.S.LeadingVisual,{children:(0,i.jsx)(o.MultiSelectIcon,{})}),"Select all",(0,i.jsx)(s.S.TrailingVisual,{children:(0,i.jsx)(l.u,{keys:"Mod+a"})})]})}function v({handleViewMarkersSelection:e}){let{commentingEnabled:t}=(0,c.Y)(),{isSplit:n}=(0,u.b)();return t?n?(0,i.jsx)(N,{handleViewMarkersSelection:e}):(0,i.jsx)(j,{onSelect:()=>e()}):null}function N({handleViewMarkersSelection:e}){let{originalLineHasThreads:t,modifiedLineHasThreads:n,isLeftSide:r}=(0,u.b)(),{annotations:l}=(0,f.N)(),a=l.length>0;return r?(0,i.jsxs)(i.Fragment,{children:[t&&(0,i.jsx)(k,{text:"View markers",onSelect:()=>e("LEFT")}),(n||a)&&(0,i.jsx)(k,{text:"View markers, modified line",onSelect:()=>e("RIGHT")})]}):(0,i.jsxs)(i.Fragment,{children:[(n||a)&&(0,i.jsx)(k,{text:"View markers",onSelect:()=>e("RIGHT")}),t&&(0,i.jsx)(k,{text:"View markers, original line",onSelect:()=>e("LEFT")})]})}function j({onSelect:e}){let{ghostUser:t}=(0,c.Y)(),{diffLine:n}=(0,u.b)(),{annotations:r}=(0,f.N)();return n&&(0,m.H)(n.threadsData,t).length>0||r.length>0?(0,i.jsx)(k,{text:"View markers",onSelect:()=>e()}):null}function k({onSelect:e,text:t}){return(0,i.jsxs)(s.S.Item,{onSelect:e,children:[(0,i.jsx)(s.S.LeadingVisual,{children:(0,i.jsx)(o.CommentDiscussionIcon,{})}),t]})}function S(){return(0,i.jsx)("div",{onMouseDown:e=>{window.getSelection()?.toString()!==""&&e.preventDefault()},children:(0,i.jsx)(a.hj,{commandId:"pull-requests-diff-view:copy-code",leadingVisual:(0,i.jsx)(o.CopyIcon,{})})})}function L(){let{canExpandStartOfHunk:e,canExpandEndOfHunk:t}=(0,g.Z)();return(0,i.jsxs)(i.Fragment,{children:[e&&(0,i.jsx)(a.hj,{commandId:"pull-requests-diff-view:expand-hunk-up",leadingVisual:(0,i.jsx)(o.FoldUpIcon,{})}),t&&(0,i.jsx)(a.hj,{commandId:"pull-requests-diff-view:expand-hunk-down",leadingVisual:(0,i.jsx)(o.FoldDownIcon,{})})]})}function w(){let{previousHunk:e,nextHunk:t}=(0,u.b)(),{fileAnchor:n}=(0,u.b)();return(0,i.jsxs)(i.Fragment,{children:[t?(0,i.jsxs)(s.S.Item,{"aria-keyshortcuts":"PageDown",onSelect:()=>{setTimeout(()=>{document.querySelector(`table[data-diff-anchor="${n}"]`)?.dispatchEvent(new KeyboardEvent("keydown",{key:"PageDown"}))})},children:[(0,i.jsx)(s.S.LeadingVisual,{children:(0,i.jsx)(o.MoveToBottomIcon,{})}),"Go to next hunk",(0,i.jsx)(s.S.TrailingVisual,{children:"Page Down"})]}):null,e?(0,i.jsxs)(s.S.Item,{"aria-keyshortcuts":"PageUp",onSelect:()=>{setTimeout(()=>{document.querySelector(`table[data-diff-anchor="${n}"]`)?.dispatchEvent(new KeyboardEvent("keydown",{key:"PageUp"}))})},children:[(0,i.jsx)(s.S.LeadingVisual,{children:(0,i.jsx)(o.MoveToTopIcon,{})}),"Go to previous hunk",(0,i.jsx)(s.S.TrailingVisual,{children:"Page Up"})]}):null]})}try{x.displayName||(x.displayName="CellContextMenu")}catch{}try{y.displayName||(y.displayName="EmptyCellContextMenu")}catch{}try{b.displayName||(b.displayName="CopilotListItems")}catch{}try{C.displayName||(C.displayName="SelectAllListItem")}catch{}try{v.displayName||(v.displayName="ViewMarkerListItems")}catch{}try{N.displayName||(N.displayName="SplitDiffMarkersListItems")}catch{}try{j.displayName||(j.displayName="UnifiedDiffMarkerListItem")}catch{}try{k.displayName||(k.displayName="MarkerListItem")}catch{}try{S.displayName||(S.displayName="CopyContentListItems")}catch{}try{L.displayName||(L.displayName="ExpandHunksListItems")}catch{}try{w.displayName||(w.displayName="JumpToHunkListItems")}catch{}},78591:(e,t,n)=>{n.d(t,{EQ:()=>_,Hq:()=>H,_X:()=>M,c8:()=>Z});var i=n(85893),r=n(66655),l=n(22278),a=n(27916),o=n(6458),s=n(73942),d=n(59786),c=n(85529),u=n(86010),f=n(67294),h=n(81684),m=n(21469),g=n(77666),p=n(25452),x=n(12316),y=n(88486),b=n(75694),C=n(60925),v=n(62974),N=n(60229),j=n(9009),k=n(77158),S=n(56327),L=n(33899),w=n(72882),D=n(35732),E=n(52972),R=n(30377),I=n(10758);function T(e){let{rowId:t}=(0,m.b)();if(t)return(0,x.nb)(t,e)}function F(e,t){let{selectedDiffRowRange:n}=(0,p.h)();return(0,f.useMemo)(()=>{let i="Add a comment to",r=!!n&&n.startLineNumber!==n.endLineNumber;if(n&&r){let e={left:"L",right:"R"},t=e[n.startOrientation],r=e[n.endOrientation];i+=n.startLineNumber!==n.endLineNumber?` lines ${t}${n.startLineNumber} to ${r}${n.endLineNumber}`:` line ${t}${n.startLineNumber}`}else{let n=t&&!(0,x.FY)(e)?"L":"R";i+=` line ${n}${e.blobLineNumber}`}return i},[e,t,n])}let A=(0,f.forwardRef)(function({children:e,ContextMenu:t,className:n,columnIndex:r,handleDiffCellClick:a,handleDiffSideCellSelectionBlocking:o,lineAnchor:c,commentDialogOpen:u,startConversation:h,...g},y){let{diffLine:C,isRowSelected:N,isLeftSide:j,isSplit:k}=(0,m.b)(),S=(0,f.useRef)(null);(0,f.useImperativeHandle)(y,()=>S.current,[]);let[L,w]=(0,f.useState)(!1),{clearSelectedDiffRowRange:R,selectedDiffRowRange:I}=(0,p.h)(),{fileAnchor:F,filePath:A}=(0,m.b)(),{expandStartOfHunk:O,expandEndOfHunk:M,expandEndOfPreviousHunk:_}=(0,v.Z)(),{getUnifiedDiffLineCode:H,getSplitDiffSingleLineCode:Z,getSplitDiffMultiLineCode:B}=(0,b.q)(F),P=(0,f.useRef)(null),U=(0,d.U)(e=>{if(!e.target)return;let t=e.target;!L||P.current?.contains(t)||S.current?.contains(t)||2!==e.button?S.current?.contains(t)&&e.target.closest("button")?.contains(t)&&w(!1):w(!1)});(0,f.useEffect)(()=>{L?document.addEventListener("mousedown",U):document.removeEventListener("mousedown",U)},[U,L]),(0,f.useEffect)(()=>()=>document.removeEventListener("mousedown",U),[]);let $=()=>!!document.getElementById("conversation-dialog"),W=()=>!(u||L||$())&&(!N&&I&&R(),w(!0),!0),V=(0,f.useCallback)(e=>{e.shiftKey&&e.preventDefault(),o?.(e)},[o]);return(0,i.jsxs)(s.FU,{as:"td",commands:{"github:open-context-menu":W,"pull-requests-diff-view:copy-code":()=>{let e=window.getSelection();if(e&&""!==e.toString()){document.execCommand("copy");return}if(k){void 0===I||I?.startOrientation===I?.endOrientation&&I?.startLineNumber===I?.endLineNumber?(0,l.z)(Z(j?"left":"right",j?C?.left:C?.right)):(0,l.z)(B(j?"left":"right"));return}(0,l.z)(H())},"pull-requests-diff-view:expand-all-hunks":()=>{let e=document.querySelector(`.js-expand-all-difflines-button[data-file-path="${A}"]`);e?.dispatchEvent(new MouseEvent("click",{bubbles:!0,cancelable:!0}))},"pull-requests-diff-view:expand-hunk-up":O,"pull-requests-diff-view:expand-hunk-down":()=>{if(C?.type==="HUNK"){_();return}M()},"pull-requests-diff-view:copy-anchor-link":()=>{let e=(0,x.K8)({line:C,range:I,fileAnchor:F});e&&(0,l.z)(e)},"pull-requests-diff-view:start-conversation-current":h},ref:S,"data-grid-cell-id":T(r),"data-line-anchor":c,"data-selected":N,role:"gridcell",style:{userSelect:"none",position:"relative"},tabIndex:-1,valign:"top",className:n?`focusable-grid-cell ${n} ${r<3?"left-side":""}`:"focusable-grid-cell",onBlur:e=>e.target.ariaSelected="false",onClick:a,onContextMenu:e=>{W()&&e.preventDefault()},onFocus:e=>e.target.ariaSelected="true",onMouseDown:V,...g,children:[e,t&&L&&(0,i.jsx)(D.P,{anchorRef:S,open:!0,onOpenChange:w,children:(0,i.jsx)(D.P.Overlay,{width:e?"medium":"small",children:(0,i.jsx)(E.S,{children:t})})})]})});function O(){return(0,i.jsx)("div",{className:"hunk-kebab-icon pr-2 pb-1",children:(0,i.jsx)(c.KebabHorizontalIcon,{})})}function M({summary:e,searchResultsForLine:t,focusedSearchResult:n,columnIndex:l,lineAnchor:s,handleDiffCellClick:d,handleDiffSideCellSelectionBlocking:c,filePath:b,tabSize:v,copilotChatReferenceData:N}){let{diffLine:D,fileAnchor:E,isLeftSide:O}=(0,m.b)(),{getTextIndent:M,getPaddingLeft:_}=(0,f.useMemo)(()=>(0,a.pE)(D.text,v),[D,v]),[H,Z]=(0,x.Tb)(D.html,D.type),P=Z&&["+","-"].includes(Z),{isActionBarVisible:U}=(0,g.N)(),{selectedDiffRowRange:$,selectedDiffLines:W}=(0,p.h)(),{commentBatchPending:V,commentingEnabled:q,commentingImplementation:G,markerNavigationImplementation:z,repositoryId:K,subjectId:Q,subject:X,viewerData:Y}=(0,h.Y)(),{hasPersistedComment:J}=(0,r.uN)({diffSide:O?"LEFT":"RIGHT",filePath:b,line:D.blobLineNumber,subjectId:Q,fileLevelComment:!1}),ee=(0,f.useMemo)(()=>{var e;return e=Y.viewerCanComment,q&&e&&(0,x.$D)(D,W)},[q,Y,D,W]),et=(0,f.useRef)(null),en=(0,f.useRef)(null),ei=(0,x.uJ)({shouldAlignRight:J||!ee}),er=!!D.threadsData?.threads?.length||!!D.annotationsData?.annotations?.length,el=(0,x.FE)({hasThreads:er}),ea=F(D,!!O),eo=T(l),{handleCellBlur:es,handleCellFocus:ed,handleCellMouseEnter:ec,handleCellMouseLeave:eu}=(0,C.l)({cellRef:en}),{annotations:ef,isNewConversationDialogOpen:eh,shouldStartNewConversationWithSuggestedChange:em,startNewConversation:eg,startNewConversationWithSuggestedChange:ep,openMarkerOrListDialog:ex,selectAnnotation:ey,selectThread:eb,isMarkerListDialogOpen:eC,closeNewConversationDialog:ev,closeMarkerListDialog:eN,closeConversationDetailsDialog:ej,returnFocusRef:ek,optimizedSelectedAnnotationId:eS,optimizedSelectedThreadId:eL,threadConnectionId:ew,threads:eD}=(0,y.t)({cellId:eo,actionBarRef:et});(0,f.useEffect)(()=>{if(!z)return;let{activeGlobalMarkerID:e,onActivateGlobalMarkerNavigation:t}=z;if(e){let n=eD.map(e=>e.id),i=ef.map(e=>e.id);n.includes(e)?(eb(e,{skipLineSelection:!0}),t()):i.includes(e)&&(ey(e,{skipLineSelection:!0}),t())}},[eb,eD,z,ef,ey]);let eE=(0,j.C)(G?.suggestedChangesEnabled,D,em),eR=(0,f.useRef)(!0),{ghostUser:eI}=(0,h.Y)();return(0,i.jsxs)(A,{ref:en,columnIndex:l,commentDialogOpen:eh,handleDiffCellClick:d,handleDiffSideCellSelectionBlocking:c,lineAnchor:s,startConversation:eg,ContextMenu:(0,i.jsx)(L.Ft,{copilotChatReferenceData:N,showStartConversation:ee,handleViewMarkersSelection:ex,startConversationCurrentLine:eg,startConversationWithSuggestedChange:ep}),className:(0,u.W)(`diff-text-cell ${O?"left-side-diff-cell":"right-side-diff-cell"}`,{"border-right":O&&"HUNK"!==D.type}),style:{backgroundColor:B(D.type,!1),paddingRight:el},onBlur:es,onFocus:ed,onMouseEnter:ec,onMouseLeave:eu,children:[(0,i.jsxs)("code",{className:(0,u.W)("diff-text syntax-highlighted-line",{addition:"ADDITION"===D.type,deletion:"DELETION"===D.type}),children:[P&&(0,i.jsx)("span",{className:"diff-text-marker",children:Z}),t&&t.length>0&&(0,i.jsx)(R.M,{searchResults:t,focusedSearchResult:n,className:(0,u.W)("diff-text-inner",{"color-fg-muted":"HUNK"===D.type}),styleObject:{paddingLeft:_(),textIndent:M()}}),(0,i.jsx)(o.sF,{html:H,className:(0,u.W)("diff-text-inner",{"color-fg-muted":"HUNK"===D.type}),style:{paddingLeft:_(),textIndent:M()}})]}),U&&(0,i.jsx)(k.o,{copilotChatReferenceData:N,authorAvatarUrl:Y.avatarUrl,authorLogin:Y.login,ref:et,cellId:eo,cellRef:en,hasDraftComment:J,showStartConversation:ee}),G&&z&&(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)(r.sR,{annotations:ef,batchPending:V,batchingEnabled:G.batchingEnabled,commentingImplementation:{...G,deleteComment:({onCompleted:e,...t})=>{G&&D&&G.deleteComment({...t,onCompleted:()=>{e?.(),eD.length<=1&&(ej(),setTimeout(()=>en.current?.focus()))},filePath:b})}},conversationAnchorRef:en,conversationListAnchorRef:ek,conversationListThreads:eD,fileAnchor:E,filePath:b,isMarkerListOpen:eC,repositoryId:K,returnFocusRef:ek,selectedAnnotationId:eS,selectedThreadId:eL,subjectId:Q,subject:X,suggestedChangesConfig:eE,threadsConnectionId:ew,onCloseConversationDialog:ej,onCloseConversationList:eN,onAnnotationSelected:ey,onThreadSelected:eb,markerNavigationImplementation:z,viewerData:Y,ghostUser:eI}),(0,i.jsx)(r.VM,{addCommentDialogTitle:ea,anchorRef:en,batchPending:V,batchingEnabled:G.batchingEnabled,commentBoxConfig:G.commentBoxConfig,filePath:b,isLeftSide:!!O,isOpen:eh,lineNumber:D.blobLineNumber,repositoryId:K,returnFocusRef:ek,subjectId:Q,suggestedChangesConfig:eE,threadsConnectionId:ew,viewerData:Y,onAddComment:({onCompleted:e,threadsConnectionId:t,...n})=>{if(!G||!D)return;let{leftLines:i,rightLines:r}=W;if($){let e="left"===$.endOrientation?i:r,n=e[e.length-1];n&&(0,x.R8)(n)&&n.threadsData?.__id&&(t=n.threadsData?.__id)}G.addThread({...n,diffLine:D,isLeftSide:O,selectedDiffRowRange:$,threadsConnectionId:t,onCompleted:(t,n)=>{e?.(t,n),eb(t)}})},onCloseCommentDialog:ev})]}),!U&&(0,i.jsxs)("div",{"aria-hidden":"true",style:{right:ei},className:"position-absolute top-0 d-flex user-select-none",children:[(0,i.jsx)(S.Z,{shouldAnimateRef:eR}),J&&(0,i.jsx)(w.W,{authorAvatarUrl:Y.avatarUrl,authorLogin:Y.login,sx:{ml:"9px",mt:"2px",height:"20px"}})]}),e&&(0,i.jsx)(I.Z,{summary:e})]})}function _({children:e,columnIndex:t,handleDiffCellClick:n,handleDiffSideCellSelectionBlocking:l,filePath:a,copilotChatReferenceData:o,...s}){let d=(0,f.useRef)(null),c=T(t),{commentBatchPending:u,commentingEnabled:g,commentingImplementation:b,repositoryId:v,subject:N,subjectId:k,markerNavigationImplementation:S,viewerData:w}=(0,h.Y)(),{diffLine:D,fileAnchor:E,isLeftSide:R}=(0,m.b)(),{selectedDiffRowRange:I,selectedDiffLines:O}=(0,p.h)(),M=F(D,!!R),_=(0,f.useMemo)(()=>{var e;return e=w.viewerCanComment,g&&e&&(0,x.$D)(D,O)},[g,w,D,O]),{handleCellBlur:H,handleCellFocus:Z,handleCellMouseEnter:P,handleCellMouseLeave:U}=(0,C.l)({cellRef:d}),{ghostUser:$}=(0,h.Y)(),{annotations:W,isNewConversationDialogOpen:V,shouldStartNewConversationWithSuggestedChange:q,startNewConversation:G,startNewConversationWithSuggestedChange:z,openMarkerOrListDialog:K,isMarkerListDialogOpen:Q,closeConversationDetailsDialog:X,closeMarkerListDialog:Y,selectAnnotation:J,selectThread:ee,closeNewConversationDialog:et,returnFocusRef:en,optimizedSelectedThreadId:ei,optimizedSelectedAnnotationId:er,threadConnectionId:el,threads:ea}=(0,y.t)({cellId:c,actionBarRef:d}),eo=(0,j.C)(b?.suggestedChangesEnabled,D,q);return(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)(A,{ref:d,className:"diff-line-number",columnIndex:t,commentDialogOpen:V,handleDiffCellClick:n,handleDiffSideCellSelectionBlocking:l,startConversation:G,style:{backgroundColor:B(D.type,!0),textAlign:"center"},ContextMenu:(0,i.jsx)(L.Ft,{copilotChatReferenceData:o,showStartConversation:_,handleViewMarkersSelection:K,startConversationCurrentLine:G,startConversationWithSuggestedChange:z}),onBlur:H,onFocus:Z,onMouseEnter:P,onMouseLeave:U,...s,children:(0,i.jsx)("code",{children:e})}),b&&S&&(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)(r.sR,{annotations:W,batchPending:u,batchingEnabled:b.batchingEnabled,commentingImplementation:{...b,deleteComment:({onCompleted:e,...t})=>{b&&D&&b.deleteComment({...t,onCompleted:()=>{e?.(),ea.length<=1&&(X(),setTimeout(()=>d.current?.focus()))},filePath:a})}},conversationAnchorRef:d,conversationListAnchorRef:en,conversationListThreads:ea,fileAnchor:E,filePath:a,isMarkerListOpen:Q,repositoryId:v,returnFocusRef:en,selectedAnnotationId:er,selectedThreadId:ei,subjectId:k,subject:N,suggestedChangesConfig:eo,threadsConnectionId:el,markerNavigationImplementation:S,onCloseConversationDialog:X,onCloseConversationList:Y,onThreadSelected:ee,onAnnotationSelected:J,viewerData:w,ghostUser:$}),(0,i.jsx)(r.VM,{addCommentDialogTitle:M,align:"start",anchorRef:d,batchPending:u,batchingEnabled:b.batchingEnabled,commentBoxConfig:b.commentBoxConfig,filePath:a,isLeftSide:!!R,isOpen:V,lineNumber:D.blobLineNumber,repositoryId:v,returnFocusRef:en,subjectId:k,suggestedChangesConfig:eo,threadsConnectionId:el,viewerData:w,onAddComment:({onCompleted:e,threadsConnectionId:t,...n})=>{if(!b||!D)return;let{leftLines:i,rightLines:r}=O;if(I){let e="left"===I.endOrientation?i:r,n=e[e.length-1];n&&(0,x.R8)(n)&&n.threadsData?.__id&&(t=n.threadsData?.__id)}b.addThread({...n,diffLine:D,selectedDiffRowRange:I,threadsConnectionId:t,onCompleted:(t,n)=>{e?.(t,n),ee(t)}})},onCloseCommentDialog:et})]})]})}function H({ContextMenu:e,renderHunkButton:t,searchResultsForLine:n,focusedSearchResult:r}){let l=(0,f.useRef)(null),[a,s]=function(e){let[t,n]=(0,f.useState)(!1),[i,r]=(0,f.useState)(!1),l=(0,f.useCallback)(t=>{e.current&&e.current.contains(t.relatedTarget)||n(!1)},[e]),a=(0,f.useCallback)(()=>{e.current===document.activeElement&&n(!0)},[e]),o=(0,f.useCallback)(t=>{e.current&&!e.current.contains(t.relatedTarget)&&n(!1),r(!1)},[e]);return[{onFocus:a,onBlur:l},{"aria-hidden":!i,tabIndex:t?0:-1,onBlur:o,onFocusCapture:(0,f.useCallback)(e=>{e.stopPropagation(),r(!0)},[]),onKeyDownCapture:(0,f.useCallback)(e=>{(0,N.t)(e.key)&&e.stopPropagation()},[])}]}(l),{diffLine:d}=(0,m.b)();return(0,i.jsx)(A,{ref:l,ContextMenu:e,colSpan:4,columnIndex:0,style:{backgroundColor:"var(--bgColor-accent-muted, var(--color-accent-subtle))",flexGrow:1},...a,children:(0,i.jsxs)("div",{className:"d-flex flex-row",children:[t?.(s)??(0,i.jsx)(O,{}),(0,i.jsxs)("code",{className:"diff-text-cell hunk",children:[n&&n.length>0&&(0,i.jsx)(R.M,{searchResults:n,focusedSearchResult:r,className:(0,u.W)("diff-text-inner",{"color-fg-muted":"HUNK"===d.type})}),(0,i.jsx)(o.sF,{className:"diff-text-inner color-fg-muted",html:d.html})]})]})})}function Z({columnIndex:e,showRightBorder:t}){return(0,i.jsx)(A,{ContextMenu:(0,i.jsx)(L.Th,{}),className:(0,u.W)("empty-diff-line",{"border-right":t}),columnIndex:e})}function B(e,t=!1){switch(e){case"ADDITION":return t?"var(--diffBlob-addition-bgColor-num, var(--color-diff-blob-addition-num-bg))":"var(--diffBlob-addition-bgColor-line, var(--color-diff-blob-addition-line-bg))";case"DELETION":return t?"var(--diffBlob-deletion-bgColor-num, var(--color-diff-blob-deletion-num-bg))":"var(--diffBlob-deletion-bgColor-line, var(--color-diff-blob-deletion-line-bg))";case"HUNK":case"EMPTY":return t?"var(--diffBlob-hunk-bgColor-num, var(--color-diff-blob-hunk-num-bg))":"var(--bgColor-accent-muted, var(--color-accent-subtle))";default:return}}try{A.displayName||(A.displayName="Cell")}catch{}try{O.displayName||(O.displayName="HunkKebabIcon")}catch{}try{M.displayName||(M.displayName="ContentCell")}catch{}try{_.displayName||(_.displayName="LineNumberCell")}catch{}try{H.displayName||(H.displayName="HunkCell")}catch{}try{Z.displayName||(Z.displayName="EmptyCell")}catch{}},26441:(e,t,n)=>{n.d(t,{EA:()=>h,jo:()=>m});var i=n(85893),r=n(9770),l=n(67294),a=n(78591),o=n(77666),s=n(81684),d=n(21469),c=n(12316);let u=({summary:e,resultsForLine:t,focusedSearchResult:n,handleDiffSideCellSelectionBlocking:r,handleDiffRowClick:c,lineAnchor:u,filePath:f,copilotChatReferenceData:h})=>{let{diffLine:m,isLeftSide:g,isSplit:p}=(0,d.b)(),{viewerData:x}=(0,s.Y)(),{tabSizePreference:y}=x,b="ADDITION"!==m.type,C=!p||g,v=C&&!b,N="DELETION"!==m.type,j=!p||!g,k=j&&!N,S=(0,l.useCallback)(e=>{m.left&&c(e,m.left,"left",e.shiftKey)},[c,m.left]),L=(0,l.useCallback)(e=>{m.right&&c(e,m.right,"right",e.shiftKey)},[c,m.right]),w=(0,l.useCallback)(()=>{r&&r("left")},[r]),D=(0,l.useCallback)(()=>{r&&r("right")},[r]);return(0,i.jsxs)(o.g,{line:m,children:[C&&(0,i.jsx)(a.EQ,{copilotChatReferenceData:h,columnIndex:0,filePath:f,handleDiffCellClick:v?L:S,handleDiffSideCellSelectionBlocking:D,children:b&&m.left}),j&&(0,i.jsx)(a.EQ,{copilotChatReferenceData:h,columnIndex:p?2:1,filePath:f,handleDiffCellClick:k?S:L,handleDiffSideCellSelectionBlocking:w,children:N&&m.right}),(0,i.jsx)(a._X,{copilotChatReferenceData:h,columnIndex:p?g?1:3:2,filePath:f,handleDiffCellClick:g?S:L,lineAnchor:u,tabSize:y,handleDiffSideCellSelectionBlocking:g?D:w,searchResultsForLine:t,focusedSearchResult:n,summary:e})]})},f=({summary:e,resultsForLine:t,focusedSearchResult:n,fileAnchor:l,filePath:o,handleDiffRowClick:s,handleDiffSideCellSelectionBlocking:u,copilotChatReferenceData:f})=>{let{diffLine:h,isLeftSide:g}=(0,d.b)();if((0,c.Ok)(h))return(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)(a.c8,{columnIndex:g?0:2}),(0,i.jsx)(a.c8,{columnIndex:g?1:3,showRightBorder:g})]});let p=g?"left":(0,r.Jn)(h.type),x="left"===p?h.left:h.right,y=(0,r._N)(l,p,x??0);switch(h.type){case"HUNK":return null;case"ADDITION":case"DELETION":case"CONTEXT":case"INJECTED_CONTEXT":return(0,i.jsx)(m,{copilotChatReferenceData:f,filePath:o,handleDiffRowClick:s,handleDiffSideCellSelectionBlocking:u,lineAnchor:y,resultsForLine:t,focusedSearchResult:n,summary:e});default:throw Error(`cannot handle type ${h.type}`)}},h=l.memo(f),m=l.memo(u);try{u.displayName||(u.displayName="CodeDiffLineUnmemoized")}catch{}try{f.displayName||(f.displayName="DiffLineSideUnmemoized")}catch{}try{h.displayName||(h.displayName="DiffLineSide")}catch{}try{m.displayName||(m.displayName="CodeDiffLine")}catch{}},55381:(e,t,n)=>{n.d(t,{Q:()=>N});var i=n(85893),r=n(28901),l=n(27916),a=n(9770),o=n(73290),s=n(67294),d=n(25452),c=n(12316),u=n(2374),f=n(27490),h=n(92156),m=n(84409),g=n(98102),p=n(81684),x=n(1685),y=n(83888),b=n(86010),C=n(84669);function v({diffAnchor:e,children:t}){return(0,i.jsx)("div",{className:"fgColor-muted p-2","data-diff-anchor":e,children:t})}let N=(0,s.memo)(function({searchResults:e,focusedSearchResult:t,diffEntryData:n,diffLinesManuallyUnhidden:N,baseHelpUrl:j,onHandleLoadDiff:k,copilotChatReferenceData:S,...L}){let w=(0,s.useRef)(null),[D,E]=(0,s.useState)(null),R=n.newTreeEntry?.lineCount??n.oldTreeEntry?.lineCount??0,I=(0,s.useMemo)(()=>{let e=n.diffLines[n.diffLines.length-1];return e?.blobLineNumber&&e.blobLineNumber<R?n.diffLines.concat({__id:f.u1.finalLineId,blobLineNumber:e.blobLineNumber+1,left:null,right:null,type:"HUNK",html:"",text:""}):n.diffLines},[n.diffLines,R]),{diffViewPreference:T,tabSizePreference:F}=L.viewerData,{selectedDiffRowRange:A,replaceSelectedDiffRowRange:O,replaceSelectedDiffRowRangeFromGridCells:M,clearSelectedDiffRowRange:_,updateDiffLines:H,updateSelectedDiffRowRange:Z}=(0,d.h)(),B=`diff-${n.pathDigest}`,P=B===A?.diffAnchor;(0,s.useEffect)(()=>{if(!P)return;let e=(0,c.VB)(A,I);e&&e!==A&&O(e)},[I,A,P,O]);let U=C.iG?.location.search,$=(0,s.useMemo)(()=>"split"===new URLSearchParams(U).get("diff")||"split"===T,[U,T]),W=(0,a.Gi)(I),V=(0,s.useCallback)(e=>{E(e)},[E]),q=(0,s.useCallback)((e,t,n,i)=>{!(0,x.H)(e.target)&&(e.defaultPrevented||Z(B,t,n,i))},[B,Z]);if(n.isBinary)return(0,i.jsx)(v,{diffAnchor:B,children:"Binary file not shown."});if((0,r.PW)(n))return(0,i.jsx)(v,{diffAnchor:B,children:"File renamed without changes."});if((0,r.vY)(n))return(0,i.jsx)(v,{diffAnchor:B,children:"File copied without changes."});if((0,r.DC)(n.status,n.oldTreeEntry?.mode,n.newTreeEntry?.mode))return(0,i.jsx)(v,{diffAnchor:B,children:"File mode changed."});if((0,r.V_)(n))return(0,i.jsx)(v,{diffAnchor:B,children:(0,r.zR)(n.truncatedReason)});if((0,r._R)(n))return(0,i.jsx)(v,{diffAnchor:B,children:"Whitespace-only changes."});if(!N&&(0,r.eb)(n))return(0,i.jsx)(u.Z,{onLoadDiff:k,children:"This file was deleted."});if(!N&&(0,r.l3)(n))return(0,i.jsxs)(u.Z,{helpText:"customizing how changed files appear on GitHub.",helpUrl:`${j}/github/administering-a-repository/customizing-how-changed-files-appear-on-github`,onLoadDiff:k,children:["Some generated files are not rendered by default. Learn more about"," "]});if(N&&n.isTooBig&&0===n.diffLines.length)return(0,i.jsxs)(v,{diffAnchor:B,children:["Diff is too big to render. To view,"," ",(0,i.jsx)(o.Z,{inline:!0,href:`${j}/pull-requests/collaborating-with-pull-requests/reviewing-changes-in-pull-requests/checking-out-pull-requests-locally`,children:"check out this pull request locally."})]});if(!N&&n.isTooBig)return n.diffLines.length>0?(0,i.jsx)(u.Z,{onLoadDiff:k,children:"Large diffs are not rendered by default."}):(0,i.jsxs)(v,{diffAnchor:B,children:["Diff is too big to render. To view,"," ",(0,i.jsx)(o.Z,{inline:!0,href:`${j}/pull-requests/collaborating-with-pull-requests/reviewing-changes-in-pull-requests/checking-out-pull-requests-locally`,children:"check out this pull request locally."})]});let G={searchResults:e,focusedSearchResult:t,clearSelectedDiffRowRange:_,diffEntryId:n.objectId,diffLines:I,fileAnchor:B,fileLineCount:R,filePath:n.path,handleDiffRowClick:q,handleDiffSideCellSelectionBlocking:V,replaceSelectedDiffRowRangeFromGridCells:M,selectedDiffRowRange:P?A:null,tableRef:w,updateDiffLines:H,updateSelectedDiffRowRange:Z,copilotChatReferenceData:S};return n.diffLines?(0,i.jsxs)(p.O,{...L,children:[P&&(0,i.jsx)(h.Q,{selectedLineRange:A,tableRef:w}),(0,i.jsx)("table",{ref:w,className:(0,b.Z)("tab-size","width-full",y.Z.tableLayoutFixed),"data-block-diff-cell-selection":D,"data-diff-anchor":B,"data-tab-size":F,"data-testid":"diff-content","data-paste-markdown-skip":!0,role:"grid",style:{"--line-number-cell-width":`${W}px`},children:$?(0,i.jsx)(l.iZ,{lineWidth:W,children:(0,i.jsx)(m.Z,{...G})}):(0,i.jsx)(l.wj,{lineWidth:W,children:(0,i.jsx)(g.Z,{...G})})})]}):null});try{v.displayName||(v.displayName="PlainTextStatus")}catch{}try{N.displayName||(N.displayName="DiffLines")}catch{}},72191:(e,t,n)=>{n.d(t,{Z:()=>y});var i=n(85893),r=n(86010),l=n(22278),a=n(88344),o=n(85529),s=n(35732),d=n(52972),c=n(67294),u=n(21469),f=n(12316),h=n(62974),m=n(33899),g=n(78591),p=n(30543);function x({direction:e,icon:t,label:n,onClick:l,ariaLabel:o,className:s,...d}){let{sendAnalyticsEvent:c}=(0,a.z)();return(0,i.jsx)("button",{onClick:()=>{l(),c("file_entry.expand_hunk","FILE_EXPANDER_BUTTON")},className:(0,r.Z)("Button Button--iconOnly Button--invisible",p.Z["expand-button-line"],s),"aria-label":o??n,"data-direction":e,...d,children:(0,i.jsx)(t,{})})}function y({nextLine:e,prevLine:t,resultsForLine:n,focusedSearchResult:r}){let{fileLineCount:a,diffLine:s}=(0,u.b)(),{expandStartOfHunk:d,expandEndOfPreviousHunk:m}=(0,h.Z)(),y=!t,C=!e,v=0===s.blobLineNumber,N=y||C,j=C&&s.blobLineNumber===a,k=(0,c.useMemo)(()=>!N&&!(s.blobLineNumber<=0)&&(s.blobLineNumber-t.blobLineNumber<=20||e.blobLineNumber-s.blobLineNumber>=20),[N,s,e,t]),S=(0,c.useMemo)(()=>!N&&!j&&s.blobLineNumber-t.blobLineNumber>20,[N,j,s,t]),L=(0,c.useMemo)(()=>!(s.blobLineNumber<=0)&&!v&&!!y,[y,v,s]),w=(0,c.useMemo)(()=>!y&&!j&&!!C,[y,C,j]),D=(0,c.useMemo)(()=>{switch(!0){case k:return"expand-all";case S:return"expand-up-and-down";case L:return"expand-up";case w:return"expand-down"}},[k,S,L,w]),E=()=>d(),R=()=>m(),I=()=>d();return(0,i.jsx)(g.Hq,{searchResultsForLine:n,focusedSearchResult:r,renderHunkButton:n=>{switch(D){case"expand-all":return(0,i.jsx)(x,{...n,direction:"all",icon:o.UnfoldIcon,label:`Expand file from line ${t?.blobLineNumber||""} to line ${e?.blobLineNumber||""}`,onClick:I});case"expand-up-and-down":return(0,i.jsxs)("div",{className:"d-flex flex-column",children:[(0,i.jsx)(x,{...n,direction:"down",icon:o.FoldDownIcon,label:`Expand file down from line ${t?.blobLineNumber||""}`,className:p.Z["expand-up-and-down"],onClick:R}),(0,i.jsx)(x,{...n,direction:"up",icon:o.FoldUpIcon,label:`Expand file up from line ${e?.blobLineNumber||""}`,className:p.Z["expand-up-and-down"],onClick:E})]});case"expand-up":return(0,i.jsx)(x,{...n,direction:"up",icon:o.FoldUpIcon,label:`Expand file up from line ${e?.blobLineNumber||""}`,onClick:E});case"expand-down":return(0,i.jsx)(x,{...n,direction:"down",icon:o.FoldDownIcon,label:`Expand file down from line ${t?.blobLineNumber||""}`,onClick:R});default:return null}},ContextMenu:(0,i.jsx)(b,{handleCopyContent:()=>{let[e]=(0,f.Tb)((0,f.dW)(s.html),s.type);(0,l.z)(e)},handleExpandAbove:E,handleExpandAll:I,handleExpandBelow:R,shouldCopyContent:!!s.html,shouldExpandAbove:S||L,shouldExpandBelow:S||w})})}function b({shouldExpandBelow:e,shouldExpandAbove:t,shouldCopyContent:n,handleExpandAll:r,handleExpandBelow:l,handleExpandAbove:a,handleCopyContent:c}){let u={includeShiftKey:!0,key:"["},h={key:"]"},g={key:"["},p={key:"C"};return(0,i.jsx)(s.P.Overlay,{width:"medium",children:(0,i.jsxs)(d.S,{children:[(0,i.jsxs)(d.S.Item,{"aria-keyshortcuts":(0,f.EH)(u),onSelect:r,children:[(0,i.jsx)(d.S.LeadingVisual,{children:(0,i.jsx)(o.UnfoldIcon,{})}),"Expand all",(0,i.jsx)(d.S.TrailingVisual,{children:(0,i.jsx)("span",{children:`${(0,f._k)(u)}`})})]}),t?(0,i.jsxs)(d.S.Item,{"aria-keyshortcuts":(0,f.EH)(h),onSelect:a,children:[(0,i.jsx)(d.S.LeadingVisual,{children:(0,i.jsx)(o.FoldUpIcon,{})}),"Expand above",(0,i.jsx)(d.S.TrailingVisual,{children:(0,i.jsx)("span",{children:`${(0,f._k)(h)}`})})]}):null,e?(0,i.jsxs)(d.S.Item,{"aria-keyshortcuts":(0,f.EH)(g),onSelect:l,children:[(0,i.jsx)(d.S.LeadingVisual,{children:(0,i.jsx)(o.FoldDownIcon,{})}),"Expand below",(0,i.jsx)(d.S.TrailingVisual,{children:(0,i.jsx)("span",{children:`${(0,f._k)(g)}`})})]}):null,(0,i.jsx)(m.ug,{}),n?(0,i.jsxs)(d.S.Item,{"aria-keyshortcuts":(0,f.EH)(p),onSelect:c,children:[(0,i.jsx)(d.S.LeadingVisual,{children:(0,i.jsx)(o.CopyIcon,{})}),"Copy",(0,i.jsx)(d.S.TrailingVisual,{children:(0,i.jsx)("span",{children:`${(0,f._k)(p)}`})})]}):null]})})}try{x.displayName||(x.displayName="ExpandButtonLine")}catch{}try{y.displayName||(y.displayName="ExpandableHunkHeaderDiffLine")}catch{}try{b.displayName||(b.displayName="HunkContextMenu")}catch{}},2374:(e,t,n)=>{n.d(t,{Z:()=>c});var i=n(85893),r=n(86010),l=n(88216),a=n(97011),o=n(73290),s=n(39915);function d({children:e,helpText:t,helpUrl:n,onLoadDiff:d}){let c=n&&t;return(0,i.jsx)("div",{className:"px-3 py-4 fgColor-muted",children:(0,i.jsxs)("div",{className:(0,r.Z)(s.Z.gridColumnTemplate),children:[(0,i.jsx)("svg",{"aria-hidden":!0,height:"84",style:{maxWidth:"340px"},viewBox:"0 0 340 84",xmlns:"http://www.w3.org/2000/svg",children:(0,i.jsx)("path",{clipPath:"url(#diff-placeholder)",d:"M0 0h340v84H0z",fillRule:"evenodd",style:{fill:"var(--bgColor-muted, var(--color-canvas-subtle))"}})})," ",(0,i.jsxs)("div",{className:"d-flex flex-justify-center flex-column flex-column text-center",children:[(0,i.jsx)(l.r,{className:"h4 mx-auto",variant:"invisible",onClick:()=>d(),children:"Load Diff"}),(0,i.jsxs)(a.Z,{className:"fgColor-muted mt-1",children:[e,c&&(0,i.jsx)(o.Z,{inline:!0,href:n,children:t})]})]})]})})}let c=d;try{d.displayName||(d.displayName="HiddenDiffPatch")}catch{}},72882:(e,t,n)=>{n.d(t,{W:()=>a});var i=n(85893),r=n(19467),l=n(85529);function a({authorAvatarUrl:e,authorLogin:t,sx:n}){return(0,i.jsx)(r.K,{altText:`${t}'s avatar image with pending indicator`,icon:l.DotFillIcon,iconColor:"var(--fgColor-attention, var(--color-attention-fg))",square:!1,src:e,backgroundSx:{backgroundColor:"var(--bgColor-default, var(--color-canvas-default))",boxShadow:"0 0 0 .1px var(--bgColor-default, var(--color-canvas-default))"},sx:{alignItems:"center",display:"flex",opacity:.5,...n}})}try{a.displayName||(a.displayName="InProgressCommentIndicator")}catch{}},65529:(e,t,n)=>{n.d(t,{s:()=>o});var i=n(85893),r=n(78466),l=n(6458),a=n(74121);function o({dependencyDiffPath:e,fileRendererInfo:t,proseDiffHtml:n,loading:o}){return o?(0,i.jsx)("div",{className:"d-flex flex-justify-center p-4",children:(0,i.jsx)(a.Z,{size:"large"})}):n?(0,i.jsx)("div",{className:"prose-diff position-relative",children:(0,i.jsx)(l.wB,{html:n})}):t?(0,i.jsx)(r.default,{...t}):e?(0,i.jsx)("include-fragment",{src:e,children:(0,i.jsxs)("div",{className:"text-center py-3",children:[(0,i.jsx)(a.Z,{size:"medium"}),(0,i.jsx)("p",{className:"color-fg-muted my-2",children:"Loading Dependency Review..."})]})}):(0,i.jsx)("div",{className:"d-flex flex-justify-center p-4",children:"This rich diff is not supported at the moment."})}try{o.displayName||(o.displayName="RichDiff")}catch{}},92156:(e,t,n)=>{n.d(t,{Q:()=>d});var i=n(85893),r=n(86010),l=n(95921),a=n(8930),o=n(67294),s=n(49981);function d({selectedLineRange:e,tableRef:t}){let[n,d]=(0,o.useState)(null),c=(0,o.useCallback)(()=>{if(!t.current)return;let e=t.current.querySelectorAll('td[data-selected="true"]');if(0===e.length){d(null);return}let n=(function(e){let t=e.parentNode;for(;null!==t;){if(t instanceof HTMLElement&&"static"!==getComputedStyle(t).position)return t;t=t.parentNode}return document.body})(t.current).getBoundingClientRect(),i=0,r=Number.MAX_SAFE_INTEGER,l=0,a=Number.MAX_SAFE_INTEGER;for(let t of e){let e=t.getBoundingClientRect();i=Math.max(i,e.bottom-n.top),r=Math.min(r,e.left-n.left),l=Math.max(l,e.right-n.left),a=Math.min(a,e.top-n.top)}d({left:r-1,height:i-a+2,top:a-1,width:l-r+2})},[t]);return((0,l.b)(()=>{c()},[e,t,c]),(0,a.y)(c,t),n)?(0,i.jsx)("div",{className:(0,r.Z)("position-absolute","borderColor-accent-emphasis",s.Z.overlay),style:n,children:(0,i.jsx)("div",{className:(0,r.Z)("width-full","height-full","bgColor-accent-emphasis",s.Z.overlayOpacity)})}):null}try{d.displayName||(d.displayName="SelectedDiffLinesOverlay")}catch{}},84409:(e,t,n)=>{n.d(t,{Z:()=>x});var i=n(85893),r=n(67294),l=n(21469),a=n(61402),o=n(57144),s=n(27490),d=n(12316),c=n(60229),u=n(33220),f=n(26441),h=n(72191),m=n(81684),g=n(10758);let p=(0,r.memo)(function({searchResults:e,focusedSearchResult:t,clearSelectedDiffRowRange:n,diffEntryId:p,diffLines:x,fileAnchor:y,fileLineCount:b,filePath:C,handleDiffRowClick:v,handleDiffSideCellSelectionBlocking:N,replaceSelectedDiffRowRangeFromGridCells:j,selectedDiffRowRange:k,tableRef:S,updateDiffLines:L,updateSelectedDiffRowRange:w,copilotChatReferenceData:D}){let{leftLines:E,rightLines:R}=function(e){let t=e.reduce((e,t)=>e+(t.threadsData?.totalCount??0),0)??0,{leftLines:n,rightLines:i}=(0,r.useMemo)(()=>(function(e){let t=[],n=[],i=()=>{for(;t.length<n.length;)t.push(u.s);for(;n.length<t.length;)n.push(u.s)};for(let r of e)switch(r.type){case"ADDITION":n.push(r);break;case"DELETION":t.push(r);break;case"CONTEXT":case"INJECTED_CONTEXT":i();let[e,l]=function(e){let t=e.threadsData?.threads?.filter(e=>e?.diffSide==="LEFT")??null,n={...e,threadsData:{...e.threadsData,threads:t,totalCommentsCount:t?.reduce((e,t)=>e+(t?.commentsData?.totalCount??0),0)??0,totalCount:t?.length??0},annotationsData:{totalCount:0,annotations:[]}},i=e.threadsData?.threads?.filter(e=>e?.diffSide==="RIGHT")??null;return[n,{...e,threadsData:{...e.threadsData,threads:i,totalCommentsCount:i?.reduce((e,t)=>e+(t?.commentsData?.totalCount??0),0)??0,totalCount:i?.length??0}}]}(r);t.push(e),n.push(l);break;case"HUNK":i(),t.push(r),n.push(r)}return i(),{leftLines:t,rightLines:n}})(e),[e,t]);return{leftLines:n,rightLines:i}}(x),{ghostUser:I}=(0,m.Y)();(0,c.X)({clearSelectedDiffRowRange:n,containerRef:S,fileAnchor:y,isSplitDiff:!0,leftLines:E,replaceSelectedDiffRowRangeFromGridCells:j,rightLines:R,selectedDiffRowRange:k,updateSelectedDiffRowRange:w});let T=(0,r.useMemo)(()=>{if(k)return(0,o.Z)({selectedDiffRowRange:k,leftLines:E,rightLines:R})},[k,E,R]);(0,r.useEffect)(()=>{L(y,x)},[x,y,L]);let F=(0,r.useMemo)(()=>(0,s.mi)(E),[E]),A=new Map,O=new Map,M=new Map;for(let t=0;t<(e?.length??0);t++){let n=e?.[t];n&&(A.has(n.leftLineNumber)?A.get(n.leftLineNumber)?.push(n):-1!==n.leftLineNumber&&A.set(n.leftLineNumber,[n]),M.has(n.hunkLineNumber)?M.get(n.hunkLineNumber)?.push(n):n.isHunk&&M.set(n.hunkLineNumber,[n]),O.has(n.rightLineNumber)?O.get(n.rightLineNumber)?.push(n):-1!==n.rightLineNumber&&O.set(n.rightLineNumber,[n]))}let _=[];for(let e=0;e<E.length;e++){let n=E[e],o=R[e],c=E[e-1],u=(0,d.Ok)(E[e+1])?R[e+1]:E[e+1],m=(0,d.R8)(n)&&"HUNK"===n.type,x=(0,d.Re)(y,n,o),j=(0,d.Ok)(n)?(0,d.Ok)(o)?void 0:o:n;if(!j)continue;let k=(0,d.Ok)(n)?void 0:n.threadsData,S=(0,d.Ok)(o)?void 0:o.threadsData,{currentHunk:L,nextHunk:w,previousHunk:H}=(0,s.sI)(j,F),Z=A.get((0,d.Ok)(n)?-2:n.left??-2),B=O.get((0,d.Ok)(o)?-2:o.right??-2),P=M.get(j.blobLineNumber),U=P?.[0]?.rightLineNumber===o?.right?t:void 0,$=Z?.[0]?.leftLineNumber===n?.left?t:void 0,W=B?.[0]?.rightLineNumber===o?.right?t:void 0,V=(0,g.K)(n,o,"LEFT"),q=(0,g.K)(n,o,"RIGHT"),G=(0,a.H)(S,I),z=(0,a.H)(k,I),K={currentHunk:L,diffEntryId:p,fileAnchor:y,fileLineCount:b,filePath:C,isRowSelected:T?.isRowSelected(n)||T?.isRowSelected(o),modifiedLineThreadsConnectionId:S?.__id,nextHunk:w,originalLineThreadsConnectionId:k?.__id,previousHunk:H,rowId:x,isSplit:!0};_.push((0,i.jsx)(r.Fragment,{children:(0,i.jsx)("tr",{className:"diff-line-row",children:m?(0,i.jsx)(l.m,{...K,diffLine:j,modifiedLineThreads:G,originalLineThreads:z,children:(0,i.jsx)(h.Z,{nextLine:u,prevLine:c,focusedSearchResult:U,resultsForLine:P})}):(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)(l.m,{...K,diffLine:n,isLeftSide:!0,children:(0,i.jsx)(f.EA,{summary:V,copilotChatReferenceData:D,fileAnchor:y,filePath:C,handleDiffRowClick:v,handleDiffSideCellSelectionBlocking:N,resultsForLine:Z,focusedSearchResult:$})}),(0,i.jsx)(l.m,{...K,diffLine:o,children:(0,i.jsx)(f.EA,{summary:q,copilotChatReferenceData:D,fileAnchor:y,filePath:C,handleDiffRowClick:v,handleDiffSideCellSelectionBlocking:N,resultsForLine:B,focusedSearchResult:W})})]})})},x))}return(0,i.jsx)(i.Fragment,{children:_})}),x=p;try{p.displayName||(p.displayName="SplitDiffLines")}catch{}},68306:(e,t,n)=>{n.d(t,{F:()=>x});var i=n(85893),r=n(85529),l=n(52972),a=n(67294),o=n(81684),s=n(21469),d=n(25452),c=n(12316),u=n(71657),f=n(73942);let h={left:"L",right:"R"},m="Start conversation",g="Suggest change";function p(e,t,n){let i=n&&!(0,c.FY)(t)?h.left:h.right;return`${e} on line ${i}${t.blobLineNumber}`}function x({handleStartConversationWithSuggestedChange:e,handleStartConversation:t}){let n,x,y;let{selectedDiffRowRange:b,selectedDiffLines:C,replaceSelectedDiffRowRange:v}=(0,d.h)(),{commentingEnabled:N}=(0,o.Y)(),{diffLine:j,isLeftSide:k,isSplit:S}=(0,s.b)(),L=(0,a.useMemo)(()=>C.leftLines[0],[C.leftLines]),w=(0,a.useMemo)(()=>C.leftLines[C.leftLines.length-1],[C.leftLines]),D=(0,a.useMemo)(()=>C.leftLines.every(e=>!(0,c.Ok)(e)&&"DELETION"!==e.type),[C.leftLines]),E=(0,a.useMemo)(()=>C.rightLines[0],[C.rightLines]),R=(0,a.useMemo)(()=>C.rightLines[C.rightLines.length-1],[C.rightLines]),I=(0,a.useMemo)(()=>0===C.rightLines.length,[C.rightLines]),T=(0,a.useMemo)(()=>0===C.leftLines.length,[C.leftLines]),F=(0,a.useMemo)(()=>!(C.leftLines.find(e=>!(0,c.Ok)(e)&&!(0,c.FY)(e)&&"INJECTED_CONTEXT"!==e.type)||C.rightLines.find(e=>!(0,c.Ok)(e)&&!(0,c.FY)(e)&&"INJECTED_CONTEXT"!==e.type)),[C.leftLines,C.rightLines]),A=(0,a.useCallback)((n,i)=>{!(!b||!w||!L||(0,c.Ok)(w)||(0,c.Ok)(L))&&L.left&&w.left&&(v({diffAnchor:b.diffAnchor,endLineNumber:w.left,endOrientation:"left",startLineNumber:L.left,startOrientation:"left",firstSelectedLineNumber:L.left,firstSelectedOrientation:"left"}),i?.withSuggestedChange?e():t())},[b,w,L,v,e,t]),O=(0,a.useCallback)((n,i)=>{!(!b||!R||!E||(0,c.Ok)(R)||(0,c.Ok)(E))&&E.right&&R.right&&(v({diffAnchor:b.diffAnchor,endLineNumber:R.right,endOrientation:"right",startLineNumber:E.right,startOrientation:"right",firstSelectedLineNumber:E.right,firstSelectedOrientation:"right"}),i?.withSuggestedChange?e():t())},[b,R,E,v,e,t]),M=(0,a.useMemo)(()=>!!b&&(b.startOrientation!==b.endOrientation||b.startLineNumber!==b.endLineNumber),[b]);if(!N)return null;let _=!1,H=!1;if(b&&M){let t=h[b.startOrientation],a=h[b.endOrientation];return y=` on lines ${t}${b.startLineNumber}-${a}${b.endLineNumber}`,!(0,c.Ok)(L)&&!(0,c.Ok)(w)&&L&&w&&(_=!0,n=L.left===w.left?I?` on line L${L.left}`:`, original line L${L.left}`:I?` on lines L${L.left}-L${w.right}`:`, original lines L${L.left}-L${w.left}`),!(0,c.Ok)(E)&&!(0,c.Ok)(R)&&E&&R&&(H=!0,x=E.right===R.right?T||S&&F?` on line R${E.right}`:`, modified line R${R.right}`:T||S&&F?` on lines R${E.right}-R${R.right}`:`, modified lines R${E.right}-R${R.right}`),(0,i.jsx)(i.Fragment,{children:S?(0,i.jsx)(i.Fragment,{children:F?(0,i.jsxs)(i.Fragment,{children:[(0,i.jsxs)(l.S.Item,{onSelect:O,children:[(0,i.jsx)(l.S.LeadingVisual,{children:(0,i.jsx)(r.PlusIcon,{})}),m+x,(0,i.jsx)(l.S.TrailingVisual,{children:(0,i.jsx)(u.u,{keys:"Alt+n"})})]}),(0,i.jsxs)(l.S.Item,{onSelect:e=>O(e,{withSuggestedChange:!0}),children:[(0,i.jsx)(l.S.LeadingVisual,{children:(0,i.jsx)(r.PlusCircleIcon,{})}),g+x]})]}):(0,i.jsxs)(i.Fragment,{children:[_?(0,i.jsxs)(i.Fragment,{children:[(0,i.jsxs)(l.S.Item,{onSelect:A,children:[(0,i.jsx)(l.S.LeadingVisual,{children:(0,i.jsx)(r.PlusIcon,{})}),m+n,(0,i.jsx)(l.S.TrailingVisual,{children:(0,i.jsx)(u.u,{keys:I?"Alt+n":"Alt+Shift+N"})})]}),D&&(0,i.jsxs)(l.S.Item,{onSelect:e=>A(e,{withSuggestedChange:!0}),children:[(0,i.jsx)(l.S.LeadingVisual,{children:(0,i.jsx)(r.PlusCircleIcon,{})}),g+n]})]}):null,H?(0,i.jsxs)(i.Fragment,{children:[(0,i.jsxs)(l.S.Item,{onSelect:O,children:[(0,i.jsx)(l.S.LeadingVisual,{children:(0,i.jsx)(r.PlusIcon,{})}),m+x,(0,i.jsx)(l.S.TrailingVisual,{children:(0,i.jsx)(u.u,{keys:"Alt+n"})})]}),(0,i.jsxs)(l.S.Item,{onSelect:e=>O(e,{withSuggestedChange:!0}),children:[(0,i.jsx)(l.S.LeadingVisual,{children:(0,i.jsx)(r.PlusCircleIcon,{})}),g+x]})]}):null]})}):(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)(f.hj,{commandId:"pull-requests-diff-view:start-conversation-current",leadingVisual:(0,i.jsx)(r.PlusIcon,{}),children:m+y}),"DELETION"!==j.type&&D&&(0,i.jsxs)(l.S.Item,{onSelect:e,children:[(0,i.jsx)(l.S.LeadingVisual,{children:(0,i.jsx)(r.PlusCircleIcon,{})}),g+y]})]})})}return(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)(f.hj,{commandId:"pull-requests-diff-view:start-conversation-current",leadingVisual:(0,i.jsx)(r.PlusIcon,{}),children:p(m,j,k)}),"DELETION"!==j.type&&(0,i.jsxs)(l.S.Item,{onSelect:e,children:[(0,i.jsx)(l.S.LeadingVisual,{children:(0,i.jsx)(r.PlusCircleIcon,{})}),p(g,j,k)]})]})}try{x.displayName||(x.displayName="StartConversationContextMenuItems")}catch{}},98102:(e,t,n)=>{n.d(t,{Z:()=>g});var i=n(85893),r=n(9770),l=n(67294),a=n(21469),o=n(57144),s=n(27490),d=n(12316),c=n(60229),u=n(26441),f=n(72191),h=n(10758);let m=(0,l.memo)(function({searchResults:e,focusedSearchResult:t,clearSelectedDiffRowRange:n,diffEntryId:m,diffLines:g,fileLineCount:p,fileAnchor:x,filePath:y,tableRef:b,selectedDiffRowRange:C,handleDiffRowClick:v,updateDiffLines:N,updateSelectedDiffRowRange:j,replaceSelectedDiffRowRangeFromGridCells:k,copilotChatReferenceData:S}){(0,c.X)({clearSelectedDiffRowRange:n,containerRef:b,fileAnchor:x,isSplitDiff:!1,leftLines:g,replaceSelectedDiffRowRangeFromGridCells:k,selectedDiffRowRange:C,updateSelectedDiffRowRange:j});let L=(0,l.useMemo)(()=>{if(C)return(0,o.Z)({selectedDiffRowRange:C,leftLines:g})},[C,g]),w=(0,l.useMemo)(()=>(0,s.mi)(g.map(e=>e)),[g]);(0,l.useEffect)(()=>{N(x,g)},[g,x,N]);let D=new Map;for(let t=0;t<(e?.length??0);t++){let n=e?.[t];n&&(e&&D.has(n.diffLineNumIndex)?D.get(n.diffLineNumIndex)?.push(n):e&&D.set(n.diffLineNumIndex,[n]))}let E=g.map((e,n)=>{let o=g[n+1],c=g[n-1],b="HUNK"===e.type,C=(0,r._N)(x,(0,r.Jn)(e.type),e.blobLineNumber),{currentHunk:N,nextHunk:j,previousHunk:k}=(0,s.sI)(e,w),E=D.get(n),R=n===E?.[0]?.diffLineNumIndex?t:void 0,I=(0,h.K)(e,e,"RIGHT"),T=L?.isRowSelected(e),F=(0,d.Re)(x,e,e),A={diffEntryId:m,diffLine:e,currentHunk:N,fileAnchor:x,fileLineCount:p,filePath:y,isLeftSide:"DELETION"===e.type,isSplit:!1,nextHunk:j,previousHunk:k};return(0,i.jsx)(l.Fragment,{children:(0,i.jsx)("tr",{className:"diff-line-row",children:(0,i.jsx)(a.m,{...A,isRowSelected:T,rowId:F,children:b?(0,i.jsx)(f.Z,{nextLine:o,prevLine:c,focusedSearchResult:R,resultsForLine:E},n):(0,i.jsx)(u.jo,{filePath:y,copilotChatReferenceData:S,handleDiffRowClick:v,lineAnchor:C,resultsForLine:E,focusedSearchResult:R,summary:I},n)})})},n)});return(0,i.jsx)(i.Fragment,{children:E})}),g=m;try{m.displayName||(m.displayName="UnifiedDiffLines")}catch{}},81684:(e,t,n)=>{n.d(t,{O:()=>o,Y:()=>s});var i=n(85893),r=n(41291),l=n(67294);let a=(0,l.createContext)(null);function o({children:e,...t}){let n=!!t.commentingImplementation,o=!!t.markerNavigationImplementation;if(t.commentingEnabled!==n&&t.commentingEnabled!==o)throw Error("commentingEnabled, commentingImplementation, and markerNavigationImplementation must be passed together");let s=t?.ghostUser??r.HB.ghostUser,d=(0,l.useMemo)(()=>({ghostUser:s,...t}),[...Object.values(t),s]);return(0,i.jsx)(a.Provider,{value:d,children:e})}function s(){let e=(0,l.useContext)(a);if(!e)throw Error("useDiffContext must be used within a DiffContextProvider");return e}try{a.displayName||(a.displayName="DiffContext")}catch{}try{o.displayName||(o.displayName="DiffContextProvider")}catch{}},74872:(e,t,n)=>{n.d(t,{X:()=>a,_:()=>o});var i=n(85893),r=n(67294);let l=(0,r.createContext)({diffFindOpen:!1,setDiffFindOpen:()=>void 0});function a({children:e,searchTerm:t,setSearchTerm:n}){let a=(0,r.useRef)(""),[o,s]=(0,r.useState)(!1),d=(0,r.useCallback)(e=>{e&&""===t&&""!==a.current?n(a.current):e||""===t||(a.current=t,n("")),s(e)},[t,n]),c=(0,r.useMemo)(()=>({diffFindOpen:o,setDiffFindOpen:d}),[o,d]);return(0,i.jsx)(l.Provider,{value:c,children:e})}function o(){return(0,r.useContext)(l)}try{l.displayName||(l.displayName="DiffFindOpenContext")}catch{}try{a.displayName||(a.displayName="DiffFindOpenProvider")}catch{}},21469:(e,t,n)=>{n.d(t,{b:()=>o,m:()=>a});var i=n(85893),r=n(67294);let l=(0,r.createContext)(null);function a({children:e,currentHunk:t,diffEntryId:n,diffLine:a,fileAnchor:o,fileLineCount:s,filePath:d,isLeftSide:c,isRowSelected:u,isSplit:f,modifiedLineThreads:h,modifiedLineThreadsConnectionId:m,nextHunk:g,originalLineThreads:p,originalLineThreadsConnectionId:x,previousHunk:y,rowId:b}){let C=(0,r.useMemo)(()=>({currentHunk:t,diffEntryId:n,diffLine:a,fileAnchor:o,fileLineCount:s,filePath:d,isLeftSide:c,isRowSelected:u,isSplit:f,modifiedLineThreads:h,modifiedLineHasThreads:h&&h.length>0,modifiedLineThreadsConnectionId:m,nextHunk:g,originalLineThreads:p,originalLineHasThreads:p&&p.length>0,originalLineThreadsConnectionId:x,previousHunk:y,rowId:b}),[t,n,a,o,s,d,c,u,f,h,m,g,p,x,y,b]);return(0,i.jsx)(l.Provider,{value:C,children:e})}function o(){let e=(0,r.useContext)(l);if(!e)throw Error("useDiffLineContext must be used within a DiffLineContextProvider");return e}try{l.displayName||(l.displayName="DiffLineContext")}catch{}try{a.displayName||(a.displayName="DiffLineContextProvider")}catch{}},77666:(e,t,n)=>{n.d(t,{N:()=>m,g:()=>h});var i=n(85893),r=n(67294),l=n(24862),a=n(61402),o=n(21469),s=n(81684),d=n(82012);let c="thread",u="annotation",f=(0,r.createContext)(null);function h({children:e,line:t}){let[n,a]=(0,r.useState)(!1),[h,m]=(0,r.useState)(),[p,x]=(0,r.useState)(),[y,b]=(0,r.useState)(),[C,v]=(0,r.useState)(),[N,j]=(0,r.useState)(),{ghostUser:k}=(0,s.Y)(),{originalLineThreads:S,modifiedLineThreads:L,originalLineThreadsConnectionId:w,modifiedLineThreadsConnectionId:D}=(0,o.b)(),[E,R]=(0,r.useState)(),{threads:I,threadConnectionId:T}=g({line:t,side:E,originalLineThreads:S,modifiedLineThreads:L,originalLineThreadsConnectionId:w,modifiedLineThreadsConnectionId:D,ghostUser:k}),F=(0,r.useMemo)(()=>!!h||!!p||!!y||!!C,[h,y,p,C]),A=(0,r.useCallback)(()=>{a(!0)},[]),O=(0,r.useCallback)(()=>{a(!1)},[]),M=(0,r.useCallback)(e=>{e?j({id:e,kind:c}):j(void 0)},[]),_=N?.kind===c?N.id:void 0,H=N?.kind===u?N.id:void 0,Z=(0,r.useCallback)(e=>{e?j({id:e,kind:u}):j(void 0)},[]),B=(0,r.useCallback)((e,t,n)=>{switch((0,l.B)(),e){case"context-menu":m(t),v(void 0),b(void 0),x(void 0);break;case"new-conversation":v({cellId:t,withSuggestedChange:n?.withSuggestedChange}),m(void 0),b(void 0),x(void 0);break;case"marker-details":b(t),m(void 0),x(void 0),v(void 0);break;case"marker-list":x(t),m(void 0),v(void 0),b(void 0)}},[]),P=(0,r.useCallback)(e=>{switch(e){case"context-menu":m(void 0);break;case"new-conversation":v(void 0);break;case"marker-details":b(void 0);break;case"marker-list":x(void 0)}},[]),U=(0,r.useCallback)(e=>(R(e),g({line:t,side:e,modifiedLineThreads:L,modifiedLineThreadsConnectionId:D,originalLineThreads:S,originalLineThreadsConnectionId:w,ghostUser:k}).threads),[t,L,D,S,w,k]),$=(0,r.useMemo)(()=>t.annotationsData?.annotations?.filter(d.D)??[],[t.annotationsData?.annotations]),W=(0,r.useMemo)(()=>({annotations:$,isActionBarVisible:n,showActionBar:A,hideActionBar:O,selectThreadId:M,selectAnnotationId:Z,closeDialog:P,openDialog:B,anyMenuOpen:F,selectedThreadId:_,selectedAnnotationId:H,openContextMenuCell:h,openMarkersListCell:p,openMarkerDetailsCell:y,openNewConversationCell:C,threads:I,updateVisibleThreads:U,threadConnectionId:T}),[$,n,A,O,M,Z,P,B,F,_,H,h,p,y,C,I,T,U]);return(0,i.jsx)(f.Provider,{value:W,children:e})}function m(){let e=(0,r.useContext)(f);if(!e)throw Error("useMarkersDialogContext must be used within a MarkersDialogContextProvider");return e}function g({line:e,side:t,originalLineThreads:n,modifiedLineThreads:i,originalLineThreadsConnectionId:r,modifiedLineThreadsConnectionId:l,ghostUser:o}){switch(t){case"LEFT":return{threads:n||[],threadConnectionId:r};case"RIGHT":return{threads:i||[],threadConnectionId:l};case void 0:return{threads:(0,a.H)(e.threadsData,o),threadConnectionId:e.threadsData?.__id};default:return{threads:[],threadConnectionId:void 0}}}try{f.displayName||(f.displayName="MarkersDialogContext")}catch{}try{h.displayName||(h.displayName="MarkersDialogContextProvider")}catch{}},25452:(e,t,n)=>{n.d(t,{h:()=>f,j:()=>m});var i=n(85893),r=n(11808),l=n(84669),a=n(67294),o=n(57144),s=n(17916),d=n(85918),c=n(12316);let u=(0,a.createContext)(null);function f(){let e=(0,a.useContext)(u);if(!e)throw Error("useSelectedDiffRowRange must be used within a SelectedDiffRowRangeContext");return e}function h(e){e.startLineNumber===e.endLineNumber&&e.startOrientation===e.endOrientation?(0,r.x)(`${"left"===e.startOrientation?"L":"R"}${e.startLineNumber} selected.`):(0,r.x)(`${"left"===e.startOrientation?"L":"R"}${e.startLineNumber} to ${"left"===e.endOrientation?"L":"R"}${e.endLineNumber} selected.`)}function m({children:e}){let t=(0,a.useRef)(new Map),n=(0,d.R)(e=>{if(!e)return;let n=e.diffAnchor,i=t.current.get(n);if(!i)return;let{leftLines:r,rightLines:l}=(0,c.Ek)(i);return(0,o.Z)({selectedDiffRowRange:e,leftLines:r,rightLines:l})}),[f,m]=(0,a.useState)(()=>(0,s.rn)(l.ssrSafeLocation.hash)),[g,p]=(0,a.useState)(()=>{if(f){let e=n(f);if(e)return{leftLines:e.selectedLeftLines,rightLines:e.selectedRightLines||[]}}return{leftLines:[],rightLines:[]}}),x=(0,d.R)(e=>{let t=n(e);p(t?{leftLines:t.selectedLeftLines,rightLines:t.selectedRightLines||[]}:{leftLines:[],rightLines:[]})}),y=(0,d.R)((e,t,n,i)=>{if(!t||!n)return;let r=i&&f&&f.diffAnchor===e?t<=f.firstSelectedLineNumber?{...f,startLineNumber:t,startOrientation:n,endLineNumber:f.firstSelectedLineNumber,endOrientation:f.firstSelectedOrientation}:{...f,startLineNumber:f.firstSelectedLineNumber,startOrientation:f.firstSelectedOrientation,endLineNumber:t,endOrientation:n}:{diffAnchor:e,endLineNumber:t,endOrientation:n,startLineNumber:t,startOrientation:n,firstSelectedLineNumber:t,firstSelectedOrientation:n};h(r),m(r),x(r),(0,s.fI)(r)}),b=(0,d.R)(e=>{h(e),m(e),x(e),(0,s.fI)(e)}),C=(0,d.R)(({diffAnchor:e,startGridCell:t,endGridCell:n,focusedGridCell:i})=>{b({diffAnchor:e,endLineNumber:n.lineNumber,endOrientation:n.orientation,firstSelectedLineNumber:i.lineNumber,firstSelectedOrientation:i.orientation,startLineNumber:t.lineNumber,startOrientation:t.orientation})}),v=(0,d.R)(()=>{f&&(m(void 0),x(void 0),(0,r.x)("Selection Cleared"),history.replaceState({},"",window.location.pathname+window.location.search))}),N=(0,d.R)((e,n)=>{t.current.set(e,n),f?.diffAnchor===e&&x(f)}),j=(0,d.R)(e=>t.current.get(e)),k=(0,a.useMemo)(()=>({selectedDiffRowRange:f,updateSelectedDiffRowRange:y,clearSelectedDiffRowRange:v,replaceSelectedDiffRowRange:b,replaceSelectedDiffRowRangeFromGridCells:C,updateDiffLines:N,selectedDiffLines:g,getDiffLinesFromLineRange:n,getDiffLinesByDiffAnchor:j}),[f,y,v,b,C,g,N,n,j]);return(0,i.jsx)(u.Provider,{value:k,children:e})}try{u.displayName||(u.displayName="SelectedDiffRowRange")}catch{}try{m.displayName||(m.displayName="SelectedDiffRowRangeContextProvider")}catch{}},78466:(e,t,n)=>{n.r(t),n.d(t,{default:()=>u});var i=n(85893),r=n(51350),l=n(51461),a=n(42483),o=n(74121),s=n(97011),d=n(67294),c=n(33474);function u({identityUuid:e,size:t,type:n,url:s}){let[d]=(0,r.D)(()=>window.location.origin,"https://www.github.com",[]),u=new URL(s,d).origin,{renderState:h,errorMsg:m,iFrameRef:g,containerRef:p}=(0,c.Zd)(u);if("ipynb"===n&&t>3e7||t>2e8)return(0,i.jsx)(l.Z,{variant:"danger",children:"Sorry, this is too big to display."});let x=h!==c.nT.READY?{height:"1px",width:"1px",position:"fixed",bottom:0,right:0}:{height:"100%",width:"100%"},y={height:c.Vq,padding:0,background:"none"};return(0,i.jsx)(a.Z,{sx:{width:"100%",display:"flex",justifyContent:"center"},children:(0,i.jsxs)(a.Z,{"data-hpc":!0,"data-host":u,"data-type":n,ref:p,sx:{width:1024,...h!==c.nT.ERROR?{borderBottomLeftRadius:"6px",borderBottomRightRadius:"6px",lineHeight:"0",padding:5,textAlign:"center"}:{},...h===c.nT.READY?y:{}},children:[h===c.nT.ERROR?(0,i.jsx)(f,{error:m}):h!==c.nT.READY?(0,i.jsx)(o.Z,{size:"large",sx:{mx:"auto"}}):null,h!==c.nT.ERROR&&(0,i.jsx)(a.Z,{as:"iframe",ref:g,src:`${s}#${e}`,sandbox:"allow-scripts allow-same-origin allow-top-navigation",sx:{border:0,display:"block",...x},name:e,title:"File display",children:"Viewer requires iframe."})]})})}function f({error:e}){if(!e)return(0,i.jsx)(l.Z,{variant:"danger",children:"Unable to render code block"});let t=e.split("\n");return(0,i.jsxs)(l.Z,{variant:"danger",children:[(0,i.jsx)(s.Z,{as:"p",sx:{fontWeight:"bold"},children:"Error rendering embedded code"}),(0,i.jsx)(s.Z,{as:"p",children:t.map((e,t)=>(0,i.jsxs)(d.Fragment,{children:[e,(0,i.jsx)("br",{})]},`error-line-${t}`))})]})}try{u.displayName||(u.displayName="FileRendererBlob")}catch{}try{f.displayName||(f.displayName="FileRendererErrorMessage")}catch{}},10351:(e,t,n)=>{n.d(t,{ZV:()=>u,_G:()=>i,eI:()=>d,xp:()=>c});var i,r=n(85893),l=n(46263),a=n(67294);!function(e){e[e.small=1]="small",e[e.medium=544]="medium",e[e.large=768]="large",e[e.xlarge=1012]="xlarge",e[e.xxlarge=1280]="xxlarge",e[e.xxxlarge=1350]="xxxlarge",e[e.xxxxlarge=1440]="xxxxlarge"}(i||(i={}));let o=[1440,1350,1280,1012,768,544,1],s=a.createContext({screenSize:1});function d(){return a.useContext(s)}function c({children:e,initialValue:t}){let n=(0,a.useSyncExternalStore)(()=>()=>{},()=>t??u(window.innerWidth),()=>t??1),i=(0,a.useRef)(n),[o,d]=(0,a.useState)(n),c=(0,a.useCallback)(()=>{let e=u(window.innerWidth);i.current!==e&&(i.current=e,d(e))},[]);(0,a.useEffect)(()=>{let e=new ResizeObserver((0,l.D)(c));return e.observe(document.documentElement),()=>e.disconnect()},[c]);let f=(0,a.useMemo)(()=>({screenSize:o}),[o]);return(0,r.jsx)(s.Provider,{value:f,children:e})}function u(e){for(let t of o)if(e>=t)return t;return 1}try{s.displayName||(s.displayName="ScreenContext")}catch{}try{c.displayName||(c.displayName="ScreenSizeProvider")}catch{}},19467:(e,t,n)=>{n.d(t,{K:()=>o});var i=n(85893),r=n(69481),l=n(42483),a=n(5786);function o({zIndex:e,altText:t,hovercardUrl:n,src:o,square:s,icon:d,iconColor:c,backgroundColor:u,backgroundSx:f,sx:h,size:m=20}){return(0,i.jsxs)(l.Z,{sx:{position:"relative",display:"flex",gap:2,alignItems:"center",...e,...h},children:[(0,i.jsx)(r.O,{alt:t,"data-hovercard-url":n,size:m,square:s,src:o}),(0,i.jsx)(a.J,{icon:d,iconColor:c,size:12,backgroundColor:u,backgroundSx:f})]})}try{o.displayName||(o.displayName="StatusAvatar")}catch{}},5786:(e,t,n)=>{n.d(t,{J:()=>a});var i=n(85893),r=n(42483),l=n(98833);function a({iconColor:e,icon:t,size:n=12,backgroundColor:a="fg.onEmphasis",absolute:o=!0,backgroundSx:s}){let d,c;return 12===n?(d="10px",c="1px"):20===n?(d="16px",c="2px"):(d="16px",c="4px"),(0,i.jsxs)(r.Z,{sx:{display:"flex",borderRadius:"100px",...o?{position:"absolute",bottom:-1,right:-1,boxShadow:"0 0 0 2px var(--bgColor-default, var(--color-canvas-default))",backgroundColor:"var(--bgColor-default, var(--color-canvas-default))"}:{position:"relative"},...s},children:[(0,i.jsx)(r.Z,{sx:{display:"flex",position:"absolute",borderRadius:"100px",width:d,height:d,left:c,top:c,backgroundColor:a}}),(0,i.jsx)(l.Z,{icon:t,size:n,sx:{color:e,position:"relative"}})]})}try{a.displayName||(a.displayName="StatusIcon")}catch{}}}]);
//# sourceMappingURL=ui_packages_diff-file-header_diff-file-header_ts-ui_packages_diff-file-tree_diff-file-tree_ts-7f5a83-26dc1da63714.js.map